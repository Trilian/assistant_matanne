============================= test session starts =============================
platform win32 -- Python 3.11.8, pytest-9.0.2, pluggy-1.6.0
rootdir: D:\Projet_streamlit\assistant_matanne
configfile: pytest.ini
plugins: anyio-4.12.1, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=function, asyncio_default_test_loop_scope=function
collected 10560 items

tests\api\test_85_coverage.py .................                          [  0%]
tests\api\test_api_coverage_80.py ...................................... [  0%]
.............................s.......................................... [  1%]
................................                                         [  1%]
tests\api\test_api_deep.py ............................................. [  1%]
....ss.s........s.....ss..s..sss...                                      [  2%]
tests\api\test_extended_api.py ......................                    [  2%]
tests\api\test_main.py sssss                                             [  2%]
tests\api\test_rate_limiting.py ......                                   [  2%]
tests\api\test_rate_limiting_comprehensive.py .......................... [  2%]
....ssss...............ss                                                [  3%]
tests\api\test_simple_extended.py .........                              [  3%]
tests\benchmarks\test_perf_core_operations.py .........                  [  3%]
tests\core\test_action_history.py ........................               [  3%]
tests\core\test_ai_agent.py ......................                       [  3%]
tests\core\test_ai_agent_sync.py ..............                          [  3%]
tests\core\test_ai_cache.py ................                             [  3%]
tests\core\test_ai_client.py ..............                              [  4%]
tests\core\test_ai_modules.py ss........s                                [  4%]
tests\core\test_ai_parser_extended.py .......................            [  4%]
tests\core\test_ai_rate_limit.py ............                            [  4%]
tests\core\test_app.py ...                                               [  4%]
tests\core\test_app_coverage.py ........................................ [  4%]
...............                                                          [  5%]
tests\core\test_app_main.py .......................                      [  5%]
tests\core\test_cache.py ............................                    [  5%]
tests\core\test_cache_coverage.py .............................          [  5%]
tests\core\test_cache_deep.py .....................................      [  6%]
tests\core\test_cache_multi.py ..ss......ss..sssssssss.....              [  6%]
tests\core\test_cache_multi_deep.py ...................ssssssss          [  6%]
tests\core\test_config.py ..............................                 [  6%]
tests\core\test_config_deep.py .............s..............              [  7%]
tests\core\test_config_extended.py ...............                       [  7%]
tests\core\test_constants.py ........................................... [  7%]
...                                                                      [  7%]
tests\core\test_core_deep.py ........................................... [  8%]
...........................................                              [  8%]
tests\core\test_core_utils.py ..sssssssss                                [  8%]
tests\core\test_coverage_80_boost.py ......................              [  8%]
tests\core\test_coverage_80_final.py ....................                [  9%]
tests\core\test_coverage_80_push.py ........................             [  9%]
tests\core\test_coverage_80_targeted.py ............................     [  9%]
tests\core\test_coverage_boost.py ...................................... [  9%]
.......                                                                  [ 10%]
tests\core\test_database.py ..........s........................          [ 10%]
tests\core\test_database_deep.py ..................................s.... [ 10%]
                                                                         [ 10%]
tests\core\test_database_extended.py .......s..                          [ 10%]
tests\core\test_decorators.py ...........                                [ 10%]
tests\core\test_decorators_basic.py .....................                [ 11%]
tests\core\test_decorators_deep.py .....................                 [ 11%]
tests\core\test_decorators_edge_cases.py .....................           [ 11%]
tests\core\test_decorators_extended.py ............                      [ 11%]
tests\core\test_errors.py .....................................          [ 12%]
tests\core\test_errors_advanced.py ..................................... [ 12%]
......                                                                   [ 12%]
tests\core\test_errors_base.py ......................................... [ 12%]
......                                                                   [ 12%]
tests\core\test_errors_deep.py .......................................   [ 13%]
tests\core\test_lazy_cache_advanced.py ................................  [ 13%]
tests\core\test_lazy_loader.py ......                                    [ 13%]
tests\core\test_lazy_loader_deep.py ..........................           [ 13%]
tests\core\test_lazy_loader_extended.py ..................               [ 14%]
tests\core\test_logging.py ...............................               [ 14%]
tests\core\test_models_batch_cooking.py sssss                            [ 14%]
tests\core\test_models_comprehensive.py sssssssss...ssss                 [ 14%]
tests\core\test_models_recettes.py .......................               [ 14%]
tests\core\test_multi_tenant.py .................................        [ 15%]
tests\core\test_multi_tenant_deep.py ................................... [ 15%]
...........                                                              [ 15%]
tests\core\test_notifications.py ....................................... [ 15%]
....                                                                     [ 15%]
tests\core\test_notifications_deep.py .................................. [ 16%]
..............                                                           [ 16%]
tests\core\test_offline.py ...                                           [ 16%]
tests\core\test_offline_deep.py ...........................              [ 16%]
tests\core\test_parser_ai.py ......................                      [ 16%]
tests\core\test_performance.py ..                                        [ 16%]
tests\core\test_performance_deep.py .......................              [ 17%]
tests\core\test_performance_optimizations.py ........................... [ 17%]
..............                                                           [ 17%]
tests\core\test_performance_optimizations_deep.py .ss................    [ 17%]
tests\core\test_redis_cache.py ........................................  [ 18%]
tests\core\test_redis_cache_deep.py .................................... [ 18%]
.........                                                                [ 18%]
tests\core\test_sql_optimizer.py .......s                                [ 18%]
tests\core\test_sql_optimizer_deep.py .........................          [ 18%]
tests\core\test_state.py ..................................              [ 19%]
tests\core\test_validation.py .......................................... [ 19%]
                                                                         [ 19%]
tests\core\test_validation_pydantic.py ................................. [ 19%]
.......                                                                  [ 19%]
tests\core\test_validators_pydantic.py .....................             [ 20%]
tests\core\test_validators_pydantic_deep.py ......................       [ 20%]
tests\domains\cuisine\services\test_batch_cooking.py ................... [ 20%]
...                                                                      [ 20%]
tests\domains\cuisine\test_batch_cooking_detaille_ui.py .                [ 20%]
tests\domains\cuisine\test_batch_cooking_logic.py ...................... [ 20%]
.....................                                                    [ 20%]
tests\domains\cuisine\test_batch_cooking_logic_coverage.py ............. [ 21%]
...................                                                      [ 21%]
tests\domains\cuisine\test_courses_logic.py ............................ [ 21%]
.....................                                                    [ 21%]
tests\domains\cuisine\test_courses_ui.py .                               [ 21%]
tests\domains\cuisine\test_init.py .                                     [ 21%]
tests\domains\cuisine\test_inventaire_logic.py ......................... [ 21%]
................................                                         [ 22%]
tests\domains\cuisine\test_inventaire_logic_coverage.py ................ [ 22%]
.............................                                            [ 22%]
tests\domains\cuisine\test_inventaire_ui.py .                            [ 22%]
tests\domains\cuisine\test_phase2_meals.py ...............               [ 22%]
tests\domains\cuisine\test_phase2_recipes.py ...............             [ 22%]
tests\domains\cuisine\test_planificateur_repas_logic.py ................ [ 23%]
...........                                                              [ 23%]
tests\domains\cuisine\test_planificateur_repas_logic_coverage.py ....... [ 23%]
.........................                                                [ 23%]
tests\domains\cuisine\test_planning_logic.py ........................    [ 23%]
tests\domains\cuisine\test_recettes_logic.py ............                [ 23%]
tests\domains\cuisine\test_recettes_logic_coverage.py .................. [ 23%]
................                                                         [ 24%]
tests\domains\cuisine\test_schemas.py ...................                [ 24%]
tests\domains\cuisine\ui\test_batch_cooking_detaille.py .                [ 24%]
tests\domains\cuisine\ui\test_planificateur_repas.py .........           [ 24%]
tests\domains\cuisine\ui\test_planificateur_repas_extended.py .......... [ 24%]
.......................                                                  [ 24%]
tests\domains\cuisine\ui\test_planificateur_repas_fixed.py ............. [ 24%]
...............................                                          [ 25%]
tests\domains\cuisine\ui\test_recettes.py .................              [ 25%]
tests\domains\famille\test_achats_famille_ui.py .                        [ 25%]
tests\domains\famille\test_activites_logic.py .......................... [ 25%]
...........                                                              [ 25%]
tests\domains\famille\test_init.py .                                     [ 25%]
tests\domains\famille\test_phase2_profiles.py ..............             [ 25%]
tests\domains\famille\test_phase2_tracking.py ..............             [ 25%]
tests\domains\famille\test_routines_logic.py ........................... [ 26%]
...................                                                      [ 26%]
tests\domains\famille\ui\test_achats_famille.py ........................ [ 26%]
............                                                             [ 26%]
tests\domains\famille\ui\test_activites.py ......................        [ 26%]
tests\domains\famille\ui\test_hub_famille.py ........................... [ 27%]
........                                                                 [ 27%]
tests\domains\famille\ui\test_jules.py ................................. [ 27%]
....                                                                     [ 27%]
tests\domains\famille\ui\test_jules_planning.py .........                [ 27%]
tests\domains\famille\ui\test_jules_planning_extended.py ............... [ 27%]
...............                                                          [ 27%]
tests\domains\famille\ui\test_routines.py .........................      [ 28%]
tests\domains\famille\ui\test_suivi_perso.py ........................... [ 28%]
..............                                                           [ 28%]
tests\domains\famille\ui\test_weekend.py ............................... [ 28%]
....................                                                     [ 29%]
tests\domains\jeux\test_api_football_coverage.py ....................... [ 29%]
..............                                                           [ 29%]
tests\domains\jeux\test_integration.py .....                             [ 29%]
tests\domains\jeux\test_jeux_apis.py ...                                 [ 29%]
tests\domains\jeux\test_loto_logic.py .................                  [ 29%]
tests\domains\jeux\test_paris_logic_coverage.py ........................ [ 29%]
.......................................                                  [ 30%]
tests\domains\jeux\test_scraper_loto_coverage.py ....................... [ 30%]
.........                                                                [ 30%]
tests\domains\jeux\test_setup.py ......                                  [ 30%]
tests\domains\jeux\ui\test_loto.py .                                     [ 30%]
tests\domains\maison\services\test_inventaire.py ..                      [ 30%]
tests\domains\maison\services\test_paris_logic.py ..................     [ 30%]
tests\domains\maison\test_entretien_logic.py ........................... [ 31%]
....                                                                     [ 31%]
tests\domains\maison\test_init.py .                                      [ 31%]
tests\domains\maison\test_jardin_logic.py .............................  [ 31%]
tests\domains\maison\test_jardin_logic_coverage.py ..................    [ 31%]
tests\domains\maison\test_projets_logic.py ............................. [ 31%]
.                                                                        [ 31%]
tests\domains\maison\test_projets_logic_coverage.py ...................  [ 32%]
tests\domains\maison\ui\test_courses.py ..                               [ 32%]
tests\domains\maison\ui\test_depenses.py .........                       [ 32%]
tests\domains\maison\ui\test_depenses_comprehensive.py ................. [ 32%]
............                                                             [ 32%]
tests\domains\maison\ui\test_eco_tips.py ...........                     [ 32%]
tests\domains\maison\ui\test_energie.py ..                               [ 32%]
tests\domains\maison\ui\test_entretien.py ..                             [ 32%]
tests\domains\maison\ui\test_hub_maison.py ..                            [ 32%]
tests\domains\maison\ui\test_imports_maison_ui.py .........              [ 32%]
tests\domains\maison\ui\test_jardin.py .....s                            [ 32%]
tests\domains\maison\ui\test_jardin_zones.py ..........                  [ 32%]
tests\domains\maison\ui\test_meubles.py ..                               [ 32%]
tests\domains\maison\ui\test_paris.py ..                                 [ 32%]
tests\domains\maison\ui\test_projets.py ..                               [ 32%]
tests\domains\maison\ui\test_scan_factures.py ..                         [ 32%]
tests\domains\planning\logic\test_calendrier_unifie_logic.py .           [ 32%]
tests\domains\planning\test_calendrier_unifie_logic.py ................. [ 33%]
....................                                                     [ 33%]
tests\domains\planning\test_calendrier_unifie_logic_coverage.py ........ [ 33%]
........................................................................ [ 34%]
..................................                                       [ 34%]
tests\domains\planning\test_phase2_events.py ........................... [ 34%]
......                                                                   [ 34%]
tests\domains\planning\test_vue_ensemble.py ..                           [ 34%]
tests\domains\planning\test_vue_ensemble_logic.py ...................... [ 34%]
..                                                                       [ 34%]
tests\domains\planning\test_vue_ensemble_logic_coverage.py ............. [ 35%]
....................                                                     [ 35%]
tests\domains\planning\test_vue_semaine_logic.py ......................  [ 35%]
tests\domains\planning\test_vue_semaine_logic_coverage.py .............. [ 35%]
........                                                                 [ 35%]
tests\domains\planning\ui\components\test_components_init.py .......     [ 35%]
tests\domains\planning\ui\components\test_components_init_extended.py .. [ 35%]
................................                                         [ 36%]
tests\domains\planning\ui\components\test_init.py ..                     [ 36%]
tests\domains\planning\ui\test_calendrier_unifie.py ..                   [ 36%]
tests\domains\planning\ui\test_imports_planning_ui.py ...                [ 36%]
tests\domains\planning\ui\test_vue_semaine.py ..                         [ 36%]
tests\domains\test_85_coverage.py .....................                  [ 36%]
tests\domains\test_core_workflows.py .......sss.......                   [ 36%]
tests\domains\test_domains_coverage_80.py .............................. [ 36%]
.......s..........                                                       [ 36%]
tests\domains\test_domains_logic_coverage.py ........................... [ 37%]
.................                                                        [ 37%]
tests\domains\test_extended_domains.py ................................. [ 37%]
.....                                                                    [ 37%]
tests\domains\test_init.py .                                             [ 37%]
tests\domains\test_modules_accueil.py ..........                         [ 37%]
tests\domains\test_modules_barcode.py ........                           [ 37%]
tests\domains\test_modules_cuisine.py ................                   [ 38%]
tests\domains\test_modules_famille.py ............                       [ 38%]
tests\domains\test_modules_logic.py .........                            [ 38%]
tests\domains\test_modules_planning.py ............                      [ 38%]
tests\domains\test_simple_extended.py .........                          [ 38%]
tests\domains\ui\test_ui_helpers.py ........................             [ 38%]
tests\domains\utils\test_accueil_logic.py ...........................    [ 38%]
tests\domains\utils\test_barcode_logic.py ........................       [ 39%]
tests\domains\utils\test_barcode_logic_coverage.py ..................... [ 39%]
..............................                                           [ 39%]
tests\domains\utils\test_parametres.py ..                                [ 39%]
tests\domains\utils\test_parametres_logic.py ........................... [ 39%]
................                                                         [ 40%]
tests\domains\utils\test_parametres_logic_coverage.py .................. [ 40%]
.......................................                                  [ 40%]
tests\domains\utils\test_rapports.py ..                                  [ 40%]
tests\domains\utils\test_rapports_logic.py ............................. [ 40%]
.....                                                                    [ 40%]
tests\domains\utils\test_rapports_logic_coverage.py .................... [ 41%]
.................................                                        [ 41%]
tests\domains\utils\ui\test_accueil.py ..                                [ 41%]
tests\domains\utils\ui\test_barcode.py ..                                [ 41%]
tests\domains\utils\ui\test_imports_utils_ui.py .....                    [ 41%]
tests\domains\utils\ui\test_notifications_push.py ..                     [ 41%]
tests\e2e\test_complete_flows.py ...........                             [ 41%]
tests\e2e\test_critical_paths.py .............                           [ 41%]
tests\e2e\test_domains_e2e.py ..........                                 [ 41%]
tests\e2e\test_integration_workflows.py ................................ [ 42%]
.......                                                                  [ 42%]
tests\e2e\test_main_flows.py ..........                                  [ 42%]
tests\edge_cases\test_edge_cases_models.py ..................            [ 42%]
tests\models\test_models_basic.py ......................                 [ 42%]
tests\property_tests\test_models_hypothesis.py s                         [ 42%]
tests\services\test_85_coverage.py ..............                        [ 42%]
tests\services\test_action_history_coverage.py ......................... [ 43%]
............................                                             [ 43%]
tests\services\test_action_history_service.py .....                      [ 43%]
tests\services\test_auth_comprehensive.py .............................. [ 43%]
....................                                                     [ 43%]
tests\services\test_auth_coverage.py ................................... [ 44%]
...............                                                          [ 44%]
tests\services\test_auth_service.py .                                    [ 44%]
tests\services\test_backup_coverage.py .......................           [ 44%]
tests\services\test_backup_integration.py .............................. [ 44%]
...........................................................              [ 45%]
tests\services\test_backup_service.py ...........                        [ 45%]
tests\services\test_backup_utils.py .................................... [ 45%]
..................                                                       [ 46%]
tests\services\test_barcode_coverage.py ...............s..........s..s.. [ 46%]
s.......s.s.s..                                                          [ 46%]
tests\services\test_barcode_coverage_deep.py ........................... [ 46%]
......................                                                   [ 46%]
tests\services\test_barcode_service.py .                                 [ 46%]
tests\services\test_base_ai_service.py ..........                        [ 47%]
tests\services\test_base_ai_service_coverage.py ........................ [ 47%]
.............                                                            [ 47%]
tests\services\test_base_service.py ...........                          [ 47%]
tests\services\test_base_service_coverage.py ........................... [ 47%]
..................s........ss....s.s.                                    [ 48%]
tests\services\test_batch_cooking_coverage.py .......................... [ 48%]
.                                                                        [ 48%]
tests\services\test_batch_cooking_full_coverage.py ..................... [ 48%]
.....................................sssssssssssssssssssss               [ 49%]
tests\services\test_batch_cooking_integration.py ....................... [ 49%]
.............................                                            [ 49%]
tests\services\test_batch_cooking_service.py .                           [ 49%]
tests\services\test_batch_cooking_utils.py ............................. [ 49%]
.........................................................                [ 50%]
tests\services\test_budget_comprehensive.py ............................ [ 50%]
.....................                                                    [ 50%]
tests\services\test_budget_coverage.py ................................. [ 51%]
..............                                                           [ 51%]
tests\services\test_budget_coverage_deep.py ............................ [ 51%]
....                                                                     [ 51%]
tests\services\test_budget_extra.py ...................                  [ 51%]
tests\services\test_budget_integration.py .............................. [ 52%]
.                                                                        [ 52%]
tests\services\test_budget_methods.py ........................           [ 52%]
tests\services\test_budget_service.py .                                  [ 52%]
tests\services\test_budget_utils.py .................................... [ 52%]
....................................                                     [ 53%]
tests\services\test_calendar_sync_comprehensive.py ..................... [ 53%]
..........................                                               [ 53%]
tests\services\test_calendar_sync_coverage.py .......................... [ 53%]
...................                                                      [ 53%]
tests\services\test_calendar_sync_service.py .                           [ 53%]
tests\services\test_courses_intelligentes_coverage.py .................. [ 54%]
..........................                                               [ 54%]
tests\services\test_courses_intelligentes_service.py .                   [ 54%]
tests\services\test_courses_service.py .....s.....ss..........s......... [ 54%]
...................                                                      [ 54%]
tests\services\test_existing_services.py ............................... [ 55%]
......                                                                   [ 55%]
tests\services\test_extended_services.py ...........                     [ 55%]
tests\services\test_facture_ocr_coverage.py ............................ [ 55%]
.................                                                        [ 55%]
tests\services\test_factures_ocr.py ...............                      [ 55%]
tests\services\test_garmin_sync.py .                                     [ 55%]
tests\services\test_garmin_sync_coverage.py ............................ [ 56%]
..................                                                       [ 56%]
tests\services\test_garmin_sync_utils.py ............................... [ 56%]
..................................................                       [ 57%]
tests\services\test_garmin_sync_utils_integration.py ................... [ 57%]
............................................................             [ 57%]
tests\services\test_imports_services.py .............................    [ 58%]
tests\services\test_inventaire_coverage_deep.py ........................ [ 58%]
.......                                                                  [ 58%]
tests\services\test_inventaire_integration.py .......................... [ 58%]
........                                                                 [ 58%]
tests\services\test_inventaire_methods.py .............................. [ 58%]
..                                                                       [ 58%]
tests\services\test_inventaire_service.py ..................             [ 59%]
tests\services\test_inventaire_sqlite_int.py ........................... [ 59%]
................                                                         [ 59%]
tests\services\test_io_service.py .                                      [ 59%]
tests\services\test_io_service_coverage.py ............................. [ 59%]
........................                                                 [ 60%]
tests\services\test_notifications_coverage.py .......................... [ 60%]
..........................                                               [ 60%]
tests\services\test_notifications_push_coverage.py ...................ss [ 60%]
ss.........................                                              [ 61%]
tests\services\test_notifications_push_service.py ..                     [ 61%]
tests\services\test_notifications_service.py ..                          [ 61%]
tests\services\test_openfoodfacts.py .........                           [ 61%]
tests\services\test_openfoodfacts_coverage.py .......................... [ 61%]
............                                                             [ 61%]
tests\services\test_pdf_export_coverage.py ...............ss...ss......s [ 61%]
s.............                                                           [ 61%]
tests\services\test_pdf_export_coverage_deep.py ........................ [ 62%]
....                                                                     [ 62%]
tests\services\test_pdf_export_db_methods.py ......................      [ 62%]
tests\services\test_pdf_export_service.py ...                            [ 62%]
tests\services\test_planning_coverage.py ............ssss............... [ 62%]
.                                                                        [ 62%]
tests\services\test_planning_extended.py sssssssssssssssssssssssssss     [ 62%]
tests\services\test_planning_service.py ...........                      [ 63%]
tests\services\test_planning_unified_coverage.py ....................... [ 63%]
....................s..sss..ss.....                                      [ 63%]
tests\services\test_planning_unified_service.py ..                       [ 63%]
tests\services\test_planning_utils.py .................................. [ 63%]
.......................                                                  [ 64%]
tests\services\test_predictions_coverage.py ............................ [ 64%]
........                                                                 [ 64%]
tests\services\test_predictions_service.py ..........                    [ 64%]
tests\services\test_push_notifications.py .............................. [ 64%]
.......................................................                  [ 65%]
tests\services\test_push_notifications_deep.py ......................... [ 65%]
......                                                                   [ 65%]
tests\services\test_push_notifications_utils.py ........................ [ 65%]
..............................                                           [ 66%]
tests\services\test_push_send_methods.py .....................           [ 66%]
tests\services\test_pwa.py ...............................               [ 66%]
tests\services\test_rapports_pdf_generation.py ......................... [ 66%]
..........                                                               [ 67%]
tests\services\test_rapports_pdf_service.py ............................ [ 67%]
.............................                                            [ 67%]
tests\services\test_realtime_sync_coverage.py .......................... [ 67%]
...........................................                              [ 68%]
tests\services\test_recettes_cov_boost.py ...................            [ 68%]
tests\services\test_recettes_coverage.py .............................   [ 68%]
tests\services\test_recettes_coverage_deep.py .........................  [ 68%]
tests\services\test_recettes_import.py ..                                [ 68%]
tests\services\test_recettes_integration.py ...................          [ 69%]
tests\services\test_recettes_service.py .....................            [ 69%]
tests\services\test_recettes_utils.py .................................. [ 69%]
..........................                                               [ 69%]
tests\services\test_recipe_import_extra.py ............................. [ 70%]
........................                                                 [ 70%]
tests\services\test_recipe_import_integration.py .........F............. [ 70%]
............................                                             [ 70%]
tests\services\test_recipe_import_service.py ........................... [ 71%]
..............                                                           [ 71%]
tests\services\test_services_basic.py ............                       [ 71%]
tests\services\test_services_comprehensive.py .......................... [ 71%]
................................                                         [ 71%]
tests\services\test_services_coverage_80.py ............................ [ 72%]
........................................................                 [ 72%]
tests\services\test_services_coverage_80_part11.py ..................... [ 72%]
.                                                                        [ 72%]
tests\services\test_services_coverage_80_part12.py ..................... [ 73%]
....................................                                     [ 73%]
tests\services\test_services_coverage_80_part13.py ..................... [ 73%]
...................                                                      [ 73%]
tests\services\test_services_coverage_80_part14.py ..................... [ 74%]
................                                                         [ 74%]
tests\services\test_services_coverage_80_part15.py ..................... [ 74%]
                                                                         [ 74%]
tests\services\test_services_coverage_80_part16.py ..................... [ 74%]
.....                                                                    [ 74%]
tests\services\test_services_coverage_80_part17.py ..................... [ 74%]
....                                                                     [ 74%]
tests\services\test_services_coverage_80_part2.py ...................... [ 75%]
............................s........F.....                              [ 75%]
tests\services\test_services_coverage_80_part3.py ...................... [ 75%]
...........................                                              [ 75%]
tests\services\test_services_coverage_80_part4.py ...................... [ 76%]
...................................................                      [ 76%]
tests\services\test_services_coverage_80_part5.py ...................... [ 76%]
..........................                                               [ 77%]
tests\services\test_services_coverage_80_part6.py ...................... [ 77%]
...........................................................              [ 77%]
tests\services\test_services_coverage_80_part7.py ...................... [ 78%]
................................                                         [ 78%]
tests\services\test_services_coverage_80_part8.py ...................... [ 78%]
.................................................                        [ 79%]
tests\services\test_services_coverage_80_push.py ....................... [ 79%]
.........................................................                [ 79%]
tests\services\test_services_coverage_boost.py ......................... [ 80%]
...........                                                              [ 80%]
tests\services\test_services_deep.py ................................... [ 80%]
......                                                                   [ 80%]
tests\services\test_services_extended.py ssssssssssssssss                [ 80%]
tests\services\test_services_integration.py ...........s.ss.s.           [ 80%]
tests\services\test_simple_coverage.py ................................  [ 81%]
tests\services\test_suggestions_ia_coverage.py ......................... [ 81%]
.....                                                                    [ 81%]
tests\services\test_suggestions_ia_service.py .                          [ 81%]
tests\services\test_suggestions_ia_utils.py ............................ [ 81%]
...........................................                              [ 82%]
tests\services\test_suggestions_ia_utils_full.py ....................... [ 82%]
........................................................................ [ 83%]
..                                                                       [ 83%]
tests\services\test_tier1_critical.py ....s.s........................... [ 83%]
.....                                                                    [ 83%]
tests\services\test_types_coverage.py .................................. [ 83%]
..............                                                           [ 83%]
tests\services\test_types_service.py .                                   [ 83%]
tests\services\test_user_preferences_coverage.py ....................... [ 84%]
..............                                                           [ 84%]
tests\services\test_user_preferences_service.py ...                      [ 84%]
tests\services\test_weather_coverage.py ................................ [ 84%]
.............................................                            [ 85%]
tests\services\test_weather_service.py ................................. [ 85%]
................                                                         [ 85%]
tests\services\test_weather_utils.py ................................... [ 85%]
.........................................................                [ 86%]
tests\services\test_weather_utils_full.py .............................. [ 86%]
........................................................................ [ 87%]
................                                                         [ 87%]
tests\ui\test_atoms_component.py .                                       [ 87%]
tests\ui\test_base_form_core.py .                                        [ 87%]
tests\ui\test_base_io_core.py .                                          [ 87%]
tests\ui\test_base_module_core.py .                                      [ 87%]
tests\ui\test_camera_scanner_component.py .                              [ 87%]
tests\ui\test_coverage_80_extended.py .................................. [ 87%]
..............                                                           [ 87%]
tests\ui\test_coverage_80_final.py ..................................... [ 88%]
.....                                                                    [ 88%]
tests\ui\test_coverage_80_widgets.py ................................... [ 88%]
....                                                                     [ 88%]
tests\ui\test_dashboard_widgets_component.py .                           [ 88%]
tests\ui\test_data_component.py .                                        [ 88%]
tests\ui\test_domain_ui.py .                                             [ 88%]
tests\ui\test_dynamic_component.py .                                     [ 88%]
tests\ui\test_feedback.py ......................                         [ 88%]
tests\ui\test_footer_layout.py .                                         [ 88%]
tests\ui\test_forms_component.py .                                       [ 88%]
tests\ui\test_google_calendar_sync_component.py .                        [ 89%]
tests\ui\test_header_layout.py .                                         [ 89%]
tests\ui\test_imports_ui.py .....................                        [ 89%]
tests\ui\test_layout_coverage.py ......................                  [ 89%]
tests\ui\test_layouts_component.py .                                     [ 89%]
tests\ui\test_progress_deep.py ............................              [ 89%]
tests\ui\test_progress_feedback.py .                                     [ 89%]
tests\ui\test_sidebar_layout.py .                                        [ 89%]
tests\ui\test_spinners_feedback.py .                                     [ 89%]
tests\ui\test_tablet_mode.py .                                           [ 89%]
tests\ui\test_tablet_mode_deep.py .....................................  [ 90%]
tests\ui\test_toasts_feedback.py .                                       [ 90%]
tests\ui\test_ui_80_coverage.py ........................................ [ 90%]
                                                                         [ 90%]
tests\ui\test_ui_comprehensive_coverage.py ............................. [ 90%]
...........                                                              [ 90%]
tests\ui\test_ui_coverage_80_final.py .........................          [ 91%]
tests\ui\test_ui_deep.py ............................................... [ 91%]
....                                                                     [ 91%]
tests\ui\test_ui_final_80.py ...........................                 [ 91%]
tests\ui\test_ui_final_80_part2.py ...................................   [ 92%]
tests\ui\test_ui_final_push.py .............                             [ 92%]
tests\utils\test_85_coverage.py .............                            [ 92%]
tests\utils\test_extended_utils.py ...............                       [ 92%]
tests\utils\test_formatters_dates.py ......................              [ 92%]
tests\utils\test_formatters_deep.py .................................... [ 93%]
........................................................................ [ 93%]
....................                                                     [ 93%]
tests\utils\test_helpers_all_deep.py .........................           [ 94%]
tests\utils\test_helpers_data.py ........................                [ 94%]
tests\utils\test_helpers_dates.py ....................                   [ 94%]
tests\utils\test_helpers_deep.py ....................................... [ 94%]
........................................                                 [ 95%]
tests\utils\test_helpers_extra_deep.py ................................. [ 95%]
..................................................                       [ 96%]
tests\utils\test_helpers_strings.py .......................              [ 96%]
tests\utils\test_image_generator_deep_v2.py .......................      [ 96%]
tests\utils\test_image_recipe_deep.py ..................F............... [ 96%]
..................                                                       [ 97%]
tests\utils\test_media_deep.py ...........................               [ 97%]
tests\utils\test_simple_extended.py .............                        [ 97%]
tests\utils\test_utilities_comprehensive.py ...........................  [ 97%]
tests\utils\test_utilities_fixed.py .................................... [ 98%]
......................................                                   [ 98%]
tests\utils\test_utils_basic.py .................                        [ 98%]
tests\utils\test_validators_common.py .............................      [ 98%]
tests\utils\test_validators_dates.py ......................              [ 99%]
tests\utils\test_validators_deep.py .................................... [ 99%]
................................................                         [ 99%]
tests\utils\test_validators_food.py ...............                      [100%]

============================== warnings summary ===============================
tests/api/test_api_deep.py::TestRateLimiter::test_limiter_check_limit_exceeded
  D:\Projet_streamlit\assistant_matanne\tests\api\test_api_deep.py:589: RuntimeWarning: coroutine 'disable_rate_limiting.<locals>.mock_check_rate_limit' was never awaited
    limiter.check_rate_limit(request)
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/core/test_models_recettes.py::TestIngredient::test_ingredient_unique_name
  D:\Projet_streamlit\assistant_matanne\tests\conftest.py:138: SAWarning: transaction already deassociated from connection
    transaction.rollback()

tests/services/test_backup_integration.py::TestHistoriqueWithDB::test_enregistrer_backup_historique
tests/services/test_backup_integration.py::TestHistoriqueFullWorkflow::test_enregistrer_et_lister
tests/services/test_backup_integration.py::TestHistoriqueFullWorkflow::test_enregistrer_et_supprimer
  D:\Projet_streamlit\assistant_matanne\tests\conftest.py:138: SAWarning:
  
  transaction already deassociated from connection

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=============================== tests coverage ================================
_______________ coverage: platform win32, python 3.11.8-final-0 _______________

Name                                                        Stmts   Miss Branch BrPart   Cover   Missing
--------------------------------------------------------------------------------------------------------
src\api\__init__.py                                             2      0      0      0 100.00%
src\api\main.py                                               420     84     62     16  78.42%   277, 288, 298-300, 334-335, 375, 378, 401-403, 417, 421-425, 471, 474->473, 482-486, 500, 507-511, 522, 524, 526, 551, 554-555, 570, 589-591, 608-614, 640-642, 648-667, 688->691, 705-707, 728-730, 748, 758-761, 764, 808->810, 822-824, 841-843, 860-867, 881-885, 920-922
src\api\rate_limiting.py                                      192     11     56      5  92.74%   286-287, 356-359, 425, 429, 435->445, 446-449
src\app.py                                                     45      4     12      3  84.21%   28-30, 33->37, 90
src\core\__init__.py                                           47      0      0      0 100.00%
src\core\ai\__init__.py                                        12      0      0      0 100.00%
src\core\ai\cache.py                                           67     21      6      0  65.75%   194-195, 211-239
src\core\ai\client.py                                         152     57     44      7  60.20%   55, 156-157, 167-174, 185, 191, 223, 257-313, 333-335, 374-424
src\core\ai\parser.py                                         174     27     52     10  81.86%   84-89, 135->137, 140->142, 187, 190-193, 198-202, 242->254, 244->254, 262->272, 265-266, 280, 282-294
src\core\ai\rate_limit.py                                      58      5     14      1  91.67%   104, 148-151
src\core\ai_agent.py                                           37      0      4      0 100.00%
src\core\cache.py                                             208     34     64      7  83.46%   101->108, 140->137, 165-167, 198->197, 231->exit, 280->282, 282->exit, 295-296, 409-410, 471-499, 510-529
src\core\cache_multi.py                                       337    147     92      4  51.28%   122->124, 164->166, 207-208, 216-217, 221-225, 229-243, 247-255, 259-262, 266-279, 283, 330-331, 335-337, 362-363, 367-372, 376-394, 401-402, 411-422, 428-429, 493-519, 539-556, 573-584, 593-600, 634-642, 670-704
src\core\config.py                                            193     40     50      9  75.72%   25->22, 33, 36-38, 74, 93->121, 94-115, 122->134, 127-131, 195-196, 271-272, 276-280, 336-338, 343-344, 486-488
src\core\constants.py                                         214      6      0      0  97.20%   395-402, 415-421, 434, 448
src\core\database.py                                          200      5     18      2  96.79%   389, 424->427, 468, 510-512
src\core\decorators.py                                        102      0     30      1  99.24%   132->131
src\core\errors.py                                            131     10     60      5  92.15%   50-55, 119, 127, 135, 143, 345
src\core\errors_base.py                                        40      0      8      0 100.00%
src\core\lazy_loader.py                                       116      5     24      0  96.43%   77-79, 98-100
src\core\logging.py                                            95      0     24      2  98.32%   103->110, 151->153
src\core\models\__init__.py                                    15      0      0      0 100.00%
src\core\models\base.py                                        28      1      0      0  96.43%   88
src\core\models\batch_cooking.py                              141     11      4      1  90.34%   215, 220-223, 313, 318, 408, 413, 418, 424
src\core\models\courses.py                                     61      1      2      1  96.83%   29
src\core\models\famille.py                                     82      0      0      0 100.00%
src\core\models\inventaire.py                                  49      3      2      1  92.16%   28, 88, 93
src\core\models\jeux.py                                       177     13      4      0  90.61%   97, 102, 219, 224, 265, 269, 325-327, 332-335
src\core\models\maison.py                                      72      0      0      0 100.00%
src\core\models\maison_extended.py                            169      0      0      0 100.00%
src\core\models\nouveaux.py                                   171      0      0      0 100.00%
src\core\models\planning.py                                    43      1      2      1  95.56%   28
src\core\models\recettes.py                                   156     23     24      4  77.22%   34-35, 217, 219, 221, 227-242, 390-391
src\core\models\sante.py                                       54      0      0      0 100.00%
src\core\models\user_preferences.py                            80      2      2      1  96.34%   31, 36
src\core\models\users.py                                      188      8      2      0  94.74%   143, 251-256, 261
src\core\multi_tenant.py                                      162      8     42      5  92.65%   183, 232, 251->250, 278->277, 301-302, 335-336, 353-354
src\core\notifications.py                                     257     51     84      5  77.13%   287-288, 309->308, 323->322, 337->336, 342, 372-373, 472-497, 504-561, 577-582
src\core\offline.py                                           269    108     62      4  53.47%   131->135, 201-202, 280->286, 281->280, 324-343, 359-403, 427-451, 462-479, 493-540
src\core\performance.py                                       299    105     54      3  60.91%   224->exit, 303->309, 306-307, 338->345, 414-421, 442-457, 486-515, 526-586, 592-595, 636-646, 651, 668-682, 698-720
src\core\performance_optimizations.py                         249     45     74      6  78.02%   45-55, 59-61, 73->79, 107-108, 122-123, 145-146, 235-241, 247-256, 260->262, 266-268, 272-274, 278->280, 284->286, 302-304, 544->539, 547-549, 567-571
src\core\redis_cache.py                                       262     96     68     12  62.42%   27-28, 102->101, 172-201, 233-234, 242-245, 261-270, 300-314, 325-329, 344-356, 370-385, 390-400, 417-427, 444-449, 488
src\core\sql_optimizer.py                                     245     94     80      4  58.15%   84-99, 236->235, 245->244, 260->263, 308, 343-363, 399-406, 418-420, 432-433, 446-447, 460-462, 471-496, 500, 504, 508, 519-564
src\core\state.py                                             189     20     34     10  86.55%   61->exit, 111->exit, 127, 177->180, 236->exit, 245->exit, 259->exit, 312-313, 316-317, 320, 354, 359-360, 365, 370-371, 376, 381, 386, 391-392, 397, 402, 407
src\core\validation.py                                        255     32    106     13  85.87%   38-51, 178, 254->230, 259, 366, 371-374, 534->536, 537-538, 569, 571, 576, 621, 633-638, 675->681, 676->675, 685->688, 690, 693->698
src\core\validators_pydantic.py                               176      3     30      1  97.09%   136->138, 211-213
src\domains\__init__.py                                        21     19     12      0   6.06%   19-37
src\domains\cuisine\__init__.py                                 9      7      4      0  15.38%   31-37
src\domains\cuisine\logic\__init__.py                           5      0      0      0 100.00%
src\domains\cuisine\logic\batch_cooking_logic.py              184      0     84      1  99.63%   260->267
src\domains\cuisine\logic\courses_logic.py                    158      1     62      2  98.64%   315, 494->486
src\domains\cuisine\logic\inventaire_logic.py                 238     12    110      2  94.25%   246, 405-425, 558->563
src\domains\cuisine\logic\planificateur_repas_logic.py        203      0     90      6  97.95%   214->213, 219->218, 225->224, 229->224, 251->256, 369->358
src\domains\cuisine\logic\planning_logic.py                   105     17     44      6  81.88%   40, 85, 108->106, 193->191, 252, 286, 302-305, 318-334, 347-362
src\domains\cuisine\logic\recettes_logic.py                   113      0     42      0 100.00%
src\domains\cuisine\logic\schemas.py                           33      0      0      0 100.00%
src\domains\cuisine\ui\__init__.py                             18     16     10      0   7.14%   24-39
src\domains\cuisine\ui\batch_cooking_detaille.py              327    305    146      0   4.65%   76-98, 104-128, 134-168, 174-206, 212-253, 259-288, 294-300, 306-333, 339-352, 363-482, 493-723
src\domains\cuisine\ui\courses\__init__.py                     39     28      6      0  24.44%   39-85
src\domains\cuisine\ui\courses\_common.py                      14      0      0      0 100.00%
src\domains\cuisine\ui\courses\historique.py                   38     35      4      0   7.14%   14-83
src\domains\cuisine\ui\courses\liste_active.py                198    192     64      0   2.29%   14-120, 125-220, 225-288, 293-315
src\domains\cuisine\ui\courses\modeles.py                      79     76     24      0   2.91%   10-148
src\domains\cuisine\ui\courses\outils.py                       93     90     10      0   2.91%   13-208
src\domains\cuisine\ui\courses\planning.py                     87     84     36      0   2.44%   10-151
src\domains\cuisine\ui\courses\realtime.py                     47     42     20      0   7.46%   10-29, 34-64, 69-89
src\domains\cuisine\ui\courses\suggestions_ia.py               89     85     28      0   3.42%   16-173
src\domains\cuisine\ui\inventaire\__init__.py                  40     28      6      0  26.09%   30-82
src\domains\cuisine\ui\inventaire\_common.py                   11     11      0      0   0.00%   6-37
src\domains\cuisine\ui\inventaire\alertes.py                   30     25     10      0  12.50%   14-50
src\domains\cuisine\ui\inventaire\categories.py                38     33     10      0  10.42%   14-59
src\domains\cuisine\ui\inventaire\helpers.py                   18      0      6      0 100.00%
src\domains\cuisine\ui\inventaire\historique.py                52     47     14      0   7.58%   14-104
src\domains\cuisine\ui\inventaire\notifications.py            167    161     62      0   2.62%   14-70, 75-221
src\domains\cuisine\ui\inventaire\photos.py                    63     59     14      0   5.19%   13-113
src\domains\cuisine\ui\inventaire\predictions.py              176    170     54      0   2.61%   15-291
src\domains\cuisine\ui\inventaire\stock.py                    115    106     30      0   6.21%   18-79, 84-196
src\domains\cuisine\ui\inventaire\suggestions.py               50     44     24      0   8.11%   16-75
src\domains\cuisine\ui\inventaire\tools.py                    118    112     32      0   4.00%   14-67, 72-202
src\domains\cuisine\ui\planificateur_repas\__init__.py         97     90     38      0   5.19%   33-212
src\domains\cuisine\ui\planificateur_repas\_common.py          14      0      0      0 100.00%
src\domains\cuisine\ui\planificateur_repas\components.py      146    139     52      0   3.54%   19-107, 113-140, 151-198, 209-240, 247-285
src\domains\cuisine\ui\planificateur_repas\generation.py       20     17      6      0  11.54%   15-42
src\domains\cuisine\ui\planificateur_repas\pdf.py              53     51     14      0   2.99%   28-153
src\domains\cuisine\ui\planificateur_repas\preferences.py      58     53     12      0   7.14%   20-48, 61-75, 85-97, 110-153
src\domains\cuisine\ui\recettes\__init__.py                    46     36     12      0  17.24%   29-76
src\domains\cuisine\ui\recettes\ajout.py                      102     94     30      0   6.06%   17-188
src\domains\cuisine\ui\recettes\detail.py                     274    266    144      0   1.91%   16-429
src\domains\cuisine\ui\recettes\generation_ia.py              130    120     40      0   5.88%   17-36, 41-70, 75-142, 147-236
src\domains\cuisine\ui\recettes\generation_image.py            48     44     14      0   6.45%   12-87
src\domains\cuisine\ui\recettes\helpers.py                     12      1      6      1  88.89%   20
src\domains\cuisine\ui\recettes\liste.py                      186    178     78      0   3.03%   16-315
src\domains\cuisine\ui\recettes_import.py                     222    208     74      0   4.73%   22-37, 42-73, 78-106, 111-146, 152-326, 353-442
src\domains\famille\__init__.py                                 8      7      4      0   8.33%   21-28
src\domains\famille\logic\__init__.py                           2      0      0      0 100.00%
src\domains\famille\logic\activites_logic.py                  110      0     52      1  99.38%   236->230
src\domains\famille\logic\helpers.py                          170     83     26      2  48.47%   26-46, 73-75, 93->95, 144-166, 179-206, 214-236, 252-260, 283, 288-296, 310-328, 333-352, 373-376
src\domains\famille\logic\routines_logic.py                   159      8     82      7  93.78%   106->108, 175-176, 178->171, 252, 255-256, 265, 268-269
src\domains\famille\ui\__init__.py                              3      0      0      0 100.00%
src\domains\famille\ui\achats_famille\__init__.py              21      0      0      0 100.00%
src\domains\famille\ui\achats_famille\_common.py                8      0      0      0 100.00%
src\domains\famille\ui\achats_famille\components.py           161     17     62     11  84.75%   42-59, 98->100, 100->102, 102->105, 105->108, 112->115, 169, 200-201, 232->235, 240->224, 260->262, 277-278, 281->exit
src\domains\famille\ui\achats_famille\helpers.py               52      0      6      1  98.28%   78->80
src\domains\famille\ui\activites.py                           140     35     32      6  72.67%   101-118, 122-123, 138-139, 164, 178, 200-201, 220, 232-273
src\domains\famille\ui\hub_famille.py                         204     59     60     15  63.64%   149-162, 185, 228-229, 239-240, 245, 256-258, 261->263, 266, 277-278, 282-285, 299-300, 307-332, 380, 383, 385, 418-420
src\domains\famille\ui\jules\__init__.py                       18      0      0      0 100.00%
src\domains\famille\ui\jules\_common.py                        11      0      0      0 100.00%
src\domains\famille\ui\jules\ai_service.py                     15      0      0      0 100.00%
src\domains\famille\ui\jules\components.py                    163     39     42     11  73.66%   38-42, 58, 62, 64, 76, 80-95, 119-126, 155->157, 157->160, 161->164, 166-170, 220-221, 253
src\domains\famille\ui\jules\helpers.py                        32      0     10      0 100.00%
src\domains\famille\ui\jules_planning.py                      163    141     46      0  10.53%   119-128, 133-150, 155-163, 172-173, 178-179, 184-185, 194-215, 220-236, 241-255, 265-293, 298-312, 317-361, 374-394
src\domains\famille\ui\routines.py                            271    197     90      5  22.99%   36-43, 64-72, 93->96, 131-138, 150-181, 209-221, 245, 249-251, 256-357, 369-466, 488-539, 550-608
src\domains\famille\ui\suivi_perso\__init__.py                 26      0      0      0 100.00%
src\domains\famille\ui\suivi_perso\_common.py                   8      0      0      0 100.00%
src\domains\famille\ui\suivi_perso\activities.py               23      0     10      3  90.91%   38->41, 42->44, 44->18
src\domains\famille\ui\suivi_perso\alimentation.py             50     12     14      3  73.44%   42->44, 44->28, 75-100
src\domains\famille\ui\suivi_perso\dashboard.py                62      4     14      4  89.47%   18-19, 24-25, 46->51, 47->46
src\domains\famille\ui\suivi_perso\helpers.py                  47      3     10      2  91.23%   32, 88->96, 111-112
src\domains\famille\ui\suivi_perso\settings.py                 75     23     20      6  69.47%   23->26, 30-37, 41-47, 52->exit, 71->exit, 73-82, 144-145
src\domains\famille\ui\weekend\__init__.py                     20      0      0      0 100.00%
src\domains\famille\ui\weekend\_common.py                      10      0      0      0 100.00%
src\domains\famille\ui\weekend\ai_service.py                   10      0      0      0 100.00%
src\domains\famille\ui\weekend\components.py                  166     24     44     12  80.95%   49-51, 63->65, 65->68, 70-72, 74-77, 115-116, 135, 144->146, 146->149, 151->154, 155->157, 208, 231-232, 269-278
src\domains\famille\ui\weekend\helpers.py                      54      1     10      1  96.88%   22
src\domains\jeux\__init__.py                                    3      0      0      0 100.00%
src\domains\jeux\integration.py                                15     15      2      0   0.00%   7-32
src\domains\jeux\logic\__init__.py                              2      0      0      0 100.00%
src\domains\jeux\logic\api_football.py                        157     15     52      5  90.43%   67-69, 105-106, 147, 220, 234-236, 260, 270->285, 366, 394-396
src\domains\jeux\logic\api_service.py                          83     47     14      0  39.18%   102-179, 186-217
src\domains\jeux\logic\loto_logic.py                          204    141     82      1  28.67%   91->89, 198-236, 268-271, 288-302, 324-345, 369-394, 418-461, 495-532, 557-585, 610-637
src\domains\jeux\logic\paris_logic.py                         501     56    234     44  84.22%   147->158, 260, 269, 277, 344-347, 356->360, 362->366, 369, 374, 446, 452->454, 454->456, 456->459, 515-518, 593->601, 646, 648, 704, 714->698, 765, 831, 836->844, 856, 880, 893-894, 896-897, 927-928, 930-931, 935-940, 981->1014, 994-1005, 1014->1040, 1019, 1029, 1045-1046, 1066, 1077, 1090, 1118-1121, 1148->1130, 1177-1178, 1206, 1254, 1261-1263
src\domains\jeux\logic\scraper_loto.py                        133     16     44      6  85.31%   75->71, 106->103, 113-114, 136->129, 139->129, 182->186, 226->222, 235-236, 288-315
src\domains\jeux\logic\ui_helpers.py                          135     84     24      2  35.85%   40-41, 53-75, 98-129, 137-177, 195-221, 229-260, 271-275, 280-282
src\domains\jeux\setup.py                                      76     76     10      0   0.00%   8-139
src\domains\jeux\ui\__init__.py                                 2      0      0      0 100.00%
src\domains\jeux\ui\loto\__init__.py                           31     21      0      0  32.26%   34-88, 93
src\domains\jeux\ui\loto\_common.py                            14      0      0      0 100.00%
src\domains\jeux\ui\loto\crud.py                               41     38      6      0   6.38%   13-66, 72-98
src\domains\jeux\ui\loto\generateur.py                         82     77     34      0   4.31%   18-116, 121-168
src\domains\jeux\ui\loto\helpers.py                            17     14      0      0  17.65%   10-34, 39-65
src\domains\jeux\ui\loto\simulation.py                         81     75     18      0   6.06%   18-97, 104-173
src\domains\jeux\ui\loto\statistiques.py                       75     71     16      0   4.40%   15-52, 57-123, 133-161
src\domains\jeux\ui\loto\sync.py                               50     48     12      0   3.23%   20-101
src\domains\jeux\ui\paris\__init__.py                         106     94     26      0   9.09%   46-210, 215
src\domains\jeux\ui\paris\_common.py                           14      0      0      0 100.00%
src\domains\jeux\ui\paris\crud.py                              76     69     16      0   7.61%   14-30, 35-47, 53-69, 74-105, 118-136
src\domains\jeux\ui\paris\dashboard.py                         46     42     12      0   6.90%   11-81
src\domains\jeux\ui\paris\gestion.py                           88     83     24      0   4.46%   17-142
src\domains\jeux\ui\paris\helpers.py                           46     39      6      0  13.46%   14, 19-42, 47-80, 85-106, 111-136
src\domains\jeux\ui\paris\prediction.py                       138    132     48      0   3.23%   20-246
src\domains\jeux\ui\paris\sync.py                             119    113     34      0   3.92%   21-75, 80-84, 94-164, 174-232
src\domains\maison\__init__.py                                  9      7      4      0  15.38%   9-15
src\domains\maison\logic\__init__.py                            2      0      0      0 100.00%
src\domains\maison\logic\entretien_logic.py                   112      2     56      2  97.62%   250->233, 252-253
src\domains\maison\logic\helpers.py                           119     50     34      3  54.90%   33->36, 37->41, 96->95, 118-152, 158-161, 167-180, 186-188, 198-206, 217-241, 247-252, 268-276
src\domains\maison\logic\jardin_logic.py                       81      2     34      1  97.39%   37, 205
src\domains\maison\logic\projets_logic.py                      93      0     40      0 100.00%
src\domains\maison\ui\__init__.py                               2      0      0      0 100.00%
src\domains\maison\ui\depenses\__init__.py                     26      9      6      1  56.25%   30-38
src\domains\maison\ui\depenses\_common.py                      13      0      0      0 100.00%
src\domains\maison\ui\depenses\components.py                  158     46     36      9  66.49%   48->51, 51->55, 62-63, 66-67, 138-158, 192-193, 195->exit, 222-254, 284-290
src\domains\maison\ui\depenses\crud.py                         82     10     18      3  85.00%   41-42, 49-62, 106, 125-128
src\domains\maison\ui\eco_tips.py                             189     44     58     15  69.64%   138->143, 154, 172->171, 210->exit, 224->227, 227->231, 232->235, 235->238, 246-247, 252-253, 256-257, 322-343, 374-386, 395-416, 421-422, 436-444
src\domains\maison\ui\energie.py                              165    145     24      0  10.58%   61-95, 100-127, 146-191, 196-231, 236-258, 267-298, 306-322, 327-353, 358-393, 402-441
src\domains\maison\ui\entretien.py                            253    225     86      0   8.26%   50-52, 61-65, 73-78, 86-89, 97-100, 109, 126-141, 155-169, 175-184, 190-199, 209-539
src\domains\maison\ui\hub_maison.py                           194    172     52      0   8.94%   89-96, 101-111, 116-127, 132-143, 148-155, 160-171, 180-190, 195-214, 219-232, 237-245, 250-258, 263-269, 278-313, 318-359, 364-382, 391
src\domains\maison\ui\jardin.py                               217    175     64      0  14.95%   46-48, 57-60, 68-71, 79-82, 91, 124-126, 143-145, 162-164, 174-456
src\domains\maison\ui\jardin_zones.py                         205     37     54     16  74.13%   89-91, 100, 103->102, 109-111, 120, 131-133, 167->171, 173-182, 190-191, 236->exit, 259->263, 263->267, 279-280, 286-288, 292-293, 299-301, 340-349, 452, 461->464
src\domains\maison\ui\meubles.py                              207    183     64      0   8.86%   60-68, 73-74, 79-84, 89-96, 101-107, 112-128, 142-257, 266-309, 314-335, 344-363, 373-399, 404-405, 410-412, 421-446
src\domains\maison\ui\projets.py                              237    210     76      0   8.63%   41-43, 52-55, 63-66, 74-79, 87-90, 99, 117-132, 145-160, 166-175, 181-191, 201-497
src\domains\maison\ui\scan_factures.py                        158    140     44      0   8.91%   51-52, 57-99, 108-150, 155-208, 213-294, 299-327, 336-359
src\domains\planning\__init__.py                                3      0      0      0 100.00%
src\domains\planning\logic\__init__.py                          2      0      0      0 100.00%
src\domains\planning\logic\calendrier_unifie_logic.py         373      0    162     21  96.07%   309->312, 366->370, 395->401, 406->412, 456->460, 462->466, 513->503, 514->516, 519->503, 526->503, 528->530, 581->578, 587->586, 589->586, 596->594, 603->601, 609->608, 695->698, 700->703, 762->765, 767->770
src\domains\planning\logic\vue_ensemble_logic.py              159     10     90     12  90.36%   46, 48, 93->88, 122, 138-141, 173, 178->167, 186, 190, 215, 253->248, 289->284
src\domains\planning\logic\vue_semaine_logic.py               155      4     64      5  95.89%   91, 106, 147, 191, 304->311
src\domains\planning\ui\__init__.py                             9      5      0      0  44.44%   31-44
src\domains\planning\ui\calendrier_unifie\__init__.py          25     20      4      0  17.24%   35-90
src\domains\planning\ui\calendrier_unifie\_common.py            8      0      0      0 100.00%
src\domains\planning\ui\calendrier_unifie\components.py       195    184     84      0   3.94%   16-48, 55-122, 129-143, 150-171, 177-200, 206-218, 224-247, 253-277, 283-352, 357-370
src\domains\planning\ui\calendrier_unifie\data.py              29     27      6      0   5.71%   20-88
src\domains\planning\ui\components\__init__.py                110     97     34      0   9.03%   16-32, 37-44, 49-52, 62-89, 99-112, 117-127, 132-143, 148-163, 173-180, 185-190, 200-216
src\domains\planning\ui\vue_ensemble.py                       184    173     64      0   4.44%   31-59, 64-103, 108-127, 144-186, 197-398
src\domains\planning\ui\vue_semaine.py                        134    124     38      0   5.81%   35-69, 74-86, 91-170, 181-317
src\domains\utils\__init__.py                                   3      0      0      0 100.00%
src\domains\utils\logic\__init__.py                             2      0      0      0 100.00%
src\domains\utils\logic\accueil_logic.py                       41      2     20      2  93.44%   134, 152
src\domains\utils\logic\barcode_logic.py                       85      2     44      0  98.45%   227-228
src\domains\utils\logic\parametres_logic.py                   132      0     84      1  99.54%   263->265
src\domains\utils\logic\rapports_logic.py                     117      0     50      2  98.80%   279->292, 287->283
src\domains\utils\ui\__init__.py                                2      0      0      0 100.00%
src\domains\utils\ui\accueil.py                               235    214     60      0   7.12%   44-45, 56-112, 118-147, 158-260, 271-307, 318-343, 354-385, 391-429, 435-474, 480-526
src\domains\utils\ui\barcode.py                               221    206     50      0   5.54%   33-35, 46-76, 87-174, 192-294, 305-379, 390-459, 470-518
src\domains\utils\ui\notifications_push.py                    150    138     30      0   6.67%   49-51, 56, 65-115, 120-152, 157-223, 228-298, 303-304, 313-338
src\domains\utils\ui\parametres.py                            339    319     62      0   4.99%   41-67, 78-173, 184-280, 291-393, 404-466, 477-556, 566-611, 622-729
src\domains\utils\ui\rapports.py                              201    189     56      0   4.67%   30-32, 43-69, 80-204, 215-338, 349-471, 482-520
src\services\__init__.py                                       12      1      0      0  91.67%   173
src\services\action_history.py                                237     34     40      1  82.31%   310-346, 390-440, 524-540, 664->666
src\services\auth.py                                          381     57    112     16  80.32%   126-139, 143-144, 399, 476->478, 478->exit, 498->501, 576-578, 627, 629, 697, 714, 751-758, 761-762, 778-790, 810-811, 815->exit, 842-852, 863-874, 911-913
src\services\backup.py                                        313     54     68      8  81.10%   252-254, 382, 390-391, 396-404, 411-415, 486-487, 525-536, 563-570, 613-615, 642, 664-667, 733, 736->724, 760-779
src\services\backup_utils.py                                  131      7     60      8  92.15%   149->154, 178, 180, 206-207, 243, 265, 346, 349->353, 571->574
src\services\barcode.py                                       184     31     56      7  83.33%   189, 256, 266-288, 315-321, 362->365, 393, 402-409, 446-459
src\services\base_ai_service.py                               222     35     66      5  84.72%   220-245, 324-348, 406, 426-428, 453-465, 562, 585, 588, 643-647
src\services\base_service.py                                  168     16     74      9  85.54%   82->85, 94->93, 142-148, 156-157, 180, 190-194, 224, 230-237, 244->243, 294->287
src\services\batch_cooking.py                                 303     42     84      9  80.10%   141->154, 174->176, 244, 246, 302, 335, 342->348, 349, 436->439, 671-674, 687-708, 722-767
src\services\batch_cooking_utils.py                           123      4     46      4  95.27%   280, 315, 435, 457
src\services\budget.py                                        345     26     72      8  90.89%   269->268, 410, 650-668, 691, 700, 707, 715, 749-755, 804, 828-830
src\services\budget_utils.py                                  108      2     36      1  97.92%   44-45, 397->400
src\services\calendar_sync.py                                 481     78    120     12  81.36%   226-227, 350-366, 377->401, 385-389, 407, 724->721, 739->736, 900, 986-996, 1022->exit, 1050-1060, 1078, 1104-1134, 1158-1169, 1217-1236, 1255-1270, 1282-1288
src\services\courses.py                                       145     23     42      5  82.89%   41->70, 61->70, 67->70, 182-245, 305, 364->374
src\services\courses_intelligentes.py                         149      8     38      4  93.58%   165-175, 181-187, 216, 298->301, 336->347, 354-356
src\services\facture_ocr.py                                    95      2     18      0  98.23%   251-252
src\services\garmin_sync.py                                   229      6     38      2  97.00%   277-279, 287-289, 432->435, 518->526
src\services\garmin_sync_utils.py                             190      5     80      7  95.56%   82-83, 427->435, 451, 455, 629, 635->641, 637->641, 638->641
src\services\inventaire.py                                    281     28     86      7  86.10%   385, 391, 705, 735-773, 842->850, 858->857
src\services\io_service.py                                    110      4     42      0  97.37%   84-85, 119-120
src\services\notifications.py                                 126      0     36      0 100.00%
src\services\notifications_push.py                            142      8     28      0  95.29%   154-161, 167-174, 180-185
src\services\openfoodfacts.py                                 123      0     16      1  99.28%   155->158
src\services\pdf_export.py                                    168      0     32      2  99.00%   251->254, 339->341
src\services\planning.py                                      196     30     56      6  80.95%   117-143, 161-202, 279->295, 358-359, 419, 429, 435, 454-456
src\services\planning_unified.py                              198     30     50      7  81.05%   144-199, 225->228, 255->258, 286->289, 312->315, 340->343, 410->414, 436-437, 494-514
src\services\planning_utils.py                                148      2     70      6  96.33%   178->181, 272->270, 320, 633, 665->670, 666->665
src\services\predictions.py                                   132      1     34      1  98.80%   115
src\services\push_notifications.py                            320     50     54      1  85.29%   348->347, 392-394, 494-501, 532-533, 548-549, 792-886, 891-962
src\services\push_notifications_utils.py                      141      9     52      7  91.71%   91->97, 101, 172->179, 175-176, 281, 571-572, 619, 644, 651
src\services\pwa.py                                            49      0      0      0 100.00%
src\services\rapports_pdf.py                                  364     11    100      7  96.12%   614->619, 622->626, 844-845, 848-849, 852-853, 858, 912->915, 930->936, 1142-1145
src\services\realtime_sync.py                                 249      4     50      6  96.66%   118, 122-123, 219->227, 343->342, 378->381, 398->400, 442
src\services\recettes.py                                      323     55     58     18  80.84%   195-197, 208-210, 231->242, 243->254, 256-258, 331, 333, 335, 537-538, 550-552, 608-610, 658, 670-671, 741-742, 792, 804-807, 904, 939-940, 989-1006, 1035-1037, 1069-1081, 1100-1102, 1164, 1200->1205
src\services\recettes_utils.py                                161      6     70      9  91.77%   54->66, 149, 350->356, 558->567, 563->567, 567->572, 568->572, 573-574, 578-580
src\services\recipe_import.py                                 402     43    226     27  86.94%   147-148, 150->139, 154-155, 172->176, 191->187, 204->202, 212->210, 251->255, 258->260, 271->263, 280->299, 281->287, 284->282, 287->299, 289->299, 293->290, 295-296, 302->300, 310->308, 350->341, 366->364, 373->380, 377-378, 387->394, 400, 409->407, 419->417, 439, 494-495, 543-544, 577-580, 585, 614-700
src\services\suggestions_ia.py                                229     22     96     28  82.15%   171, 175->178, 178->181, 181->184, 184->188, 188->168, 190-191, 202->205, 205->208, 208->212, 224->217, 269, 271, 273, 347->342, 374, 404->413, 409->413, 414->421, 450-451, 466-471, 475-476, 489, 494->493, 520->524, 549, 592-595, 611->613
src\services\suggestions_ia_utils.py                          286     22    172     18  89.08%   94, 275, 281->278, 287-288, 326, 348->352, 366->370, 374-375, 380->383, 384-385, 459, 466, 491-496, 517, 521, 613->611, 615, 619-620, 622->611, 753->756
src\services\types.py                                         204      7     88     11  93.15%   73-76, 97->100, 114->113, 136, 148, 182->186, 249->248, 299, 306->305, 319->318, 440->433
src\services\user_preferences.py                              118      0     14      0 100.00%
src\services\weather.py                                       267      0     84      0 100.00%
src\services\weather_utils.py                                 250      7    132      8  96.07%   421->430, 423->430, 432->439, 510-511, 534, 538, 542-543, 618
src\ui\__init__.py                                              4      0      0      0 100.00%
src\ui\components\__init__.py                                   6      0      0      0 100.00%
src\ui\components\atoms.py                                     23      0      8      0 100.00%
src\ui\components\camera_scanner.py                           182     70     62     12  55.74%   44, 55-57, 73-75, 86-88, 178->181, 187-227, 253-271, 285->287, 321-348, 352-353, 383, 389, 395, 401-406, 411, 413, 417, 428-431, 434, 449->exit, 450->452
src\ui\components\dashboard_widgets.py                        137     24     38      5  81.14%   312-315, 333-337, 347, 349-351, 354-355, 408, 434-440, 461-467
src\ui\components\data.py                                      59      6     26      5  87.06%   33, 39-40, 53-54, 84, 132->119
src\ui\components\dynamic.py                                   91     15     28      4  80.67%   37-38, 51, 99-100, 104-114, 174
src\ui\components\forms.py                                     44      4     26      2  88.57%   68-78, 152
src\ui\components\google_calendar_sync.py                      87     16     40      4  81.10%   114, 131-169, 181->exit, 199->exit
src\ui\components\layouts.py                                   56      5     26      3  90.24%   44->41, 95-98, 134
src\ui\core\__init__.py                                         4      0      0      0 100.00%
src\ui\core\base_form.py                                      101      8     38      4  88.49%   239->242, 259-260, 264-270, 356->exit
src\ui\core\base_io.py                                         45      2     12      2  92.98%   154, 162->161, 180
src\ui\core\base_module.py                                    192     59     70     17  61.83%   135-169, 192, 202->198, 206->exit, 248-251, 255, 259-260, 276-280, 284, 303->exit, 306->303, 309->306, 336-337, 342, 392, 396-399, 403-411, 421-429, 445-455, 465
src\ui\domain.py                                               13      0      8      0 100.00%
src\ui\feedback\__init__.py                                     4      0      0      0 100.00%
src\ui\feedback\progress.py                                   104      1     24      1  98.44%   103
src\ui\feedback\spinners.py                                    22      1      8      2  90.00%   40->exit, 44
src\ui\feedback\toasts.py                                      35      1      6      1  95.12%   63->exit, 101
src\ui\layout\__init__.py                                       6      0      0      0 100.00%
src\ui\layout\footer.py                                        15      0      4      0 100.00%
src\ui\layout\header.py                                        18      0      6      1  95.83%   37->exit
src\ui\layout\init.py                                          24      1      4      0  96.43%   31
src\ui\layout\sidebar.py                                       47      2     20      2  94.03%   82-83, 103->exit
src\ui\layout\styles.py                                         3      0      0      0 100.00%
src\ui\tablet_mode.py                                         162     31     66     13  78.95%   549-550, 600-602, 640->643, 699-703, 706-707, 711-717, 741, 744, 747, 757-760, 773-775, 779, 785-786
src\utils\__init__.py                                           6      0      0      0 100.00%
src\utils\constants.py                                         20      0      0      0 100.00%
src\utils\formatters\__init__.py                                5      0      0      0 100.00%
src\utils\formatters\dates.py                                  88      0     54      2  98.59%   173->183, 180->183
src\utils\formatters\numbers.py                               100      0     28      0 100.00%
src\utils\formatters\text.py                                   40      5     14      0  87.04%   90-91, 117-119
src\utils\formatters\units.py                                  36      9     12      0  72.92%   74-84
src\utils\helpers\__init__.py                                   6      0      0      0 100.00%
src\utils\helpers\data.py                                      63      1     20      0  98.80%   160
src\utils\helpers\dates.py                                     42      2      6      0  95.83%   118, 132
src\utils\helpers\food.py                                      48      7      6      2  79.63%   85, 97, 110-118
src\utils\helpers\helpers.py                                  102      3     36      4  94.93%   100, 156, 175->166, 183
src\utils\helpers\stats.py                                     48      2     18      0  96.97%   107-109
src\utils\helpers\strings.py                                   37      0     12      0 100.00%
src\utils\image_generator.py                                  312    119    104     21  58.65%   22-23, 32->47, 33-42, 67, 101-107, 112->122, 116-119, 125->132, 128-129, 133-139, 143-149, 157-170, 301-302, 348-351, 354->358, 365-380, 408-409, 411->415, 460-461, 485-490, 493-494, 518-521, 533-550, 561-579, 593-605
src\utils\media.py                                             68      0     16      0 100.00%
src\utils\recipe_importer.py                                  235     49    140     24  75.73%   46-48, 82-108, 131-133, 163->158, 165->169, 175->179, 181->196, 190, 192->183, 208-209, 221->158, 223-224, 227->237, 237->247, 244, 247->263, 255, 260, 264-265, 268->286, 273-283, 286->299, 289-297, 319->323, 341->347, 343->347, 345->347, 350->352, 359->324, 409-410
src\utils\validators\__init__.py                                4      0      0      0 100.00%
src\utils\validators\common.py                                 52      2     18      0  97.14%   147-148
src\utils\validators\dates.py                                  26      0     10      0 100.00%
src\utils\validators\food.py                                  130     34     82      7  75.94%   37-38, 46-47, 55, 59, 80, 112-113, 121-122, 140, 143->152, 148-149, 174->183, 179-180, 190->195, 192-193, 209-217, 227-233
--------------------------------------------------------------------------------------------------------
TOTAL                                                       32863  10622   9766    817  65.40%

1 empty file skipped.
Required test coverage of 50% reached. Total coverage: 65.40%
=========================== short test summary info ===========================
FAILED tests/services/test_recipe_import_integration.py::TestImportedRecipe::test_validation_nom_min_length
FAILED tests/services/test_services_coverage_80_part2.py::TestImportedRecipeValidation::test_recipe_name_min_length
FAILED tests/utils/test_image_recipe_deep.py::TestGenererViaPollinations::test_pollinations_erreur
SKIPPED [1] tests\api\test_api_coverage_80.py:758: PyJWT not installed
SKIPPED [1] tests\api\test_api_deep.py:526: RateLimiter.check_rate_limit returns coroutine in some contexts
SKIPPED [1] tests\api\test_api_deep.py:545: RateLimiter.check_rate_limit returns coroutine in some contexts
SKIPPED [1] tests\api\test_api_deep.py:593: RateLimiter.check_rate_limit returns coroutine in some contexts
SKIPPED [1] tests\api\test_api_deep.py:752: Requires PyJWT package
SKIPPED [1] tests\api\test_api_deep.py:903: Requires full FastAPI context
SKIPPED [1] tests\api\test_api_deep.py:924: Requires full FastAPI context
SKIPPED [1] tests\api\test_api_deep.py:981: Requires specific DB context mock
SKIPPED [1] tests\api\test_api_deep.py:1018: Requires AuthService integration
SKIPPED [1] tests\api\test_api_deep.py:1045: Requires AuthService integration
SKIPPED [1] tests\api\test_api_deep.py:1066: Requires AuthService integration
SKIPPED [1] tests\api\test_main.py:14: API has DB connection issues - returns 500
SKIPPED [1] tests\api\test_main.py:21: API has DB connection issues - returns 500
SKIPPED [1] tests\api\test_main.py:38: API has DB connection issues - returns 500
SKIPPED [1] tests\api\test_main.py:55: API has DB connection issues - returns 500
SKIPPED [1] tests\api\test_main.py:80: API has DB connection issues - returns 500
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:240: RateLimiter method behaves differently in test context
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:247: RateLimiter method behaves differently in test context
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:253: RateLimiter method behaves differently in test context
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:263: RateLimiter method behaves differently in test context
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:473: Zero limits behavior needs investigation
SKIPPED [1] tests\api\test_rate_limiting_comprehensive.py:498: RateLimiter integration needs full context
SKIPPED [1] tests\core\test_ai_modules.py:31: Mock Mistral incompatible avec httpx-client actuel
SKIPPED [1] tests\core\test_ai_modules.py:36: Mock Mistral incompatible avec httpx-client actuel
SKIPPED [1] tests\core\test_ai_modules.py:166: API non disponible: 'ClientIA' object has no attribute 'obtenir_suggestions'
SKIPPED [1] tests\core\test_cache_multi.py:82: Test flaky en CI - timing dÚpendant
SKIPPED [1] tests\core\test_cache_multi.py:99: Test flaky en CI - timing dÚpendant
SKIPPED [1] tests\core\test_cache_multi.py:216: Test flaky en CI - timing dÚpendant
SKIPPED [1] tests\core\test_cache_multi.py:230: Test flaky - invalidation fichier non fiable en CI
SKIPPED [6] tests\core\test_cache_multi.py: Tests flaky - dÚpendance sur singleton et Útat partagÚ
SKIPPED [1] tests\core\test_cache_multi.py:388: Test flaky en CI - singleton partagÚ
SKIPPED [1] tests\core\test_cache_multi.py:420: Test flaky en CI - singleton partagÚ
SKIPPED [1] tests\core\test_cache_multi.py:438: Test flaky en CI - singleton partagÚ
SKIPPED [1] tests\core\test_cache_multi_deep.py:253: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:261: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:275: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:296: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:308: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:322: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:334: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_cache_multi_deep.py:349: L2SessionCache import streamlit localement - mock difficile
SKIPPED [1] tests\core\test_config_deep.py:220: DÚpendance complexe sur _get_mistral_api_key_from_secrets et st.secrets
SKIPPED [1] tests\core\test_core_utils.py:35: ExceptionApp.__init__() doesn't accept extra_info kwarg
SKIPPED [4] tests\core\test_core_utils.py: src.core.validators module does not exist
SKIPPED [2] tests\core\test_core_utils.py: Some constants like MAX_BATCH_SIZE, TIMEOUT_SECONDES don't exist
SKIPPED [2] tests\core\test_core_utils.py: src.core.utils module does not exist
SKIPPED [1] tests\core\test_database.py:177: get_db_context is a lambda wrapper, not direct alias
SKIPPED [1] tests\core\test_database_deep.py:575: Identity comparison fails when patch_db_context overwrites get_db_context
SKIPPED [1] tests\core\test_database_extended.py: get_db_context is a lambda wrapper, not direct alias
SKIPPED [1] tests\core\test_models_batch_cooking.py:18: Table batch_meals non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_batch_cooking.py:23: Recette.temps_preparation NOT NULL - test incomplet
SKIPPED [1] tests\core\test_models_batch_cooking.py:28: Table batch_meals non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_batch_cooking.py:33: Table batch_meals non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_batch_cooking.py:38: Table batch_meals non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:25: NÚcessite crÚation Ingredient et ListeCourses d'abord
SKIPPED [1] tests\core\test_models_comprehensive.py:31: NÚcessite crÚation Ingredient et ListeCourses d'abord
SKIPPED [1] tests\core\test_models_comprehensive.py:36: NÚcessite crÚation Ingredient et ListeCourses d'abord
SKIPPED [1] tests\core\test_models_comprehensive.py:41: NÚcessite crÚation Ingredient et ListeCourses d'abord
SKIPPED [1] tests\core\test_models_comprehensive.py:51: NÚcessite crÚation Ingredient d'abord - FK obligatoire
SKIPPED [1] tests\core\test_models_comprehensive.py:56: NÚcessite crÚation Ingredient d'abord - FK obligatoire
SKIPPED [1] tests\core\test_models_comprehensive.py:61: NÚcessite crÚation Ingredient d'abord - FK obligatoire
SKIPPED [1] tests\core\test_models_comprehensive.py:82: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:87: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:149: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:154: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:164: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_models_comprehensive.py:169: Table non crÚÚe dans le scope de la session de test
SKIPPED [1] tests\core\test_performance_optimizations_deep.py:33: Mock du package redis difficile - singleton dÚjÓ crÚÚ
SKIPPED [1] tests\core\test_performance_optimizations_deep.py:48: Mock du singleton RedisCache difficile
SKIPPED [1] tests\core\test_sql_optimizer.py:92: DummyModel n'a pas de relation 'rel' - test incomplet
SKIPPED [1] tests\domains\maison\ui\test_jardin.py:63: app() nÚcessite mock complet de JardinService et tabs context managers
SKIPPED [1] tests\domains\test_core_workflows.py:86: src.services.famille n'existe pas
SKIPPED [1] tests\domains\test_core_workflows.py:95: src.services.famille n'existe pas
SKIPPED [1] tests\domains\test_core_workflows.py:108: streamlit.calendar n'existe pas
SKIPPED [1] tests\domains\test_domains_coverage_80.py:686: Function not available
SKIPPED [1] tests\property_tests\test_models_hypothesis.py:19: Hypothesis not installed
SKIPPED [1] tests\services\test_barcode_coverage.py:231: QR pattern matches before CODE128
SKIPPED [1] tests\services\test_barcode_coverage.py:347: Decorator catches exception - DB connection
SKIPPED [1] tests\services\test_barcode_coverage.py:414: Decorator catches exception
SKIPPED [1] tests\services\test_barcode_coverage.py:469: Service missing cache attribute
SKIPPED [1] tests\services\test_barcode_coverage.py:683: Decorator catches exception
SKIPPED [1] tests\services\test_barcode_coverage.py:711: Service missing cache attribute
SKIPPED [1] tests\services\test_barcode_coverage.py:776: Decorator catches exception
SKIPPED [1] tests\services\test_base_service_coverage.py:697: SQLAlchemy validates ORDER BY expressions even with mocks
SKIPPED [1] tests\services\test_base_service_coverage.py:793: SQLAlchemy validates filter expressions even with mocks
SKIPPED [1] tests\services\test_base_service_coverage.py:798: SQLAlchemy validates ORDER BY expressions even with mocks
SKIPPED [1] tests\services\test_base_service_coverage.py:885: SQLAlchemy validates GROUP BY expressions even with mocks
SKIPPED [1] tests\services\test_base_service_coverage.py:903: SQLAlchemy validates GROUP BY expressions even with mocks
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1019: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1033: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1046: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1059: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1072: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1085: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1098: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1111: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1128: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1141: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1154: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1167: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1180: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1193: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1206: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1227: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1253: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1271: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1287: Requires real DB connection - decorators incompatible with mocking
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1310: Requires real DB connection - generer_plan_ia uses decorators
SKIPPED [1] tests\services\test_batch_cooking_full_coverage.py:1330: Requires real DB connection - suggerer_recettes_batch uses decorators
SKIPPED [1] tests\services\test_courses_service.py:82: Mock complexe - Ó revoir
SKIPPED [1] tests\services\test_courses_service.py:152: Mock complexe sur les caches - Ó revoir
SKIPPED [1] tests\services\test_courses_service.py:161: Mock complexe sur les caches - Ó revoir
SKIPPED [1] tests\services\test_courses_service.py: Mocks complexes de BD - Ó amÚliorer ultÚrieurement
SKIPPED [1] tests\services\test_notifications_push_coverage.py:384: Requires database connection - tested via integration tests
SKIPPED [1] tests\services\test_notifications_push_coverage.py:393: Requires database connection
SKIPPED [1] tests\services\test_notifications_push_coverage.py:402: Requires database connection
SKIPPED [1] tests\services\test_notifications_push_coverage.py:411: Requires database connection
SKIPPED [1] tests\services\test_pdf_export_coverage.py:312: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_pdf_export_coverage.py:318: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_pdf_export_coverage.py:413: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_pdf_export_coverage.py:419: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_pdf_export_coverage.py:574: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_pdf_export_coverage.py:580: Decorator @with_error_handling breaks mocking
SKIPPED [1] tests\services\test_planning_coverage.py:194: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_coverage.py:222: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_coverage.py:246: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_coverage.py:284: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_extended.py:38: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:42: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:47: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:63: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:76: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:92: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:114: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:132: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:137: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:154: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:179: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:196: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:214: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:228: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:243: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:257: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:276: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:292: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:315: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:339: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:363: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:391: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:416: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:432: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:444: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:463: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_extended.py:468: Tests require database connection - use mocked tests instead
SKIPPED [1] tests\services\test_planning_unified_coverage.py:941: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_unified_coverage.py:1015: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_unified_coverage.py:1042: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_unified_coverage.py:1060: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_unified_coverage.py:1124: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_planning_unified_coverage.py:1149: Requires real DB session due to @with_cache decorator
SKIPPED [1] tests\services\test_services_coverage_80_part2.py:502: model_name attribute not set correctly in RapportsPDFService - needs investigation
SKIPPED [16] tests\services\test_services_extended.py: Service classes don't have 'db' attribute - use singleton pattern
SKIPPED [1] tests\services\test_services_integration.py:158: FK constraint issues with ArticleInventaire.ingredient_id in test DB
SKIPPED [1] tests\services\test_services_integration.py:195: FK constraint issues with ArticleCourses.ingredient_id in test DB
SKIPPED [1] tests\services\test_services_integration.py:213: FK constraint issues with ArticleCourses.ingredient_id in test DB
SKIPPED [1] tests\services\test_services_integration.py:261: FK constraint issues with ArticleCourses.ingredient_id in test DB
SKIPPED [1] tests\services\test_tier1_critical.py:48: Requires database connection - use mocked tests instead
SKIPPED [1] tests\services\test_tier1_critical.py:75: Requires database connection - use mocked tests instead
==== 3 failed, 10364 passed, 193 skipped, 5 warnings in 740.44s (0:12:20) =====
