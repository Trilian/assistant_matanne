<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rapport d'Audit Complet â€” Assistant Matanne v4</title>
<style>
  :root {
    --bg: #0d1117;
    --bg-card: #161b22;
    --bg-hover: #1c2128;
    --border: #30363d;
    --text: #e6edf3;
    --text-dim: #8b949e;
    --accent: #58a6ff;
    --green: #3fb950;
    --yellow: #d29922;
    --red: #f85149;
    --orange: #db6d28;
    --purple: #bc8cff;
    --pink: #f778ba;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    padding: 2rem;
    max-width: 1400px;
    margin: 0 auto;
  }
  h1 { font-size: 2.2rem; margin-bottom: 0.5rem; color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 0.5rem; }
  h2 { font-size: 1.6rem; margin: 2rem 0 1rem; color: var(--purple); border-bottom: 1px solid var(--border); padding-bottom: 0.3rem; }
  h3 { font-size: 1.3rem; margin: 1.5rem 0 0.8rem; color: var(--accent); }
  h4 { font-size: 1.1rem; margin: 1rem 0 0.5rem; color: var(--text); }
  p { margin-bottom: 0.8rem; }
  a { color: var(--accent); text-decoration: none; }
  a:hover { text-decoration: underline; }
  code { background: #1c2128; padding: 2px 6px; border-radius: 4px; font-size: 0.9em; color: var(--pink); }
  pre { background: #1c2128; border: 1px solid var(--border); border-radius: 8px; padding: 1rem; overflow-x: auto; margin: 1rem 0; font-size: 0.85em; }
  pre code { background: none; padding: 0; color: var(--text); }
  table { width: 100%; border-collapse: collapse; margin: 1rem 0; font-size: 0.9em; }
  th { background: #1c2128; text-align: left; padding: 10px 12px; border: 1px solid var(--border); color: var(--accent); font-weight: 600; }
  td { padding: 8px 12px; border: 1px solid var(--border); vertical-align: top; }
  tr:hover td { background: var(--bg-hover); }
  .card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin: 1rem 0; }
  .card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 1rem; }
  .score-badge { display: inline-block; padding: 4px 12px; border-radius: 20px; font-weight: 700; font-size: 0.95em; }
  .score-excellent { background: rgba(63,185,80,0.15); color: var(--green); border: 1px solid var(--green); }
  .score-good { background: rgba(88,166,255,0.15); color: var(--accent); border: 1px solid var(--accent); }
  .score-ok { background: rgba(210,153,34,0.15); color: var(--yellow); border: 1px solid var(--yellow); }
  .score-needs-work { background: rgba(248,81,73,0.15); color: var(--red); border: 1px solid var(--red); }
  .tag { display: inline-block; padding: 2px 8px; border-radius: 12px; font-size: 0.75em; margin: 2px; background: rgba(88,166,255,0.1); color: var(--accent); border: 1px solid rgba(88,166,255,0.3); }
  .tag-green { background: rgba(63,185,80,0.1); color: var(--green); border-color: rgba(63,185,80,0.3); }
  .tag-yellow { background: rgba(210,153,34,0.1); color: var(--yellow); border-color: rgba(210,153,34,0.3); }
  .tag-red { background: rgba(248,81,73,0.1); color: var(--red); border-color: rgba(248,81,73,0.3); }
  .progress-bar { width: 100%; height: 8px; background: #21262d; border-radius: 4px; overflow: hidden; margin: 4px 0; }
  .progress-fill { height: 100%; border-radius: 4px; transition: width 0.3s; }
  .metric-row { display: flex; gap: 1rem; flex-wrap: wrap; margin: 1rem 0; }
  .metric { flex: 1; min-width: 180px; background: var(--bg-card); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; text-align: center; }
  .metric-value { font-size: 2rem; font-weight: 700; }
  .metric-label { font-size: 0.8em; color: var(--text-dim); }
  .toc { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 1.5rem; margin: 2rem 0; }
  .toc ol { padding-left: 1.5rem; }
  .toc li { margin: 0.3rem 0; }
  .check { color: var(--green); }
  .warn { color: var(--yellow); }
  .cross { color: var(--red); }
  .dim { color: var(--text-dim); }
  details { margin: 0.5rem 0; }
  details summary { cursor: pointer; padding: 0.5rem; background: var(--bg-card); border: 1px solid var(--border); border-radius: 6px; font-weight: 600; }
  details summary:hover { background: var(--bg-hover); }
  details[open] summary { border-radius: 6px 6px 0 0; }
  .detail-content { padding: 1rem; border: 1px solid var(--border); border-top: none; border-radius: 0 0 6px 6px; }
  .radar-section { display: flex; gap: 2rem; flex-wrap: wrap; align-items: center; }
  .roadmap-item { display: flex; gap: 0.8rem; align-items: flex-start; padding: 0.8rem 0; border-bottom: 1px solid rgba(48,54,61,0.5); }
  .roadmap-num { min-width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; background: var(--accent); color: var(--bg); border-radius: 50%; font-weight: 700; font-size: 0.8em; }
  .roadmap-num.done { background: var(--green); }
  .severity-high { color: var(--red); font-weight: 600; }
  .severity-medium { color: var(--yellow); font-weight: 600; }
  .severity-low { color: var(--text-dim); }
  @media print {
    body { background: #fff; color: #1a1a1a; }
    .card { border-color: #ddd; }
    th { background: #f0f0f0; color: #333; }
    .score-badge { border-width: 2px; }
  }
  @media (max-width: 768px) {
    body { padding: 1rem; }
    .card-grid { grid-template-columns: 1fr; }
    .metric-row { flex-direction: column; }
  }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- HEADER -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
<h1>ğŸ” Rapport d'Audit Complet â€” Assistant Matanne</h1>
<p class="dim">Version 4 â€” 24 fÃ©vrier 2026 | Analyse exhaustive du codebase</p>
</header>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- EXECUTIVE SUMMARY -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section class="card">
<h2>ğŸ“Š SynthÃ¨se ExÃ©cutive</h2>

<div class="metric-row">
  <div class="metric">
    <div class="metric-value" style="color:var(--accent)">97 931</div>
    <div class="metric-label">Lignes de Code Python</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--green)">496</div>
    <div class="metric-label">Fichiers Python</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--purple)">51</div>
    <div class="metric-label">Services enregistrÃ©s</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--yellow)">8 150</div>
    <div class="metric-label">Tests collectÃ©s</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--green)">8.2/10</div>
    <div class="metric-label">Score Global</div>
  </div>
</div>

<table>
<tr><th>Couche</th><th>LOC</th><th>Fichiers</th><th>Score</th><th>Verdict</th></tr>
<tr>
  <td><strong>src/api/</strong></td><td>3 828</td><td>34</td>
  <td><span class="score-badge score-good">7.5/10</span></td>
  <td>API REST production-ready, sÃ©curitÃ© Ã  renforcer</td>
</tr>
<tr>
  <td><strong>src/core/</strong></td><td>12 500</td><td>72</td>
  <td><span class="score-badge score-excellent">8.4/10</span></td>
  <td>Architecture exemplaire, patterns matures</td>
</tr>
<tr>
  <td><strong>src/modules/</strong></td><td>35 182</td><td>151</td>
  <td><span class="score-badge score-good">7.4/10</span></td>
  <td>Couverture fonctionnelle riche, adoption patterns inÃ©gale</td>
</tr>
<tr>
  <td><strong>src/services/</strong></td><td>39 731</td><td>196</td>
  <td><span class="score-badge score-excellent">8.5/10</span></td>
  <td>Architecture BaseService/BaseAIService trÃ¨s mature</td>
</tr>
<tr>
  <td><strong>src/ui/</strong></td><td>9 398</td><td>65</td>
  <td><span class="score-badge score-good">8.0/10</span></td>
  <td>Design system remarquable pour Streamlit</td>
</tr>
<tr>
  <td><strong>src/app.py</strong></td><td>119</td><td>1</td>
  <td><span class="score-badge score-good">8.0/10</span></td>
  <td>Point d'entrÃ©e concis, pipeline CSS unifiÃ©</td>
</tr>
<tr style="font-weight:700; background:rgba(88,166,255,0.05);">
  <td><strong>TOTAL</strong></td><td><strong>100 758</strong></td><td><strong>519</strong></td>
  <td><span class="score-badge score-excellent">8.2/10</span></td>
  <td>Projet mature, production-ready avec axes d'amÃ©lioration identifiÃ©s</td>
</tr>
</table>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- TABLE DES MATIÃˆRES -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="toc">
<h3>ğŸ“‘ Table des matiÃ¨res</h3>
<ol>
  <li><a href="#app">Point d'entrÃ©e â€” app.py</a></li>
  <li><a href="#api">Couche API â€” src/api/</a></li>
  <li><a href="#core">Couche Core â€” src/core/</a></li>
  <li><a href="#services">Couche Services â€” src/services/</a></li>
  <li><a href="#modules">Couche Modules â€” src/modules/</a></li>
  <li><a href="#ui">Couche UI â€” src/ui/</a></li>
  <li><a href="#completeness">Analyse de complÃ©tude globale</a></li>
  <li><a href="#innovations">AmÃ©liorations innovantes Streamlit</a></li>
  <li><a href="#concepts">VÃ©rification des concepts</a></li>
  <li><a href="#vs-roadmap">Comparatif vs Roadmap v4</a></li>
  <li><a href="#roadmap-new">Roadmap proposÃ©e v5</a></li>
</ol>
</div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 1. APP.PY -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="app">
<h2>1. Point d'entrÃ©e â€” src/app.py <span class="score-badge score-good">8.0/10</span></h2>

<div class="card">
<h3>Architecture (119 LOC)</h3>
<p>Pipeline de dÃ©marrage en 7 Ã©tapes bien sÃ©parÃ©es :</p>
<pre><code>1. Chargement .env (.env.local prioritaire â†’ .env fallback)
2. Path & Logging (sys.path, GestionnaireLog)
3. Bootstrap IoC (demarrer_application, validation optionnelle)
4. Imports optimisÃ©s (minimal au dÃ©marrage)
5. Page config (st.set_page_config, PWA meta, initialiser_app)
6. Navigation (st.navigation + st.Page via initialiser_navigation)
7. Main (header, landmark main, page.run(), footer, error handling)</code></pre>

<h4>Points forts</h4>
<ul>
  <li><span class="check">âœ“</span> Migration rÃ©ussie vers <code>st.navigation()</code> natif</li>
  <li><span class="check">âœ“</span> Lazy loading via <code>RouteurOptimise</code> (~60% accÃ©lÃ©ration dÃ©marrage)</li>
  <li><span class="check">âœ“</span> CSS batch unique via <code>CSSManager.inject_all()</code></li>
  <li><span class="check">âœ“</span> A11y intÃ©grÃ©e (skip-link, landmark main avec <code>role="main"</code>)</li>
  <li><span class="check">âœ“</span> PWA meta tags injectÃ©s</li>
  <li><span class="check">âœ“</span> Gestion d'erreur globale avec bouton "RedÃ©marrer"</li>
</ul>

<h4>ProblÃ¨mes identifiÃ©s</h4>
<table>
<tr><th>SÃ©vÃ©ritÃ©</th><th>ProblÃ¨me</th><th>Impact</th></tr>
<tr><td class="severity-low">Faible</td><td><code>if __name__ == "__main__"</code> est du dead code (Streamlit n'exÃ©cute jamais le script comme __main__)</td><td>CosmÃ©tique</td></tr>
<tr><td class="severity-low">Faible</td><td>Balises <code>&lt;main&gt;</code> ouvrante/fermante sÃ©parÃ©es par <code>page.run()</code> â€” DOM potentiellement invalide</td><td>FragilitÃ©</td></tr>
<tr><td class="severity-medium">Moyenne</td><td>Bootstrap failure loggÃ© mais pas bloquant â€” l'app continue dans un Ã©tat dÃ©gradÃ©</td><td>FiabilitÃ©</td></tr>
</table>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 2. API -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="api">
<h2>2. Couche API â€” src/api/ <span class="score-badge score-good">7.5/10</span></h2>

<div class="card">
<h3>Vue d'ensemble (3 828 LOC Â· 34 fichiers)</h3>
<pre><code>src/api/
â”œâ”€â”€ main.py              # FastAPI app factory, middleware stack, health
â”œâ”€â”€ auth.py              # JWT dual validation (API + Supabase)
â”œâ”€â”€ dependencies.py      # FastAPI Depends: auth, role-based access
â”œâ”€â”€ routes/              # 7 domain routers (32 endpoints)
â”‚   â”œâ”€â”€ auth.py          # Login, refresh, /me
â”‚   â”œâ”€â”€ recettes.py      # Full CRUD recipes (6 endpoints)
â”‚   â”œâ”€â”€ courses.py       # Shopping lists + items (8 endpoints)
â”‚   â”œâ”€â”€ inventaire.py    # Inventory CRUD + barcode (6 endpoints)
â”‚   â”œâ”€â”€ planning.py      # Weekly meal planning (4 endpoints)
â”‚   â”œâ”€â”€ suggestions.py   # AI-powered suggestions (2 endpoints)
â”‚   â””â”€â”€ push.py          # Web Push notifications (3 endpoints)
â”œâ”€â”€ schemas/             # Pydantic v2 schemas (8 fichiers)
â”œâ”€â”€ utils/               # CRUD, ETag/cache, metrics, security, exceptions
â””â”€â”€ rate_limiting/       # Full subsystem (7 fichiers, Redis-ready)</code></pre>
</div>

<div class="card">
<h3>DÃ©tail des scores</h3>
<table>
<tr><th>Aspect</th><th>Score</th><th>DÃ©tails</th></tr>
<tr><td>Architecture</td><td><span class="score-badge score-excellent">8/10</span></td><td>Clean layering, router pattern, middleware stack (Securityâ†’Metricsâ†’ETagâ†’RateLimitâ†’CORS)</td></tr>
<tr><td>SÃ©curitÃ©</td><td><span class="score-badge score-good">7/10</span></td><td>Dual JWT, rate limiting multi-window, OWASP headers. Faille: unsigned JWT decode dans rate limiting middleware</td></tr>
<tr><td>Endpoints</td><td><span class="score-badge score-good">7/10</span></td><td>32 endpoints, CRUD complet recettes/inventaire/courses. Manque: PATCH partiel, batch ops, logout</td></tr>
<tr><td>Code Quality</td><td><span class="score-badge score-excellent">8/10</span></td><td>Typing excellent, docstrings riches, error handling consistant</td></tr>
<tr><td>Documentation</td><td><span class="score-badge score-excellent">9/10</span></td><td>OpenAPI riche, tags, exemples, ReDoc. Swagger persistAuthorization</td></tr>
<tr><td>Tests</td><td><span class="score-badge score-needs-work">2/10</span></td><td>Aucun test API spÃ©cifique trouvÃ©</td></tr>
</table>
</div>

<details>
<summary>ğŸ“‹ ProblÃ¨mes de sÃ©curitÃ© dÃ©taillÃ©s</summary>
<div class="detail-content">
<table>
<tr><th>SÃ©vÃ©ritÃ©</th><th>ProblÃ¨me</th><th>Fichier</th></tr>
<tr><td class="severity-medium">MEDIUM</td><td>Rate limiting middleware decode JWT sans vÃ©rification de signature â€” un attaquant peut forger un <code>sub</code> pour bypasser les limites par utilisateur</td><td>rate_limiting/middleware.py</td></tr>
<tr><td class="severity-medium">MEDIUM</td><td>Tokens Supabase dÃ©codÃ©s sans vÃ©rification signature si <code>SUPABASE_JWT_SECRET</code> absent â€” risque en production</td><td>auth.py L170-L193</td></tr>
<tr><td class="severity-medium">MEDIUM</td><td><code>/metrics</code> endpoint accessible sans authentification â€” fuite de donnÃ©es opÃ©rationnelles</td><td>main.py L332</td></tr>
<tr><td class="severity-low">LOW</td><td><code>LoginRequest.email</code> sans <code>EmailStr</code> validation</td><td>schemas/auth.py</td></tr>
<tr><td class="severity-low">LOW</td><td><code>LoginRequest.password</code> sans longueur minimale</td><td>schemas/auth.py</td></tr>
</table>
</div>
</details>

<details>
<summary>ğŸ—ï¸ Recommandations API</summary>
<div class="detail-content">
<ol>
  <li><strong class="severity-high">CRITIQUE</strong> â€” ProtÃ©ger <code>/metrics</code> avec <code>require_role("admin")</code></li>
  <li><strong class="severity-high">CRITIQUE</strong> â€” Utiliser <code>valider_token()</code> dans le rate limiting middleware au lieu du decode unsigned</li>
  <li><strong>Haute</strong> â€” DÃ©placer les schemas inline (<code>main.py</code>, <code>routes/push.py</code>) vers <code>schemas/</code></li>
  <li><strong>Haute</strong> â€” Utiliser <code>ReponsePaginee[T]</code> gÃ©nÃ©rique partout (existe dans common.py mais non utilisÃ©)</li>
  <li><strong>Haute</strong> â€” Ajouter des tests d'intÃ©gration API (pytest + httpx AsyncClient)</li>
  <li><strong>Moyenne</strong> â€” Ajouter X-Request-ID middleware pour traÃ§abilitÃ©</li>
  <li><strong>Moyenne</strong> â€” Ajouter endpoints PATCH pour inventaire, courses, planning</li>
  <li><strong>Basse</strong> â€” Ajouter lifespan events (startup/shutdown) pour DB pool et Redis cleanup</li>
</ol>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 3. CORE -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="core">
<h2>3. Couche Core â€” src/core/ <span class="score-badge score-excellent">8.4/10</span></h2>

<div class="card">
<h3>Vue d'ensemble (12 500 LOC Â· 72 fichiers Â· 12 sous-packages)</h3>
<p>Le core fournit toute l'infrastructure technique : IA, cache, config, base de donnÃ©es, dÃ©corateurs, modÃ¨les ORM, monitoring, observabilitÃ©, rÃ©silience, Ã©tat, validation.</p>
</div>

<div class="card-grid">
  <div class="card">
    <h4>ai/ <span class="score-badge score-excellent">8.0/10</span></h4>
    <p>~1 310 LOC Â· 6 fichiers</p>
    <p><span class="tag tag-green">Circuit Breaker</span> <span class="tag tag-green">Cache SÃ©mantique</span> <span class="tag tag-green">Rate Limiting</span> <span class="tag tag-green">5 stratÃ©gies parsing</span></p>
    <p>Client Mistral AI avec streaming, vision/OCR (Pixtral), circuit breaker async, cache sÃ©mantique, rate limiting quotidien/horaire. Parser JSON avec 5 stratÃ©gies de dÃ©gradation progressive.</p>
    <p class="dim">âš  MÃ©thode legacy <code>discuter()</code> encore prÃ©sente. <code>CacheIA.obtenir(ttl)</code> ignore le param ttl.</p>
  </div>

  <div class="card">
    <h4>caching/ <span class="score-badge score-excellent">9.0/10</span></h4>
    <p>~940 LOC Â· 8 fichiers</p>
    <p><span class="tag tag-green">L1 Memory</span> <span class="tag tag-green">L2 Session</span> <span class="tag tag-green">L3 File/Pickle</span> <span class="tag tag-green">Redis optionnel</span></p>
    <p>Cache multi-niveaux avec promotion sur reads et write-through configurable. Orchestrateur L1â†’Redisâ†’L2â†’L3. Invalidation par tags. Pattern cache-aside via <code>obtenir_ou_calculer()</code>.</p>
  </div>

  <div class="card">
    <h4>config/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>~695 LOC Â· 4 fichiers</p>
    <p><span class="tag tag-green">Pydantic BaseSettings</span> <span class="tag tag-green">Validation fluente</span> <span class="tag tag-green">3 sources</span></p>
    <p>Configuration Pydantic avec rÃ©solution tri-source (st.secrets â†’ .env â†’ defaults). <code>ValidateurConfiguration</code> avec API fluente et rapport structurÃ©.</p>
  </div>

  <div class="card">
    <h4>db/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>~640 LOC Â· 5 fichiers</p>
    <p><span class="tag tag-green">Thread-safe Singleton</span> <span class="tag tag-green">Context Manager</span> <span class="tag tag-green">SQL-file Migrations</span></p>
    <p>Engine singleton thread-safe avec double-check locking, <code>obtenir_contexte_db()</code> avec commit/rollback auto, migrations avec checksum. Pool PostgreSQL avec <code>pool_pre_ping</code>.</p>
    <p class="dim">âš  Import depuis <code>errors</code> (UI) au lieu de <code>errors_base</code></p>
  </div>

  <div class="card">
    <h4>decorators/ <span class="score-badge score-excellent">9.0/10</span></h4>
    <p>~450 LOC Â· 5 fichiers</p>
    <p><span class="tag tag-green">@avec_cache</span> <span class="tag tag-green">@avec_session_db</span> <span class="tag tag-green">@avec_gestion_erreurs</span> <span class="tag tag-green">@avec_resilience</span> <span class="tag tag-green">@avec_validation</span></p>
    <p>DÃ©corateurs production-grade. <code>@avec_cache</code> avec blake2b, anti cache-poisoning (<code>cache_none=False</code>). <code>@avec_resilience</code> compose RetryPolicy + TimeoutPolicy + CircuitBreaker.</p>
  </div>

  <div class="card">
    <h4>models/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>~4 500 LOC Â· 20 fichiers Â· ~94 tables</p>
    <p><span class="tag tag-green">SQLAlchemy 2.0</span> <span class="tag tag-green">Mapped[T]</span> <span class="tag tag-green">StrEnum</span> <span class="tag tag-green">Check Constraints</span></p>
    <p>ModÃ¨les modern SQLAlchemy 2.0 avec <code>Mapped[T]</code>, <code>mapped_column()</code>, constraints nommÃ©es automatiquement. 19 fichiers domaine + base + lazy registry.</p>
    <p class="dim">âš  Pas de mixin abstract pour id/cree_le/modifie_le. jeux.py (570 LOC) Ã  splitter</p>
  </div>

  <div class="card">
    <h4>monitoring/ <span class="score-badge score-excellent">8.0/10</span></h4>
    <p>~860 LOC Â· 6 fichiers</p>
    <p><span class="tag tag-green">MÃ©triques thread-safe</span> <span class="tag tag-green">K8s Probes</span> <span class="tag tag-green">Sentry</span> <span class="tag tag-green">Rerun Profiler</span></p>
    <p>CollecteurMetriques avec histogrammes P95/P99. Probes K8s (liveness/readiness/startup). Sentry avec PII scrubbing. RerunProfiler spÃ©cifique Streamlit.</p>
  </div>

  <div class="card">
    <h4>resilience/ <span class="score-badge score-excellent">9.0/10</span></h4>
    <p>~305 LOC Â· 2 fichiers</p>
    <p><span class="tag tag-green">Composable</span> <span class="tag tag-green">Retry + Timeout + Bulkhead + Fallback</span> <span class="tag tag-green">Operator +</span></p>
    <p>Politiques composables via opÃ©rateur <code>+</code>. Retry avec backoff exponentiel + jitter. Bulkhead par sÃ©maphore. Factories prÃ©configurÃ©es pour API, IA, DB.</p>
  </div>

  <div class="card">
    <h4>state/ <span class="score-badge score-good">7.5/10</span></h4>
    <p>~605 LOC Â· 4 fichiers</p>
    <p><span class="tag tag-green">State Slices</span> <span class="tag tag-green">SessionStorage Protocol</span> <span class="tag tag-yellow">Boilerplate compat</span></p>
    <p>Architecture State Slices (Navigation + Cuisine + UI). DÃ©couplÃ© de Streamlit via Protocol. Massive dette de backward-compat (20+ property pairs de dÃ©lÃ©gation).</p>
  </div>

  <div class="card">
    <h4>validation/ <span class="score-badge score-excellent">8.0/10</span></h4>
    <p>~680 LOC Â· 12 fichiers</p>
    <p><span class="tag tag-green">Pydantic v2 Schemas</span> <span class="tag tag-green">Anti-XSS/Injection</span> <span class="tag tag-yellow">Couverture partielle</span></p>
    <p>Schemas Pydantic pour recettes, inventaire, courses, planning, famille, projets. Sanitizer anti-XSS/SQL. Manque schemas pour habitat, jeux, santÃ©, users.</p>
  </div>

  <div class="card">
    <h4>observability/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>~225 LOC Â· 2 fichiers</p>
    <p><span class="tag tag-green">contextvars</span> <span class="tag tag-green">Correlation ID</span></p>
    <p>Contexte de traÃ§age async-safe via <code>contextvars.ContextVar</code>. Correlation ID avec parent/child pour tracing hiÃ©rarchique.</p>
  </div>

  <div class="card">
    <h4>date_utils/ <span class="score-badge score-excellent">8.0/10</span></h4>
    <p>~327 LOC Â· 5 fichiers</p>
    <p><span class="tag tag-green">Formatage FR</span> <span class="tag tag-green">Semaines/PÃ©riodes</span></p>
    <p>Utilitaires dates en franÃ§ais. Pure functions, bien sÃ©parÃ©es. Manque gestion timezone.</p>
  </div>
</div>

<details>
<summary>ğŸ“‹ Design Patterns identifiÃ©s dans core/</summary>
<div class="detail-content">
<table>
<tr><th>Pattern</th><th>Localisation</th><th>QualitÃ©</th></tr>
<tr><td>Circuit Breaker</td><td><code>ai/circuit_breaker.py</code></td><td>â˜…â˜…â˜…â˜…â˜… Full state machine, async support</td></tr>
<tr><td>Strategy</td><td><code>ai/parser.py</code> (5 strategies)</td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>Composite</td><td><code>resilience/policies.py</code> (<code>PolicyComposee + __add__</code>)</td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>Multi-Level Cache</td><td><code>caching/orchestrator.py</code></td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>Facade</td><td><code>caching/cache.py</code>, <code>state/slices.py</code></td><td>â˜…â˜…â˜…â˜…â˜†</td></tr>
<tr><td>Factory / Singleton</td><td>Engine, Cache, Config, SessionStorage</td><td>â˜…â˜…â˜…â˜…â˜† Thread-safe</td></tr>
<tr><td>Decorator</td><td>5 dÃ©corateurs dans <code>decorators/</code></td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>Protocol (PEP 544)</td><td><code>storage.py</code>, Policy ABC</td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>PEP 562 Lazy Loading</td><td><code>__init__.py</code> (core & models)</td><td>â˜…â˜…â˜…â˜…â˜…</td></tr>
<tr><td>Context Propagation</td><td><code>observability/context.py</code></td><td>â˜…â˜…â˜…â˜…â˜†</td></tr>
<tr><td>Builder</td><td><code>ValidateurConfiguration</code> (fluent API)</td><td>â˜…â˜…â˜…â˜…â˜†</td></tr>
</table>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 4. SERVICES -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="services">
<h2>4. Couche Services â€” src/services/ <span class="score-badge score-excellent">8.5/10</span></h2>

<div class="card">
<h3>Vue d'ensemble (39 731 LOC Â· 196 fichiers)</h3>
<p>Architecture Ã  trois piliers : <code>BaseService[T]</code> (CRUD gÃ©nÃ©rique), <code>BaseAIService</code> (IA avec rate limiting + cache), <code>@service_factory</code> (registre singleton). <strong>51 factories enregistrÃ©es</strong>.</p>
</div>

<div class="card">
<h3>Architecture des services</h3>
<pre><code>                    ServiceRegistry (51 singletons)
                           â”‚
                    @service_factory
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
              BaseService[T]    BaseAIService
              (CRUD gÃ©nÃ©rique)  (IA + Rate Limit)
                    â”‚                â”‚
              â”Œâ”€â”€â”€â”€â”€â”¤          â”Œâ”€â”€â”€â”€â”€â”¤
          13 services      15 services
         (DB CRUD)       (Mistral AI)

Mixins: AIStreamingMixin, AIDiagnosticsMixin, AIPromptsMixin
        AdvancedQueryMixin, PipelineMixin
        RecipeAIMixin, PlanningAIMixin, InventoryAIMixin
        EntretienGamificationMixin, JardinGamificationMixin

Event Bus: EvenementDomaine â†’ Souscriptions wildcards
Protocols PEP 544: CRUDProtocol, AIServiceProtocol, IOProtocol</code></pre>
</div>

<div class="card-grid">
  <div class="card">
    <h4>core/ <span class="score-badge score-excellent">9.5/10</span></h4>
    <p>8 530 LOC Â· 59 fichiers</p>
    <p>Infrastructure exemplaire : BaseService, BaseAIService, Registry thread-safe, Event Bus pub/sub, Notifications (ntfy + WebPush), Observability (health, metrics, spans), Backup (export/restore/rotation), Utilisateur (auth, permissions, historique, prÃ©fÃ©rences).</p>
  </div>
  <div class="card">
    <h4>cuisine/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>8 700 LOC Â· 52 fichiers</p>
    <p>5 sous-packages (recettes, planning, courses, suggestions, batch_cooking). HÃ©ritage multiple maÃ®trisÃ© (BaseService + BaseAIService + mixins). <span class="tag tag-red">ServiceSuggestions bypass BaseAIService</span></p>
  </div>
  <div class="card">
    <h4>famille/ <span class="score-badge score-excellent">8.0/10</span></h4>
    <p>4 430 LOC Â· 19 fichiers</p>
    <p>12 services couvrant activitÃ©s, achats, routines, weekend, jules, santÃ©, suivi perso, calendrier, budget. <span class="tag tag-yellow">Weekend/SantÃ© sans BaseService</span></p>
  </div>
  <div class="card">
    <h4>integrations/ <span class="score-badge score-excellent">9.0/10</span></h4>
    <p>4 530 LOC Â· 26 fichiers</p>
    <p>Garmin, mÃ©tÃ©o, images IA, codes-barres, facture OCR, sync temps rÃ©el, PWA. <code>@avec_resilience</code> sur tous les appels HTTP.</p>
  </div>
  <div class="card">
    <h4>jeux/ <span class="score-badge score-excellent">9.0/10</span></h4>
    <p>5 740 LOC Â· 15 fichiers</p>
    <p>Architecture <code>_internal/</code> propre. Paris sportifs (CRUD, prediction, backtest, series). Loto (CRUD, data scraping). Football data. 9+ factories.</p>
  </div>
  <div class="card">
    <h4>maison/ <span class="score-badge score-excellent">8.5/10</span></h4>
    <p>2 960 LOC Â· 13 fichiers</p>
    <p>Jardin, entretien, projets, dÃ©penses, hub. <strong>Gamification innovante</strong> avec badges, streaks, points. Mixins hiÃ©rarchiques (catalogueâ†’tÃ¢chesâ†’gamification).</p>
  </div>
</div>

<details>
<summary>ğŸ“‹ Adoption des patterns dans les services</summary>
<div class="detail-content">
<table>
<tr><th>Pattern</th><th>Adoption</th><th>Commentaire</th></tr>
<tr><td><code>@service_factory</code></td><td><span class="check">âœ“</span> 51/51 services principaux</td><td>Adoption quasi-parfaite</td></tr>
<tr><td><code>BaseService[T]</code></td><td><span class="check">âœ“</span> 13 services CRUD</td><td>Tous les services avec CRUD DB</td></tr>
<tr><td><code>BaseAIService</code></td><td><span class="check">âœ“</span> 15 services IA</td><td>Exception: ServiceSuggestions</td></tr>
<tr><td><code>@avec_cache</code></td><td><span class="check">âœ“</span> 50+ usages</td><td>Excellent</td></tr>
<tr><td><code>@avec_resilience</code></td><td><span class="check">âœ“</span> 14 usages (HTTP)</td><td>Correctement ciblÃ©</td></tr>
<tr><td><code>@avec_session_db</code></td><td><span class="check">âœ“</span> 50+ usages</td><td>SystÃ©matique</td></tr>
<tr><td><code>@avec_gestion_erreurs</code></td><td><span class="check">âœ“</span> 50+ usages</td><td>Avec default_return</td></tr>
<tr><td>Event Bus</td><td><span class="check">âœ“</span> Ã‰missions domaine</td><td>recette.creee, inventaire.modifie, etc.</td></tr>
<tr><td>Protocols PEP 544</td><td><span class="warn">â–³</span> DÃ©finis mais sous-utilisÃ©s</td><td>6 protocols disponibles</td></tr>
</table>
</div>
</details>

<details>
<summary>ğŸ› Anti-patterns identifiÃ©s</summary>
<div class="detail-content">
<ol>
  <li><strong class="severity-high">ServiceSuggestions</strong> â€” Utilise <code>ClientIA</code> + <code>RateLimitIA</code> + <code>CacheIA</code> manuellement au lieu d'hÃ©riter <code>BaseAIService</code></li>
  <li><strong class="severity-medium">BudgetService</strong> â€” N'hÃ©rite ni <code>BaseService</code> ni <code>BaseAIService</code>. CRUD DB manuel dans les mixins</li>
  <li><strong class="severity-medium">ServiceWeekend / ServiceSante</strong> â€” CRUD DB manuel au lieu de <code>BaseService</code></li>
  <li><strong class="severity-low">core/base/mixins/</strong> â€” Dossier vide rÃ©siduel</li>
  <li><strong class="severity-low">paris_crud_service.py</strong> â€” 607 LOC, Ã  diviser en mixins</li>
</ol>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 5. MODULES -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="modules">
<h2>5. Couche Modules â€” src/modules/ <span class="score-badge score-good">7.4/10</span></h2>

<div class="card">
<h3>Vue d'ensemble (35 182 LOC Â· 151 fichiers Â· 10 modules)</h3>
<p>Chaque module exporte une fonction <code>app()</code> comme point d'entrÃ©e pour le chargement diffÃ©rÃ© via <code>RouteurOptimise</code>. Les modules sont chargÃ©s Ã  la demande.</p>
</div>

<div class="card">
<h3>Scores par module</h3>
<table>
<tr><th>Module</th><th>LOC</th><th>Fichiers</th><th>Score</th><th>Force principale</th></tr>
<tr><td><strong>_framework/</strong></td><td>1 333</td><td>6</td><td><span class="score-badge score-excellent">8.5/10</span></td><td>Source des patterns (error_boundary, ModuleState, fragments)</td></tr>
<tr><td><strong>accueil/</strong></td><td>826</td><td>6</td><td><span class="score-badge score-good">7.5/10</span></td><td>Dashboard, alertes, mÃ©triques. KeyNamespace adoptÃ©</td></tr>
<tr><td><strong>cuisine/</strong></td><td>9 970</td><td>44</td><td><span class="score-badge score-good">7.0/10</span></td><td>Plus gros module. Inventaire = module modÃ¨le. Manque @cached_fragment</td></tr>
<tr><td><strong>famille/</strong></td><td>4 789</td><td>26</td><td><span class="score-badge score-good">7.0/10</span></td><td>Hub avec AI services. Manque error_boundary/KeyNamespace</td></tr>
<tr><td><strong>jeux/</strong></td><td>4 897</td><td>25</td><td><span class="score-badge score-ok">6.5/10</span></td><td>Paris sportifs + Loto riches. Imports module-level, scraper mal placÃ©</td></tr>
<tr><td><strong>maison/</strong></td><td>5 524</td><td>27</td><td><span class="score-badge score-excellent">8.0/10</span></td><td>Tous les patterns adoptÃ©s. Gamification. CSS sÃ©parÃ©. ModÃ¨le Ã  suivre</td></tr>
<tr><td><strong>parametres/</strong></td><td>1 291</td><td>9</td><td><span class="score-badge score-excellent">8.5/10</span></td><td>Module modÃ¨le: lazy loading parfait, tous patterns adoptÃ©s</td></tr>
<tr><td><strong>planning/</strong></td><td>2 709</td><td>12</td><td><span class="score-badge score-good">7.5/10</span></td><td>Calendrier riche. Manque KeyNamespace, @ui_fragment</td></tr>
<tr><td><strong>utilitaires/</strong></td><td>3 599</td><td>13</td><td><span class="score-badge score-excellent">8.0/10</span></td><td>notifications_push = showcase patterns. Barcode bien structurÃ©</td></tr>
<tr><td><strong>design_system</strong></td><td>219</td><td>1</td><td><span class="score-badge score-ok">6.0/10</span></td><td>Catalogue composants. Manque error_boundary, tabs_with_url</td></tr>
</table>
</div>

<div class="card">
<h3>Adoption des patterns par module</h3>
<table>
<tr><th>Module</th><th>error_boundary</th><th>@profiler_rerun</th><th>KeyNamespace</th><th>tabs_with_url</th><th>@cached_fragment</th><th>Lazy loading</th></tr>
<tr><td>accueil</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td>â€”</td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>cuisine</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td><td><span class="cross">âœ—</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>famille</td><td><span class="warn">â–³</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td><td><span class="cross">âœ—</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>jeux</td><td><span class="warn">â–³</span></td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>maison</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>parametres</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="cross">âœ—</span></td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>planning</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="cross">âœ—</span></td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>utilitaires</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td><td>â€”</td><td><span class="check">âœ“</span></td><td><span class="warn">â–³</span></td></tr>
</table>
<p class="dim"><span class="check">âœ“</span> Complet Â· <span class="warn">â–³</span> Partiel Â· <span class="cross">âœ—</span> Absent Â· â€” Non applicable</p>
</div>

<details>
<summary>âš ï¸ DonnÃ©es en session_state (non persistÃ©es en DB)</summary>
<div class="detail-content">
<p><strong>ProblÃ¨me critique :</strong> Les modules maison/ suivants stockent leurs donnÃ©es en <code>session_state</code> (perdues au rechargement) au lieu de la base de donnÃ©es :</p>
<ul>
  <li><code>maison/entretien/</code> â€” DonnÃ©es d'entretien</li>
  <li><code>maison/jardin/</code> â€” DonnÃ©es jardin et plantes</li>
  <li><code>maison/charges/</code> â€” Factures et charges</li>
</ul>
<p>Les services existent (<code>entretien_service</code>, <code>jardin_service</code>) mais les modules ne les utilisent pas systÃ©matiquement pour la persistance. C'est la prioritÃ© #1 d'amÃ©lioration.</p>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 6. UI -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="ui">
<h2>6. Couche UI â€” src/ui/ <span class="score-badge score-good">8.0/10</span></h2>

<div class="card">
<h3>Vue d'ensemble (9 398 LOC Â· 65 fichiers)</h3>
<p>Design system complet et remarquablement mature pour un projet Streamlit, avec une hiÃ©rarchie tokens â†’ sÃ©mantique â†’ thÃ¨me â†’ moteur CSS â†’ composants.</p>
</div>

<div class="card">
<h3>Architecture du Design System</h3>
<pre><code>  tokens.py (189 LOC)           â† Valeurs primitives (8 StrEnum)
       â†“
  tokens_semantic.py (178 LOC)  â† 27 CSS custom properties (light/dark)
       â†“
  theme.py (256 LOC)            â† Orchestration clair/sombre/auto + densitÃ©
       â†“
  engine/css.py (335 LOC)       â† Injection batch unique, classes MD5 hashÃ©es
       â†“
  components/ (2 676 LOC)       â† 14 fichiers, composants rÃ©utilisables
       â†“
  views/ (1 308 LOC)            â† 11 vues de page complÃ¨tes</code></pre>
</div>

<div class="card">
<h3>Scores par sous-package UI</h3>
<table>
<tr><th>Sous-package</th><th>LOC</th><th>Score</th><th>Points clÃ©s</th></tr>
<tr><td>tokens + tokens_semantic</td><td>367</td><td><span class="score-badge score-excellent">9/10</span></td><td>Design tokens deux niveaux, couverture complÃ¨te light/dark</td></tr>
<tr><td>engine/</td><td>364</td><td><span class="score-badge score-excellent">9/10</span></td><td>CSSEngine remarquable: dÃ©duplication MD5, injection batch, classes atomiques</td></tr>
<tr><td>fragments.py</td><td>342</td><td><span class="score-badge score-excellent">9/10</span></td><td>Abstraction st.fragment avec fallback, FragmentGroup, @cached_fragment</td></tr>
<tr><td>a11y.py</td><td>229</td><td><span class="score-badge score-excellent">8.5/10</span></td><td>WCAG 2.1: sr-only, ARIA, contraste ratio, skip-link, reduced-motion</td></tr>
<tr><td>components/</td><td>2 676</td><td><span class="score-badge score-excellent">8/10</span></td><td>BibliothÃ¨que riche, XSS-safe, tokens sÃ©mantiques. Chat IA + streaming</td></tr>
<tr><td>state/</td><td>441</td><td><span class="score-badge score-excellent">8.5/10</span></td><td>URLState, deep linking, widgets synchronisÃ©s URL</td></tr>
<tr><td>tablet/</td><td>990</td><td><span class="score-badge score-good">7.5/10</span></td><td>Mode tablette/cuisine complet. CSS non tokenisÃ©</td></tr>
<tr><td>feedback/</td><td>687</td><td><span class="score-badge score-excellent">8/10</span></td><td>Spinners, toasts, rÃ©sultats, progression (st.status)</td></tr>
<tr><td>grid/</td><td>409</td><td><span class="score-badge score-good">7.5/10</span></td><td>Row, Grid, Stack composables. Overlap avec components/layouts</td></tr>
<tr><td>views/</td><td>1 308</td><td><span class="score-badge score-good">7/10</span></td><td>Auth, notifs, mÃ©tÃ©o, PWA, sync. Certaines vues prÃ©maturÃ©es</td></tr>
<tr><td>keys.py</td><td>154</td><td><span class="score-badge score-excellent">8.5/10</span></td><td>KeyNamespace anti-collision. DÃ©tection doublons thread-safe</td></tr>
<tr><td>registry.py</td><td>92</td><td><span class="score-badge score-good">7.5/10</span></td><td>@composant_ui avec catalogue auto-gÃ©nÃ©rÃ©. Adoption insuffisante</td></tr>
<tr><td>testing/</td><td>248</td><td><span class="score-badge score-good">7/10</span></td><td>SnapshotTester, assertions HTML. Pas d'AppTest Streamlit</td></tr>
</table>
</div>

<details>
<summary>ğŸ¨ Features innovantes du Design System</summary>
<div class="detail-content">
<ul>
  <li><strong>CSSEngine avec injection batch</strong> â€” Un seul <code>st.markdown</code> pour tout le CSS au lieu de multiples appels</li>
  <li><strong>Classes atomiques hashÃ©es MD5</strong> â€” <code>css-a1b2c3d4</code> pour la dÃ©duplication automatique</li>
  <li><strong>Tokens sÃ©mantiques bilevel</strong> â€” Primitifs (valeurs) â†’ sÃ©mantiques (intentions) avec CSS custom properties</li>
  <li><strong>Mode tablette cuisine</strong> â€” Vue step-by-step recette + timer avec notifications</li>
  <li><strong>FragmentGroup</strong> â€” Coordination multi-fragments avec refresh groupÃ© (unique dans l'Ã©cosystÃ¨me Streamlit)</li>
  <li><strong>A11y pipeline</strong> â€” Skip-link, ARIA, contraste ratio, reduced-motion intÃ©grÃ©s au dÃ©marrage</li>
  <li><strong>@composant_ui registre</strong> â€” Catalogue auto-gÃ©nÃ©rÃ© avec documentation interactive</li>
</ul>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 7. COMPLETENESS -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="completeness">
<h2>7. Analyse de complÃ©tude globale</h2>

<div class="card">
<h3>Grille de complÃ©tude d'un projet informatique</h3>
<table>
<tr><th>Aspect</th><th>Score</th><th>Statut</th><th>DÃ©tail</th></tr>
<tr>
  <td><strong>Architecture</strong></td>
  <td><span class="score-badge score-excellent">9/10</span></td>
  <td><span class="check">âœ“</span> Excellente</td>
  <td>Layered Architecture (API â†’ Services â†’ Core â†’ Models). Lazy loading. DI via registre. Event Bus. State Slices.</td>
</tr>
<tr>
  <td><strong>Base de donnÃ©es</strong></td>
  <td><span class="score-badge score-excellent">8.5/10</span></td>
  <td><span class="check">âœ“</span> Mature</td>
  <td>~94 tables, SQLAlchemy 2.0, migrations SQL-file, connection pooling, health checks. Manque: async sessions.</td>
</tr>
<tr>
  <td><strong>API REST</strong></td>
  <td><span class="score-badge score-good">7.5/10</span></td>
  <td><span class="check">âœ“</span> Production-ready</td>
  <td>FastAPI, 32 endpoints, JWT dual auth, rate limiting, OpenAPI. Manque: tests API, batch ops, WebSocket.</td>
</tr>
<tr>
  <td><strong>SÃ©curitÃ©</strong></td>
  <td><span class="score-badge score-good">7/10</span></td>
  <td><span class="warn">â–³</span> Bonne base</td>
  <td>JWT, CORS, Security Headers, Rate Limiting, Input Sanitization. Failles: unsigned JWT decode, /metrics ouvert.</td>
</tr>
<tr>
  <td><strong>Tests</strong></td>
  <td><span class="score-badge score-good">7/10</span></td>
  <td><span class="warn">â–³</span> En progrÃ¨s</td>
  <td>8 150 tests collectÃ©s, 95.9% pass rate. 322 skippÃ©s (modules manquants). ~75% coverage core. Pas de tests API.</td>
</tr>
<tr>
  <td><strong>Performance</strong></td>
  <td><span class="score-badge score-excellent">8/10</span></td>
  <td><span class="check">âœ“</span> OptimisÃ©e</td>
  <td>Lazy loading (~60%), cache multi-niveaux + Redis, CSS batch injection, @cached_fragment, N+1 corrigÃ©s (18/18).</td>
</tr>
<tr>
  <td><strong>Monitoring</strong></td>
  <td><span class="score-badge score-good">7.5/10</span></td>
  <td><span class="check">âœ“</span> Complet</td>
  <td>Sentry, mÃ©triques thread-safe, K8s probes, rerun profiler, structured JSON logging. Manque: Prometheus export.</td>
</tr>
<tr>
  <td><strong>RÃ©silience</strong></td>
  <td><span class="score-badge score-excellent">9/10</span></td>
  <td><span class="check">âœ“</span> Exemplaire</td>
  <td>Composable policies (Retry + Timeout + Bulkhead + Fallback), Circuit Breaker, @avec_resilience, fallback gracieux.</td>
</tr>
<tr>
  <td><strong>UI/UX</strong></td>
  <td><span class="score-badge score-excellent">8.5/10</span></td>
  <td><span class="check">âœ“</span> Mature</td>
  <td>Design system complet (tokens, thÃ¨me, CSS engine). Dark mode. Tablet mode. A11y WCAG 2.1. PWA. Deep linking.</td>
</tr>
<tr>
  <td><strong>IA</strong></td>
  <td><span class="score-badge score-excellent">8.5/10</span></td>
  <td><span class="check">âœ“</span> Riche</td>
  <td>BaseAIService, streaming, vision/OCR, cache sÃ©mantique, circuit breaker. 15 services IA. Chat contextuel.</td>
</tr>
<tr>
  <td><strong>Documentation</strong></td>
  <td><span class="score-badge score-good">7/10</span></td>
  <td><span class="warn">â–³</span> Bonne base</td>
  <td>Docstrings riches, copilot-instructions, ARCHITECTURE.md, PATTERNS.md. Manque: docs/ UI vide, API docs inline.</td>
</tr>
<tr>
  <td><strong>CI/CD</strong></td>
  <td><span class="score-badge score-excellent">8/10</span></td>
  <td><span class="check">âœ“</span> Complet</td>
  <td>GitHub Actions (lint, test matrix, type-check, security), deploy Streamlit Cloud, dependabot weekly.</td>
</tr>
<tr>
  <td><strong>AccessibilitÃ©</strong></td>
  <td><span class="score-badge score-excellent">8/10</span></td>
  <td><span class="check">âœ“</span> Solide</td>
  <td>WCAG 2.1 AA, RGAA, skip-link, ARIA, contraste, reduced-motion. 35+ attributs aria-*. Rare dans l'Ã©cosystÃ¨me Streamlit.</td>
</tr>
<tr>
  <td><strong>Configuration</strong></td>
  <td><span class="score-badge score-excellent">8.5/10</span></td>
  <td><span class="check">âœ“</span> Robuste</td>
  <td>Pydantic BaseSettings, tri-source, .env.local, validation au dÃ©marrage, messages d'erreur actionnables.</td>
</tr>
<tr>
  <td><strong>PWA / Offline</strong></td>
  <td><span class="score-badge score-good">7/10</span></td>
  <td><span class="check">âœ“</span> OpÃ©rationnel</td>
  <td>Service Worker (249 LOC), IndexedDB, Background Sync, Push Notifications. IcÃ´nes gÃ©nÃ©rÃ©es. Manifeste.</td>
</tr>
</table>

<div class="metric-row" style="margin-top:1.5rem;">
  <div class="metric">
    <div class="metric-value" style="color:var(--green)">12</div>
    <div class="metric-label">Aspects âœ“ Complets</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--yellow)">3</div>
    <div class="metric-label">Aspects â–³ Ã€ renforcer</div>
  </div>
  <div class="metric">
    <div class="metric-value" style="color:var(--red)">0</div>
    <div class="metric-label">Aspects âœ— Manquants</div>
  </div>
</div>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 8. INNOVATIONS -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="innovations">
<h2>8. AmÃ©liorations innovantes pour Streamlit</h2>

<div class="card">
<h3>ğŸš€ Innovations proposÃ©es (adaptÃ©es au contexte Streamlit)</h3>

<div class="card" style="border-left: 3px solid var(--green);">
<h4>1. Streamlit AppTest â€” Tests d'intÃ©gration UI automatisÃ©s</h4>
<p><code>st.testing.AppTest</code> (Streamlit 1.28+) permet de tester les modules UI sans navigateur. CrÃ©er un framework de test qui simule les interactions utilisateur :</p>
<pre><code>from streamlit.testing.v1 import AppTest

def test_accueil_dashboard():
    at = AppTest.from_function(app)
    at.run()
    assert not at.exception
    assert at.title[0].value == "ğŸ  Tableau de bord"
    at.button("RafraÃ®chir").click().run()
    assert at.metric[0].value == "5"</code></pre>
<p><span class="tag tag-green">Impact: +30% confiance qualitÃ©</span> <span class="tag">Effort: Moyen</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--accent);">
<h4>2. st.experimental_data_editor â€” Ã‰dition inline des donnÃ©es</h4>
<p>Remplacer les formulaires complexes par des data editors inline pour :</p>
<ul>
  <li><strong>Inventaire</strong> â€” Ã‰dition directe des quantitÃ©s, dates d'expiration en tableau</li>
  <li><strong>Courses</strong> â€” Cocher/dÃ©cocher les articles, modifier les quantitÃ©s inline</li>
  <li><strong>Planning</strong> â€” Drag & drop simulÃ© avec data_editor pour rÃ©organiser les repas</li>
  <li><strong>Budget</strong> â€” Ã‰dition des montants directement dans le tableau rÃ©capitulatif</li>
</ul>
<p><span class="tag tag-green">Impact: UX considÃ©rablement amÃ©liorÃ©e</span> <span class="tag">Effort: Moyen</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--purple);">
<h4>3. st.connection â€” Connexions DB/API dÃ©claratives</h4>
<p>Migrer vers <code>st.connection</code> pour la gestion des connexions DB :</p>
<pre><code># Remplace: obtenir_contexte_db() + engine singleton
conn = st.connection("postgresql", type="sql")
df = conn.query("SELECT * FROM recettes WHERE actif = true", ttl=300)</code></pre>
<p>Avantages: cache automatique, gestion de pool intÃ©grÃ©e, reconnexion automatique.</p>
<p><span class="tag tag-green">Impact: Simplification + fiabilitÃ©</span> <span class="tag">Effort: Faible</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--yellow);">
<h4>4. Composants multi-pages avec st.Page + modules imbriquÃ©s</h4>
<p>Exploiter <code>st.navigation()</code> en profondeur pour crÃ©er une vraie architecture SPA multi-niveaux :</p>
<ul>
  <li>Pages principales (cuisine, famille, maison) avec sous-pages (recettes, courses, inventaire)</li>
  <li>Breadcrumbs automatiques basÃ©s sur la hiÃ©rarchie de navigation</li>
  <li>Deep linking natif <code>?page=cuisine/recettes&tab=ajout&id=42</code></li>
</ul>
<p><span class="tag tag-green">Impact: Navigation pro</span> <span class="tag">Effort: Ã‰levÃ©</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--pink);">
<h4>5. Streaming IA avec st.write_stream + Markdown progressif</h4>
<p>Ã‰tendre le chat IA contextuel avec un rendu Markdown progressif enrichi :</p>
<ul>
  <li>Suggestions de recettes avec cartes visuelles gÃ©nÃ©rÃ©es au fil du streaming</li>
  <li>Analyse nutritionnelle progressive avec graphiques Plotly insÃ©rÃ©s dans le flux</li>
  <li>RÃ©sumÃ©s hebdomadaires narratifs avec transitions animÃ©es</li>
</ul>
<p><span class="tag tag-green">Impact: ExpÃ©rience IA premium</span> <span class="tag">Effort: Moyen</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--orange);">
<h4>6. Dashboard interactif avec st.plotly_chart(on_select)</h4>
<p>Exploiter les Ã©vÃ©nements de sÃ©lection Plotly pour crÃ©er des dashboards drill-down interactifs :</p>
<ul>
  <li>Graphique budget â†’ clic sur une catÃ©gorie â†’ dÃ©tails des dÃ©penses</li>
  <li>Graphique frÃ©quence recettes â†’ clic â†’ fiche recette</li>
  <li>Heatmap activitÃ©s â†’ clic â†’ dÃ©tails du jour sÃ©lectionnÃ©</li>
</ul>
<p><span class="tag tag-green">Impact: Dashboard pro</span> <span class="tag">Effort: Moyen</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--green);">
<h4>7. st.session_state persistant avec TimestampMixin</h4>
<p>CrÃ©er un <code>PersistentState</code> qui synchronise session_state â†” DB automatiquement :</p>
<pre><code>@persistent_state(model=UserPreference, key="foyer_config", sync_interval=30)
def obtenir_config_foyer():
    return {"nb_adultes": 2, "jules_present": True}
# Auto-sauvegarde en DB toutes les 30 secondes si modifiÃ©</code></pre>
<p>RÃ©sout le problÃ¨me critique des donnÃ©es maison/ en session_state.</p>
<p><span class="tag tag-green">Impact: RÃ©solution d'un problÃ¨me critique</span> <span class="tag">Effort: Moyen</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--accent);">
<h4>8. PrÃ©chargement intelligent avec st.cache_resource</h4>
<p>Utiliser <code>@st.cache_resource</code> pour prÃ©charger les catalogues, modÃ¨les ML lÃ©gers, et caches frÃ©quents au premier chargement global :</p>
<ul>
  <li>Catalogue de plantes, d'entretien, de produits OpenFoodFacts</li>
  <li>ModÃ¨le de prÃ©diction des habitudes alimentaires</li>
  <li>Index de recherche full-text des recettes</li>
</ul>
<p><span class="tag tag-green">Impact: Performance perÃ§ue</span> <span class="tag">Effort: Faible</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--purple);">
<h4>9. Mode collaboratif avec st.experimental_rerun + WebSocket</h4>
<p>CrÃ©er un mode "Courses Ã  deux" oÃ¹ deux utilisateurs voient la mÃªme liste de courses en temps rÃ©el :</p>
<ul>
  <li>Un utilisateur au magasin coche les articles</li>
  <li>L'autre utilisateur Ã  la maison ajoute des articles</li>
  <li>Synchronisation via WebSocket (dÃ©jÃ  prÃ©parÃ© dans <code>courses/realtime.py</code>)</li>
</ul>
<p><span class="tag tag-green">Impact: Feature killer pour une app familiale</span> <span class="tag">Effort: Ã‰levÃ©</span></p>
</div>

<div class="card" style="border-left: 3px solid var(--yellow);">
<h4>10. Analytics IA avec rÃ©sumÃ©s hebdomadaires automatiques</h4>
<p>GÃ©nÃ©rer automatiquement chaque lundi un rÃ©sumÃ© de la semaine :</p>
<ul>
  <li>Repas cuisinÃ©s vs planifiÃ©s (adhÃ©sion au planning)</li>
  <li>DÃ©penses par catÃ©gorie vs budget</li>
  <li>ActivitÃ©s de Jules (dÃ©veloppement, milestones)</li>
  <li>TÃ¢ches mÃ©nage accomplies (gamification score)</li>
  <li>Suggestions personnalisÃ©es pour la semaine suivante</li>
</ul>
<p><span class="tag tag-green">Impact: Valeur ajoutÃ©e IA majeure</span> <span class="tag">Effort: Moyen</span></p>
</div>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 9. CONCEPTS -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="concepts">
<h2>9. VÃ©rification des concepts â€” Adoption dans services et modules</h2>

<div class="card">
<h3>Matrice d'adoption â€” Concepts clÃ©s</h3>
<p>L'objectif est d'adopter les concepts utiles partout, pas de supprimer du code. Voici l'Ã©tat actuel :</p>

<table>
<tr><th>Concept</th><th>DÃ©fini dans</th><th>Services</th><th>Modules</th><th>Action recommandÃ©e</th></tr>
<tr>
  <td><strong>@service_factory</strong></td>
  <td>core/registry</td>
  <td><span class="check">âœ“</span> 51/51</td>
  <td>N/A</td>
  <td>Aucune â€” adoption parfaite</td>
</tr>
<tr>
  <td><strong>BaseService[T]</strong></td>
  <td>services/core/base</td>
  <td><span class="warn">â–³</span> 13/16 CRUD</td>
  <td>N/A</td>
  <td>Migrer Weekend, Sante, Budget vers BaseService</td>
</tr>
<tr>
  <td><strong>BaseAIService</strong></td>
  <td>services/core/base</td>
  <td><span class="warn">â–³</span> 15/16 IA</td>
  <td>N/A</td>
  <td>Migrer ServiceSuggestions vers BaseAIService</td>
</tr>
<tr>
  <td><strong>@avec_cache</strong></td>
  <td>core/decorators</td>
  <td><span class="check">âœ“</span> 50+</td>
  <td><span class="warn">â–³</span> via services</td>
  <td>Ajouter dans ServiceSuggestions</td>
</tr>
<tr>
  <td><strong>@avec_resilience</strong></td>
  <td>core/decorators</td>
  <td><span class="check">âœ“</span> 14 HTTP</td>
  <td>N/A</td>
  <td>Aucune â€” ciblage correct sur HTTP</td>
</tr>
<tr>
  <td><strong>@avec_session_db</strong></td>
  <td>core/decorators</td>
  <td><span class="check">âœ“</span> 50+</td>
  <td>N/A</td>
  <td>Aucune â€” systÃ©matique</td>
</tr>
<tr>
  <td><strong>Event Bus</strong></td>
  <td>services/core/events</td>
  <td><span class="check">âœ“</span> Ã‰missions</td>
  <td><span class="cross">âœ—</span> Pas de souscriptions</td>
  <td>Ajouter souscriptions dans les modules pour rÃ©activitÃ© cross-module</td>
</tr>
<tr>
  <td><strong>Protocols PEP 544</strong></td>
  <td>services/core/base</td>
  <td><span class="warn">â–³</span> DÃ©finis</td>
  <td>â€”</td>
  <td>Utiliser dans les annotations de type pour le duck typing</td>
</tr>
<tr>
  <td><strong>error_boundary</strong></td>
  <td>_framework/</td>
  <td>N/A</td>
  <td><span class="warn">â–³</span> 90%</td>
  <td>Ajouter dans activites, routines onglets, design_system</td>
</tr>
<tr>
  <td><strong>@profiler_rerun</strong></td>
  <td>core/monitoring</td>
  <td>N/A</td>
  <td><span class="check">âœ“</span> 100%</td>
  <td>Aucune â€” adoption parfaite</td>
</tr>
<tr>
  <td><strong>KeyNamespace</strong></td>
  <td>ui/keys</td>
  <td>N/A</td>
  <td><span class="warn">â–³</span> 50%</td>
  <td>Standardiser dans tous les modules Ã  onglets</td>
</tr>
<tr>
  <td><strong>tabs_with_url</strong></td>
  <td>ui/state/url</td>
  <td>N/A</td>
  <td><span class="warn">â–³</span> 65%</td>
  <td>Ajouter dans loto, achats, depenses, batch_cooking</td>
</tr>
<tr>
  <td><strong>@cached_fragment</strong></td>
  <td>ui/fragments</td>
  <td>N/A</td>
  <td><span class="warn">â–³</span> 40%</td>
  <td>Ajouter dans cuisine/ et famille/ (graphiques Plotly)</td>
</tr>
<tr>
  <td><strong>@composant_ui</strong></td>
  <td>ui/registry</td>
  <td>N/A</td>
  <td>N/A (UI)</td>
  <td>Ajouter dans forms, data, filters, layouts, charts, feedback</td>
</tr>
<tr>
  <td><strong>BaseModule / ModuleState</strong></td>
  <td>_framework/</td>
  <td>N/A</td>
  <td><span class="cross">âœ—</span> 5%</td>
  <td>Soit supprimer, soit piloter adoption (1-2 modules cibles)</td>
</tr>
<tr>
  <td><strong>Semantic Tokens</strong></td>
  <td>ui/tokens_semantic</td>
  <td>N/A</td>
  <td><span class="warn">â–³</span> 70%</td>
  <td>Migrer les derniers <code>Couleur.*</code> vers <code>Sem.*</code> dans metrics, tablet</td>
</tr>
<tr>
  <td><strong>CSSEngine batch</strong></td>
  <td>ui/engine/css</td>
  <td>N/A</td>
  <td><span class="check">âœ“</span> Via init</td>
  <td>Aucune â€” injection batch unique via initialiser_app()</td>
</tr>
</table>
</div>

<div class="card">
<h3>Recommandations d'adoption prioritaires</h3>
<ol>
  <li><strong class="severity-high">ServiceSuggestions â†’ BaseAIService</strong> â€” L'anti-pattern le plus critique. Ce service bypass l'architecture IA.</li>
  <li><strong class="severity-high">KeyNamespace dans tous les modules</strong> â€” 50% d'adoption crÃ©e un risque de collisions de clÃ©s en production.</li>
  <li><strong class="severity-medium">BaseService pour Weekend/Sante/Budget</strong> â€” Ces 3 services font du CRUD manuel au lieu de profiter du gÃ©nÃ©rique.</li>
  <li><strong class="severity-medium">@cached_fragment dans cuisine/ et famille/</strong> â€” Les 2 plus gros modules (14 760 LOC) n'utilisent pas ce concept.</li>
  <li><strong class="severity-medium">tabs_with_url partout</strong> â€” 65% â†’ 100% pour le deep linking complet.</li>
  <li><strong class="severity-low">DÃ©cider du sort de BaseModule</strong> â€” 5% d'adoption aprÃ¨s des mois : soit piloter, soit retirer.</li>
</ol>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 10. VS ROADMAP v4 -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="vs-roadmap">
<h2>10. Comparatif vs Roadmap v4</h2>

<div class="card">
<h3>Phases complÃ©tÃ©es selon la Roadmap</h3>
<table>
<tr><th>Phase</th><th>Titre</th><th>Items</th><th>Statut</th><th>Ã‰valuation audit</th></tr>
<tr>
  <td>Phase 3</td><td>Robustesse & complÃ©tude modules</td><td>28+ modules</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">8/10</span> â€” error_boundary + @profiler_rerun dÃ©ployÃ©s. WIP complÃ©tÃ©s. Quelques modules oubliÃ©s.</td>
</tr>
<tr>
  <td>Phase 5</td><td>Infrastructure avancÃ©e & Design System</td><td>6 items</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">8.5/10</span> â€” Dead code supprimÃ©, dark mode tokens, @cached_fragment adoptÃ©, PWA amÃ©liorÃ©e, snapshots UI.</td>
</tr>
<tr>
  <td>Phase 6 (1)</td><td>Innovations Streamlit</td><td>6 items</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">9/10</span> â€” st.write_stream, @st.dialog, @auto_refresh, deep linking, chat IA contextuel, Specification. Excellent.</td>
</tr>
<tr>
  <td>Phase 6 (2)</td><td>Production Hardening</td><td>7 items</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">8.5/10</span> â€” Sanitization, ETag, OpenAPI, Security Headers, CI/CD, BaseService migration, A11y confirmÃ©.</td>
</tr>
<tr>
  <td>Phase 7</td><td>Production Hardening (suite)</td><td>7 items</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">9/10</span> â€” Sentry, Service Worker PWA, JSON structured logging, CI/CD pipeline, tests coverage +78.</td>
</tr>
<tr>
  <td>Phase 10</td><td>Tests & ScalabilitÃ©</td><td>5 items</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">9/10</span> â€” Circuit breaker async, ETag 304, BaseService[T] Ã©tendu, Redis cache distribuÃ©.</td>
</tr>
<tr>
  <td>Rationalisation</td><td>8 patterns dead code supprimÃ©s</td><td>8+5</td>
  <td><span class="check">âœ“</span> TerminÃ©</td>
  <td><span class="score-badge score-excellent">9/10</span> â€” 6000+ LOC supprimÃ©es, 18 N+1 corrigÃ©s. Nettoyage exemplaire.</td>
</tr>
</table>
</div>

<div class="card">
<h3>Items Roadmap restants vs Ã©valuation audit</h3>
<table>
<tr><th>Item Roadmap</th><th>PrioritÃ©</th><th>Ã‰valuation audit</th></tr>
<tr>
  <td>ImplÃ©menter modules maison manquants (322 tests skippÃ©s)</td>
  <td><span class="tag tag-red">HAUTE</span></td>
  <td>ConfirmÃ© â€” modules <code>projets, scan_factures, utils, eco_tips, energie, meubles</code> non implÃ©mentÃ©s en UI. Les services existent pour certains (<code>projets_service</code>).</td>
</tr>
<tr>
  <td>Coverage fichiers 0%</td>
  <td><span class="tag tag-red">HAUTE</span></td>
  <td>ConfirmÃ© â€” <code>barcode.py</code> (288), <code>generation.py</code> (248), <code>plan_jardin.py</code> (240), <code>rapports.py</code> (200) sans couverture.</td>
</tr>
<tr>
  <td>DÃ©ployer SQL sur Supabase</td>
  <td><span class="tag tag-red">HAUTE</span></td>
  <td>Non vÃ©rifiable via l'audit code â€” nÃ©cessite vÃ©rification manuelle.</td>
</tr>
<tr>
  <td>Activer Redis en production</td>
  <td><span class="tag tag-yellow">MOYENNE</span></td>
  <td>Code prÃªt (<code>CacheRedis</code> + orchestrateur auto-detect). Juste besoin de configurer <code>REDIS_URL</code>.</td>
</tr>
<tr>
  <td>Lazy load images recettes</td>
  <td><span class="tag tag-yellow">MOYENNE</span></td>
  <td>Non implÃ©mentÃ©. Peut utiliser <code>loading="lazy"</code> dans les balises <code>&lt;img&gt;</code> gÃ©nÃ©rÃ©es.</td>
</tr>
<tr>
  <td>Reconnaissance vocale</td>
  <td><span class="tag tag-green">BASSE</span></td>
  <td>Non commencÃ©. Possible via <code>st.audio_input</code> + Whisper API.</td>
</tr>
</table>
</div>

<div class="card">
<h3>Ã‰carts non couverts par la Roadmap v4</h3>
<p>L'audit a identifiÃ© des problÃ¨mes importants <strong>non mentionnÃ©s</strong> dans la Roadmap v4 :</p>
<table>
<tr><th>ProblÃ¨me</th><th>Impact</th><th>DÃ©tail</th></tr>
<tr>
  <td><strong>DonnÃ©es maison/ en session_state</strong></td>
  <td><span class="tag tag-red">CRITIQUE</span></td>
  <td>entretien, jardin, charges stockent en session_state (perdues au rechargement). Les services existent mais ne sont pas utilisÃ©s pour la persistance.</td>
</tr>
<tr>
  <td><strong>ServiceSuggestions bypass BaseAIService</strong></td>
  <td><span class="tag tag-red">HAUTE</span></td>
  <td>Utilise ClientIA + RateLimitIA + CacheIA manuellement. Pas de circuit breaker.</td>
</tr>
<tr>
  <td><strong>Pas de tests API</strong></td>
  <td><span class="tag tag-red">HAUTE</span></td>
  <td>32 endpoints sans aucun test automatisÃ©. Risque de rÃ©gression Ã©levÃ©.</td>
</tr>
<tr>
  <td><strong>Faille sÃ©curitÃ© rate limiting</strong></td>
  <td><span class="tag tag-yellow">MOYENNE</span></td>
  <td>JWT unsigned decode dans le middleware rate limiting. Forgeable par un attaquant.</td>
</tr>
<tr>
  <td><strong>/metrics endpoint non protÃ©gÃ©</strong></td>
  <td><span class="tag tag-yellow">MOYENNE</span></td>
  <td>DonnÃ©es opÃ©rationnelles exposÃ©es publiquement sans auth.</td>
</tr>
<tr>
  <td><strong>KeyNamespace Ã  50% d'adoption</strong></td>
  <td><span class="tag tag-yellow">MOYENNE</span></td>
  <td>Risque de collisions de clÃ©s widget en production.</td>
</tr>
<tr>
  <td><strong>@composant_ui sous-adoptÃ©</strong></td>
  <td><span class="tag tag-green">BASSE</span></td>
  <td>Le Design System catalogue ne reflÃ¨te qu'une fraction des composants disponibles.</td>
</tr>
</table>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- 11. ROADMAP v5 -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section id="roadmap-new">
<h2>11. Roadmap proposÃ©e v5</h2>

<div class="card">
<h3>ğŸ”´ Phase 1 â€” Corrections critiques (Semaine 1-2)</h3>
<div class="roadmap-item"><div class="roadmap-num">1</div><div><strong>Persister donnÃ©es maison/ en DB</strong> â€” Connecter entretien, jardin, charges aux services existants pour persistance SQLAlchemy au lieu de session_state</div></div>
<div class="roadmap-item"><div class="roadmap-num">2</div><div><strong>Migrer ServiceSuggestions â†’ BaseAIService</strong> â€” Supprimer l'usage direct de ClientIA/RateLimitIA/CacheIA, hÃ©riter BaseAIService</div></div>
<div class="roadmap-item"><div class="roadmap-num">3</div><div><strong>Corriger faille JWT rate limiting</strong> â€” Utiliser <code>valider_token()</code> au lieu de decode unsigned dans le middleware</div></div>
<div class="roadmap-item"><div class="roadmap-num">4</div><div><strong>ProtÃ©ger /metrics</strong> â€” Ajouter <code>require_role("admin")</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">5</div><div><strong>Tests API</strong> â€” CrÃ©er suite de tests d'intÃ©gration pour les 32 endpoints (pytest + httpx AsyncClient)</div></div>
</div>

<div class="card">
<h3>ğŸŸ¡ Phase 2 â€” HomogÃ©nÃ©isation des patterns (Semaine 3-4)</h3>
<div class="roadmap-item"><div class="roadmap-num">6</div><div><strong>KeyNamespace 50% â†’ 100%</strong> â€” Ajouter dans courses, planificateur_repas, entretien, jardin, planning, parametres, design_system</div></div>
<div class="roadmap-item"><div class="roadmap-num">7</div><div><strong>tabs_with_url 65% â†’ 100%</strong> â€” Ajouter dans loto, achats_famille, depenses, batch_cooking, design_system</div></div>
<div class="roadmap-item"><div class="roadmap-num">8</div><div><strong>error_boundary manquants</strong> â€” Ajouter dans activites onglets, routines onglets, design_system, paris par onglet</div></div>
<div class="roadmap-item"><div class="roadmap-num">9</div><div><strong>BaseService pour Weekend/Sante/Budget</strong> â€” Migrer vers BaseService[T] pour CRUD uniforme</div></div>
<div class="roadmap-item"><div class="roadmap-num">10</div><div><strong>@cached_fragment dans cuisine/ et famille/</strong> â€” Ajouter pour les graphiques Plotly et calculs lourds</div></div>
</div>

<div class="card">
<h3>âœ… Phase 3 â€” Innovations Streamlit (Semaine 5-8) <span class="tag tag-green">TERMINÃ‰E</span></h3>
<div class="roadmap-item"><div class="roadmap-num">11</div><div>âœ… <strong>st.testing.AppTest</strong> â€” Framework de tests UI automatisÃ©s pour les modules clÃ©s â†’ <code>tests/ui_app/</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">12</div><div>âœ… <strong>st.data_editor</strong> â€” Ã‰dition inline pour inventaire, courses, budget â†’ <code>src/ui/components/data_editors.py</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">13</div><div>âœ… <strong>RÃ©sumÃ© hebdomadaire IA</strong> â€” GÃ©nÃ©ration automatique chaque lundi (repas, budget, activitÃ©s, tÃ¢ches) â†’ <code>src/services/famille/resume_hebdo.py</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">14</div><div>âœ… <strong>Dashboard drill-down Plotly</strong> â€” Graphiques interactifs avec <code>on_select</code> pour navigation contextuelle â†’ <code>src/ui/components/plotly_drilldown.py</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">15</div><div>âœ… <strong>PersistentState</strong> â€” Sync session_state â†” DB automatique pour rÃ©soudre dÃ©finitivement le problÃ¨me de persistance â†’ <code>src/core/state/persistent.py</code></div></div>
</div>

<div class="card">
<h3>ğŸ”µ Phase 4 â€” Nettoyage & documentation (Semaine 9-10)</h3>
<div class="roadmap-item"><div class="roadmap-num">16</div><div><strong>DÃ©cider BaseModule</strong> â€” Piloter adoption sur 2 modules (design_system, parametres) ou retirer le pattern</div></div>
<div class="roadmap-item"><div class="roadmap-num">17</div><div><strong>@composant_ui partout</strong> â€” Enregistrer tous les composants UI dans le registre pour le catalogue Design System</div></div>
<div class="roadmap-item"><div class="roadmap-num">18</div><div><strong>Splitter fichiers >500 LOC</strong> â€” courses/utils.py, planificateur/utils.py, jardin/onglets.py, planning/components.py, paris_crud_service.py</div></div>
<div class="roadmap-item"><div class="roadmap-num">19</div><div><strong>Documenter docs/ui/</strong> â€” Remplir le dossier vide avec guides des composants, patterns, et conventions</div></div>
<div class="roadmap-item"><div class="roadmap-num">20</div><div><strong>TimestampMixin models</strong> â€” CrÃ©er mixin abstract pour id/cree_le/modifie_le, rÃ©duire boilerplate 19 fichiers</div></div>
</div>

<div class="card">
<h3>âšª Phase 5 â€” Modules manquants (Semaine 11-14)</h3>
<div class="roadmap-item"><div class="roadmap-num">21</div><div><strong>ImplÃ©menter modules maison/ manquants</strong> â€” projets (service existe), eco_tips, energie, meubles</div></div>
<div class="roadmap-item"><div class="roadmap-num">22</div><div><strong>Coverage fichiers 0%</strong> â€” Tests pour barcode.py, generation.py, plan_jardin.py, rapports.py</div></div>
<div class="roadmap-item"><div class="roadmap-num">23</div><div><strong>Lazy load images recettes</strong> â€” <code>loading="lazy"</code> dans les balises <code>&lt;img&gt;</code></div></div>
<div class="roadmap-item"><div class="roadmap-num">24</div><div><strong>Activer Redis en production</strong> â€” Configurer REDIS_URL, valider orchestrateur multi-niveaux</div></div>
<div class="roadmap-item"><div class="roadmap-num">25</div><div><strong>Mode collaboratif courses</strong> â€” WebSocket sync pour liste de courses Ã  deux</div></div>
</div>
</div>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- ANNEXES -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<section>
<h2>Annexes</h2>

<details>
<summary>ğŸ“ Inventaire complet des fichiers par couche</summary>
<div class="detail-content">
<table>
<tr><th>Couche</th><th>Sous-package</th><th>Fichiers</th><th>LOC</th></tr>
<tr><td rowspan="7">src/api/</td><td>racine</td><td>4</td><td>719</td></tr>
<tr><td>routes/</td><td>7</td><td>1 334</td></tr>
<tr><td>schemas/</td><td>8</td><td>427</td></tr>
<tr><td>utils/</td><td>6</td><td>580</td></tr>
<tr><td>rate_limiting/</td><td>7</td><td>647</td></tr>
<tr><td>README.md</td><td>1</td><td>255</td></tr>
<tr><td><strong>Total API</strong></td><td><strong>34</strong></td><td><strong>3 828</strong></td></tr>

<tr><td rowspan="13">src/core/</td><td>racine (utilitaires)</td><td>11</td><td>2 310</td></tr>
<tr><td>ai/</td><td>6</td><td>1 310</td></tr>
<tr><td>caching/</td><td>8</td><td>940</td></tr>
<tr><td>config/</td><td>4</td><td>695</td></tr>
<tr><td>date_utils/</td><td>5</td><td>327</td></tr>
<tr><td>db/</td><td>5</td><td>640</td></tr>
<tr><td>decorators/</td><td>5</td><td>450</td></tr>
<tr><td>models/</td><td>20</td><td>4 500</td></tr>
<tr><td>monitoring/</td><td>6</td><td>860</td></tr>
<tr><td>observability/</td><td>2</td><td>225</td></tr>
<tr><td>resilience/</td><td>2</td><td>305</td></tr>
<tr><td>state/</td><td>4</td><td>605</td></tr>
<tr><td>validation/</td><td>12</td><td>680</td></tr>

<tr><td rowspan="9">src/services/</td><td>core/</td><td>59</td><td>8 530</td></tr>
<tr><td>cuisine/</td><td>52</td><td>8 700</td></tr>
<tr><td>famille/</td><td>19</td><td>4 430</td></tr>
<tr><td>integrations/</td><td>26</td><td>4 530</td></tr>
<tr><td>inventaire/</td><td>7</td><td>1 040</td></tr>
<tr><td>jeux/</td><td>15</td><td>5 740</td></tr>
<tr><td>maison/</td><td>13</td><td>2 960</td></tr>
<tr><td>rapports/</td><td>7</td><td>1 570</td></tr>
<tr><td>racine</td><td>2</td><td>72</td></tr>

<tr><td rowspan="10">src/modules/</td><td>_framework/</td><td>6</td><td>1 333</td></tr>
<tr><td>accueil/</td><td>6</td><td>826</td></tr>
<tr><td>cuisine/</td><td>44</td><td>9 970</td></tr>
<tr><td>famille/</td><td>26</td><td>4 789</td></tr>
<tr><td>jeux/</td><td>25</td><td>4 897</td></tr>
<tr><td>maison/</td><td>27</td><td>5 524</td></tr>
<tr><td>parametres/</td><td>9</td><td>1 291</td></tr>
<tr><td>planning/</td><td>12</td><td>2 709</td></tr>
<tr><td>utilitaires/</td><td>13</td><td>3 599</td></tr>
<tr><td>design_system + racine</td><td>2</td><td>244</td></tr>

<tr><td rowspan="7">src/ui/</td><td>racine (tokens, theme, a11y, etc.)</td><td>10</td><td>1 842</td></tr>
<tr><td>components/</td><td>14</td><td>2 676</td></tr>
<tr><td>engine/</td><td>2</td><td>364</td></tr>
<tr><td>feedback/</td><td>5</td><td>687</td></tr>
<tr><td>layout/</td><td>6</td><td>442</td></tr>
<tr><td>views/ + integrations/ + tablet/ + etc.</td><td>28</td><td>3 387</td></tr>
<tr><td><strong>Total UI</strong></td><td><strong>65</strong></td><td><strong>9 398</strong></td></tr>
</table>
</div>
</details>

<details>
<summary>ğŸ—ï¸ 51 Services enregistrÃ©s via @service_factory</summary>
<div class="detail-content">
<table>
<tr><th>#</th><th>Factory</th><th>Package</th><th>BaseService[T]</th><th>BaseAIService</th></tr>
<tr><td>1</td><td>recettes</td><td>cuisine/recettes</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>2</td><td>import_recettes</td><td>cuisine/recettes</td><td>â€”</td><td><span class="check">âœ“</span></td></tr>
<tr><td>3-6</td><td>planning, rappels, recurrence, templates</td><td>cuisine/planning</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>7-8</td><td>courses, courses_intelligentes</td><td>cuisine/courses</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>9-10</td><td>suggestions, predictions</td><td>cuisine/suggestions</td><td>â€”</td><td><span class="warn">â–³</span></td></tr>
<tr><td>11</td><td>batch_cooking</td><td>cuisine/batch_cooking</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>12</td><td>inventaire</td><td>inventaire</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>13-22</td><td>activites, achats, routines, weekend, weekend_ai, sante, suivi_perso, jules, jules_ai, cal_planning</td><td>famille</td><td><span class="warn">â–³</span></td><td><span class="warn">â–³</span></td></tr>
<tr><td>23</td><td>budget</td><td>famille/budget</td><td>â€”</td><td>â€”</td></tr>
<tr><td>24</td><td>calendrier</td><td>famille/calendrier</td><td>â€”</td><td>â€”</td></tr>
<tr><td>25-29</td><td>jardin, entretien, projets, depenses_crud, hub_data</td><td>maison</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>30-40</td><td>jeux_ai, backtest, prediction, paris_crud, loto_crud, loto_data, football_data, scheduler, sync, series, notif_jeux</td><td>jeux</td><td><span class="check">âœ“</span></td><td><span class="check">âœ“</span></td></tr>
<tr><td>41-46</td><td>codes_barres, facture_ocr, openfoodfacts, meteo, garmin, sync_temps_reel</td><td>integrations</td><td>â€”</td><td><span class="warn">â–³</span></td></tr>
<tr><td>47-48</td><td>rapports_pdf, export_pdf</td><td>rapports</td><td>â€”</td><td>â€”</td></tr>
<tr><td>49-50</td><td>authentification, historique_actions</td><td>core/utilisateur</td><td>â€”</td><td>â€”</td></tr>
<tr><td>51</td><td>accueil_data</td><td>racine</td><td>â€”</td><td>â€”</td></tr>
</table>
</div>
</details>

<details>
<summary>ğŸ¯ Top 25 fichiers Ã  refactorer (par prioritÃ©)</summary>
<div class="detail-content">
<table>
<tr><th>#</th><th>Fichier</th><th>LOC</th><th>Action</th></tr>
<tr><td>1</td><td>services/cuisine/suggestions/service.py</td><td>442</td><td>Migrer vers BaseAIService</td></tr>
<tr><td>2</td><td>modules/maison/jardin/onglets.py</td><td>627</td><td>Splitter (comme entretien fait)</td></tr>
<tr><td>3</td><td>modules/cuisine/courses/utils.py</td><td>627</td><td>Splitter par domaine</td></tr>
<tr><td>4</td><td>modules/cuisine/planificateur_repas/utils.py</td><td>604</td><td>Splitter par domaine</td></tr>
<tr><td>5</td><td>modules/cuisine/batch_cooking_utils.py</td><td>598</td><td>DÃ©placer dans batch_cooking_detaille/</td></tr>
<tr><td>6</td><td>services/jeux/_internal/paris_crud_service.py</td><td>607</td><td>Splitter en mixins thÃ©matiques</td></tr>
<tr><td>7</td><td>modules/utilitaires/rapports.py</td><td>554</td><td>Splitter si possible</td></tr>
<tr><td>8</td><td>modules/planning/calendrier/components.py</td><td>500</td><td>Splitter par composant</td></tr>
<tr><td>9</td><td>core/models/jeux.py</td><td>430</td><td>Splitter paris.py + loto.py</td></tr>
<tr><td>10</td><td>core/models/temps_entretien.py</td><td>463</td><td>Splitter entretien + jardin_plantes</td></tr>
<tr><td>11</td><td>api/rate_limiting/middleware.py</td><td>56</td><td>Fix unsigned JWT decode</td></tr>
<tr><td>12</td><td>services/famille/weekend.py</td><td>303</td><td>HÃ©riter BaseService[WeekendActivity]</td></tr>
<tr><td>13</td><td>services/famille/sante.py</td><td>300</td><td>HÃ©riter BaseService[HealthMetric]</td></tr>
<tr><td>14</td><td>services/famille/budget/service.py</td><td>312</td><td>HÃ©riter BaseService</td></tr>
<tr><td>15</td><td>modules/famille/activites.py</td><td>312</td><td>Ajouter error_boundary par onglet</td></tr>
<tr><td>16</td><td>modules/famille/routines.py</td><td>392</td><td>Ajouter error_boundary par onglet</td></tr>
<tr><td>17</td><td>modules/jeux/scraper_loto.py</td><td>374</td><td>DÃ©placer dans loto/</td></tr>
<tr><td>18</td><td>core/state/slices.py</td><td>279</td><td>RÃ©duire boilerplate backward-compat</td></tr>
<tr><td>19</td><td>modules/parametres/utils.py</td><td>368</td><td>Splitter par domaine</td></tr>
<tr><td>20</td><td>core/db/migrations.py</td><td>256</td><td>Fix import errors â†’ errors_base</td></tr>
<tr><td>21</td><td>ui/system/__init__.py</td><td>13</td><td>Fusionner dans engine/ ou enrichir</td></tr>
<tr><td>22</td><td>services/core/base/mixins/</td><td>0</td><td>Supprimer dossier vide</td></tr>
<tr><td>23</td><td>ui/docs/</td><td>0</td><td>Documenter ou supprimer</td></tr>
<tr><td>24</td><td>modules/utilitaires/barcode_utils.py</td><td>355</td><td>Fusionner/clarifier vs barcode/</td></tr>
<tr><td>25</td><td>modules/jeux/utils.py</td><td>222</td><td>Splitter loto/utils + paris/utils</td></tr>
</table>
</div>
</details>
</section>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- FOOTER -->
<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<footer style="margin-top:3rem; padding-top:1rem; border-top:1px solid var(--border); text-align:center; color:var(--text-dim);">
<p>Rapport gÃ©nÃ©rÃ© le 24 fÃ©vrier 2026 â€” Audit complet v4 du projet Assistant Matanne</p>
<p>519 fichiers Python Â· 100 758 LOC Â· 51 services Â· 8 150 tests Â· Score global: <strong style="color:var(--green);">8.2/10</strong></p>
</footer>

</body>
</html>
