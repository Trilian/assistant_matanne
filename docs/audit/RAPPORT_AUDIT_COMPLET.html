<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rapport d'Audit Complet â€” Assistant Matanne v10</title>
    <style>
        :root {
            --bg: #0d1117;
            --bg-card: #161b22;
            --bg-card-alt: #1c2333;
            --border: #30363d;
            --text: #e6edf3;
            --text-muted: #8b949e;
            --accent: #58a6ff;
            --accent-hover: #79c0ff;
            --green: #3fb950;
            --green-bg: rgba(63,185,80,.12);
            --yellow: #d29922;
            --yellow-bg: rgba(210,153,34,.12);
            --red: #f85149;
            --red-bg: rgba(248,81,73,.12);
            --orange: #db6d28;
            --purple: #bc8cff;
            --pink: #f778ba;
            --radius: 8px;
            --shadow: 0 2px 8px rgba(0,0,0,.3);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 0;
        }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }

        /* Header */
        .hero {
            background: linear-gradient(135deg, #101820 0%, #1a2332 50%, #0d1b2a 100%);
            border-bottom: 1px solid var(--border);
            padding: 3rem 2rem;
            text-align: center;
        }
        .hero h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, var(--accent), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: .5rem;
        }
        .hero .subtitle { color: var(--text-muted); font-size: 1.1rem; }
        .hero .date { color: var(--accent); font-size: 0.9rem; margin-top: .5rem; }

        /* Navigation */
        .toc {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(13,17,23,.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: .75rem 2rem;
            display: flex;
            flex-wrap: wrap;
            gap: .5rem;
            justify-content: center;
        }
        .toc a {
            color: var(--text-muted);
            text-decoration: none;
            padding: .35rem .75rem;
            border-radius: var(--radius);
            font-size: .85rem;
            transition: all .2s;
        }
        .toc a:hover { background: var(--bg-card); color: var(--accent); }

        /* Sections */
        section { margin-bottom: 3rem; }
        h2 {
            font-size: 1.8rem;
            color: var(--accent);
            border-bottom: 2px solid var(--border);
            padding-bottom: .5rem;
            margin-bottom: 1.5rem;
        }
        h3 { font-size: 1.3rem; color: var(--text); margin: 1.5rem 0 .75rem; }
        h4 { font-size: 1.1rem; color: var(--purple); margin: 1rem 0 .5rem; }

        /* Cards */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
        }
        .card-alt { background: var(--bg-card-alt); }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .card-title { font-size: 1.2rem; font-weight: 600; }

        /* Scores */
        .score-badge {
            display: inline-flex;
            align-items: center;
            gap: .4rem;
            padding: .25rem .75rem;
            border-radius: 20px;
            font-weight: 700;
            font-size: .95rem;
        }
        .score-excellent { background: var(--green-bg); color: var(--green); border: 1px solid var(--green); }
        .score-good { background: rgba(88,166,255,.12); color: var(--accent); border: 1px solid var(--accent); }
        .score-average { background: var(--yellow-bg); color: var(--yellow); border: 1px solid var(--yellow); }
        .score-poor { background: var(--red-bg); color: var(--red); border: 1px solid var(--red); }

        /* Score bar */
        .score-bar-container {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: .5rem 0;
        }
        .score-bar {
            flex: 1;
            height: 10px;
            background: var(--border);
            border-radius: 5px;
            overflow: hidden;
        }
        .score-bar-fill {
            height: 100%;
            border-radius: 5px;
            transition: width .5s ease;
        }
        .score-bar-fill.green { background: linear-gradient(90deg, #238636, #3fb950); }
        .score-bar-fill.blue { background: linear-gradient(90deg, #1f6feb, #58a6ff); }
        .score-bar-fill.yellow { background: linear-gradient(90deg, #9e6a03, #d29922); }
        .score-bar-fill.red { background: linear-gradient(90deg, #da3633, #f85149); }
        .score-label { font-size: .85rem; min-width: 45px; text-align: right; font-weight: 600; }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            font-size: .9rem;
        }
        th, td {
            padding: .6rem .8rem;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }
        th {
            background: var(--bg-card-alt);
            color: var(--accent);
            font-weight: 600;
            position: sticky;
            top: 48px;
        }
        tr:hover { background: rgba(88,166,255,.04); }

        /* Grid */
        .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
        @media (max-width: 1024px) {
            .grid-3, .grid-4 { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 768px) {
            .grid-2, .grid-3, .grid-4 { grid-template-columns: 1fr; }
        }

        /* Tags */
        .tag {
            display: inline-block;
            padding: .15rem .5rem;
            border-radius: 12px;
            font-size: .75rem;
            font-weight: 500;
            margin: .15rem;
        }
        .tag-done { background: var(--green-bg); color: var(--green); }
        .tag-partial { background: var(--yellow-bg); color: var(--yellow); }
        .tag-todo { background: var(--red-bg); color: var(--red); }
        .tag-new { background: rgba(188,140,255,.12); color: var(--purple); }
        .tag-info { background: rgba(88,166,255,.12); color: var(--accent); }

        /* Feature list */
        .feature-list { list-style: none; padding: 0; }
        .feature-list li {
            padding: .5rem .75rem;
            border-left: 3px solid var(--border);
            margin-bottom: .4rem;
            font-size: .9rem;
            transition: border-color .2s;
        }
        .feature-list li:hover { border-left-color: var(--accent); }
        .feature-list li.exists { border-left-color: var(--green); }
        .feature-list li.exists::before { content: "âœ… "; }
        .feature-list li.partial { border-left-color: var(--yellow); }
        .feature-list li.partial::before { content: "ğŸŸ¡ "; }
        .feature-list li.missing { border-left-color: var(--red); }
        .feature-list li.missing::before { content: "ğŸ”´ "; }
        .feature-list li.idea { border-left-color: var(--purple); }
        .feature-list li.idea::before { content: "ğŸ’¡ "; }

        /* Roadmap timeline */
        .timeline { position: relative; padding-left: 2rem; }
        .timeline::before {
            content: '';
            position: absolute;
            left: 8px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }
        .timeline-item {
            position: relative;
            margin-bottom: 1.5rem;
            padding: 1rem 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -1.65rem;
            top: 1.2rem;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--accent);
            border: 2px solid var(--bg);
        }
        .timeline-item.done::before { background: var(--green); }
        .timeline-item.current::before { background: var(--yellow); box-shadow: 0 0 8px var(--yellow); }
        .timeline-item.future::before { background: var(--text-muted); }
        .timeline-label {
            font-size: .8rem;
            color: var(--text-muted);
            margin-bottom: .25rem;
        }

        /* Collapsible */
        details { margin: .5rem 0; }
        summary {
            cursor: pointer;
            padding: .5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            color: var(--accent);
            font-weight: 500;
        }
        summary:hover { background: var(--bg-card-alt); }
        details[open] summary { border-bottom-left-radius: 0; border-bottom-right-radius: 0; }
        details > div {
            padding: 1rem;
            border: 1px solid var(--border);
            border-top: none;
            border-radius: 0 0 var(--radius) var(--radius);
            background: var(--bg-card);
        }

        /* Metric big number */
        .metric {
            text-align: center;
            padding: 1.5rem 1rem;
        }
        .metric .number {
            font-size: 2.5rem;
            font-weight: 800;
            line-height: 1;
        }
        .metric .label {
            font-size: .85rem;
            color: var(--text-muted);
            margin-top: .25rem;
        }

        /* Comparison */
        .compare-before { color: var(--text-muted); text-decoration: line-through; }
        .compare-arrow { color: var(--yellow); margin: 0 .5rem; }
        .compare-after { color: var(--green); font-weight: 600; }

        /* Print */
        @media print {
            body { background: #fff; color: #000; }
            .toc { display: none; }
            .card { border: 1px solid #ccc; box-shadow: none; }
        }

        /* Smooth scrolling */
        html { scroll-behavior: smooth; }

        /* Flow diagram */
        .flow-box {
            display: inline-block;
            padding: .4rem .8rem;
            background: var(--bg-card-alt);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: .85rem;
            margin: .2rem;
        }
        .flow-arrow { color: var(--accent); font-size: 1.2rem; margin: 0 .3rem; vertical-align: middle; }
    </style>
</head>
<body>

<!-- ============ HERO ============ -->
<div class="hero">
    <h1>ğŸ“Š Rapport d'Audit Complet</h1>
    <div class="subtitle">Assistant Matanne â€” Application Streamlit de Gestion Familiale</div>
    <div class="date">26 fÃ©vrier 2026 â€” Comparatif ROADMAP v10</div>
</div>

<!-- ============ TOC ============ -->
<nav class="toc">
    <a href="#resume">ğŸ“‹ RÃ©sumÃ©</a>
    <a href="#metriques">ğŸ“Š MÃ©triques</a>
    <a href="#notes">ğŸ¯ Notes</a>
    <a href="#api">ğŸ”Œ API</a>
    <a href="#core">âš™ï¸ Core</a>
    <a href="#modules">ğŸ“¦ Modules</a>
    <a href="#services">ğŸ”§ Services</a>
    <a href="#ui">ğŸ¨ UI</a>
    <a href="#app">ğŸ  App.py</a>
    <a href="#flux">ğŸ”„ Flux de donnÃ©es</a>
    <a href="#fonctionnalites">ğŸ’¡ FonctionnalitÃ©s</a>
    <a href="#roadmap-compare">ğŸ—ºï¸ Roadmap v10</a>
    <a href="#roadmap-next">ğŸš€ Prochaines Ã©tapes</a>
</nav>

<div class="container">

<!-- ============ RÃ‰SUMÃ‰ EXÃ‰CUTIF ============ -->
<section id="resume">
    <h2>ğŸ“‹ RÃ©sumÃ© ExÃ©cutif</h2>
    <div class="card">
        <p>L'<strong>Assistant Matanne</strong> est une application Streamlit de gestion familiale complÃ¨te, couvrant cuisine, famille, maison, jeux, planning et utilitaires. Le projet repose sur une architecture modulaire avec <strong>~440 fichiers Python</strong>, <strong>~119 000 LOC</strong>, <strong>95 tables PostgreSQL</strong>, <strong>30+ services</strong>, et une API FastAPI distincte.</p>
        <br>
        <p>L'analyse porte sur les dossiers <code>src/api</code>, <code>src/core</code>, <code>src/modules</code>, <code>src/services</code>, <code>src/ui</code> et le fichier <code>app.py</code>.</p>
    </div>

    <!-- Global Score -->
    <div class="card" style="text-align: center; padding: 2rem;">
        <div style="font-size: 1rem; color: var(--text-muted); margin-bottom: .5rem;">NOTE GLOBALE DU PROJET</div>
        <div style="font-size: 5rem; font-weight: 800; background: linear-gradient(135deg, var(--green), var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">8.0 / 10</div>
        <div style="margin-top: .5rem; font-size: 1rem; color: var(--text-muted);">Projet mature, bien structurÃ©, prÃªt pour production avec quelques axes d'amÃ©lioration</div>
    </div>

    <div class="grid-4">
        <div class="card metric">
            <div class="number" style="color: var(--accent);">674</div>
            <div class="label">Fichiers Python</div>
        </div>
        <div class="card metric">
            <div class="number" style="color: var(--green);">~119K</div>
            <div class="label">Lignes de code</div>
        </div>
        <div class="card metric">
            <div class="number" style="color: var(--purple);">8 150</div>
            <div class="label">Tests collectÃ©s</div>
        </div>
        <div class="card metric">
            <div class="number" style="color: var(--yellow);">95</div>
            <div class="label">Tables SQL</div>
        </div>
    </div>

    <div class="grid-3">
        <div class="card metric">
            <div class="number" style="color: var(--green);">405</div>
            <div class="label">Fichiers de test</div>
        </div>
        <div class="card metric">
            <div class="number" style="color: var(--accent);">30+</div>
            <div class="label">Services enregistrÃ©s</div>
        </div>
        <div class="card metric">
            <div class="number" style="color: var(--purple);">14</div>
            <div class="label">Ã‰vÃ©nements typÃ©s</div>
        </div>
    </div>
</section>

<!-- ============ MÃ‰TRIQUES PAR DOSSIER ============ -->
<section id="metriques">
    <h2>ğŸ“Š MÃ©triques par Dossier</h2>
    <table>
        <thead>
            <tr>
                <th>Dossier</th>
                <th>Fichiers .py</th>
                <th>Lignes de code</th>
                <th>% du projet</th>
                <th>Sous-packages</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>src/services/</strong></td>
                <td>215</td>
                <td>44 201</td>
                <td>37.2%</td>
                <td>20 (core, cuisine, famille, integrations, inventaire, jeux, maison, rapports)</td>
            </tr>
            <tr>
                <td><strong>src/modules/</strong></td>
                <td>227</td>
                <td>32 635</td>
                <td>27.5%</td>
                <td>27 (accueil, cuisine, famille, jeux, maison, parametres, planning, utilitaires)</td>
            </tr>
            <tr>
                <td><strong>src/ui/</strong></td>
                <td>90</td>
                <td>19 646</td>
                <td>16.5%</td>
                <td>11 (components, docs, engine, feedback, grid, integrations, layout, state, tablet, testing, views)</td>
            </tr>
            <tr>
                <td><strong>src/core/</strong></td>
                <td>96</td>
                <td>16 161</td>
                <td>13.6%</td>
                <td>11 (ai, caching, config, date_utils, db, decorators, models, monitoring, observability, resilience, state, validation)</td>
            </tr>
            <tr>
                <td><strong>src/api/</strong></td>
                <td>44</td>
                <td>6 032</td>
                <td>5.1%</td>
                <td>4 (rate_limiting, routes, schemas, utils)</td>
            </tr>
            <tr>
                <td><strong>src/app.py</strong></td>
                <td>1</td>
                <td>195</td>
                <td>0.2%</td>
                <td>â€”</td>
            </tr>
            <tr style="font-weight: 700; background: var(--bg-card-alt);">
                <td><strong>TOTAL</strong></td>
                <td><strong>674</strong></td>
                <td><strong>118 870</strong></td>
                <td><strong>100%</strong></td>
                <td><strong>73</strong></td>
            </tr>
        </tbody>
    </table>
</section>

<!-- ============ NOTES PAR DOSSIER ============ -->
<section id="notes">
    <h2>ğŸ¯ Notes par Dossier</h2>

    <div class="grid-2">
        <div class="card">
            <div class="card-header">
                <span class="card-title">âš™ï¸ src/core/</span>
                <span class="score-badge score-excellent">8.6 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill green" style="width: 86%"></div></div>
                <span class="score-label">86%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">Infrastructure solide : PEP 562 lazy loading, cache multi-niveaux avec Redis, rÃ©silience composable, modÃ¨les ORM modulaires (22 fichiers), configuration Pydantic multi-source, monitoring Sentry, observabilitÃ© avec correlation_id.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ”Œ src/api/</span>
                <span class="score-badge score-excellent">8.5 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill green" style="width: 85%"></div></div>
                <span class="score-label">85%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">API FastAPI complÃ¨te : 11 routes, JWT authentication, rate limiting Redis, security headers OWASP, ETag caching, pagination, versioning, WebSocket pour courses collaboratif, OpenAPI Swagger.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ”§ src/services/</span>
                <span class="score-badge score-excellent">8.3 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill green" style="width: 83%"></div></div>
                <span class="score-label">83%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">Couche mÃ©tier riche : BaseAIService avec rate limiting + cache, @service_factory singleton, BaseService[T] CRUD gÃ©nÃ©rique, event bus pub/sub, intÃ©grations (Garmin, Google Calendar, mÃ©tÃ©o, images IA, PWA).</p>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ¨ src/ui/</span>
                <span class="score-badge score-good">8.0 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill blue" style="width: 80%"></div></div>
                <span class="score-label">80%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">Design system complet : tokens sÃ©mantiques + dark mode, 35+ composants, accessibilitÃ© WCAG 2.1, grid responsive, animations, tablet mode, tests snapshot visuels, documentation composants.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ“¦ src/modules/</span>
                <span class="score-badge score-good">7.6 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill blue" style="width: 76%"></div></div>
                <span class="score-label">76%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">8 domaines mÃ©tier couverts avec ~30 sous-modules. Patterns uniformisÃ©s (error_boundary, profiler, KeyNamespace, tabs_with_url). Quelques modules rÃ©cents (eco_tips, energie, meubles) encore peu profonds.</p>
        </div>

        <div class="card">
            <div class="card-header">
                <span class="card-title">ğŸ  app.py</span>
                <span class="score-badge score-good">8.0 / 10</span>
            </div>
            <div class="score-bar-container">
                <div class="score-bar"><div class="score-bar-fill blue" style="width: 80%"></div></div>
                <span class="score-label">80%</span>
            </div>
            <p style="font-size: .85rem; color: var(--text-muted);">Point d'entrÃ©e bien structurÃ© : bootstrap sÃ©quentiel, chargement diffÃ©rÃ©, error boundary global, injection PWA, accessibilitÃ©, mode maintenance, dÃ©tection pages lentes.</p>
        </div>
    </div>

    <h3>RÃ©sumÃ© des notes</h3>
    <table>
        <thead>
            <tr><th>Composant</th><th>Note</th><th>Forces principales</th><th>Axe d'amÃ©lioration principal</th></tr>
        </thead>
        <tbody>
            <tr><td>src/core/</td><td><span class="score-badge score-excellent">8.6</span></td><td>Architecture infra de niveau professionnel</td><td>Thread-safety des singletons</td></tr>
            <tr><td>src/api/</td><td><span class="score-badge score-excellent">8.5</span></td><td>SÃ©curitÃ© + middleware complets</td><td>Inline imports Ã  restructurer</td></tr>
            <tr><td>src/services/</td><td><span class="score-badge score-excellent">8.3</span></td><td>Richesse fonctionnelle, patterns BaseService/BaseAI</td><td>Quelques fichiers > 500 LOC</td></tr>
            <tr><td>src/ui/</td><td><span class="score-badge score-good">8.0</span></td><td>Design system + a11y + tokens sÃ©mantiques</td><td>Maintenance PEP 562 dicts (120+ entries)</td></tr>
            <tr><td>src/modules/</td><td><span class="score-badge score-good">7.6</span></td><td>Couverture fonctionnelle large</td><td>Modules rÃ©cents peu profonds, dashboard.py complexe</td></tr>
            <tr><td>app.py</td><td><span class="score-badge score-good">8.0</span></td><td>Bootstrap propre, lazy loading</td><td>WidgÃ©ts globaux fragiles (try/except)</td></tr>
        </tbody>
    </table>
</section>

<!-- ============ ANALYSE API ============ -->
<section id="api">
    <h2>ğŸ”Œ Analyse dÃ©taillÃ©e â€” src/api/ (6 032 LOC, 44 fichiers)</h2>

    <details>
        <summary>ğŸ“ Structure du dossier</summary>
        <div>
            <pre style="color: var(--text-muted); font-size: .85rem;">
src/api/
â”œâ”€â”€ __init__.py, auth.py (319 LOC), dependencies.py, main.py (372 LOC)
â”œâ”€â”€ pagination.py, prometheus.py, versioning.py, websocket_courses.py
â”œâ”€â”€ rate_limiting/ (7 fichiers: config, dependencies, limiter, middleware, redis_storage, storage, utils)
â”œâ”€â”€ routes/ (11 routes: auth, calendriers, courses, famille, inventaire, jeux, maison, planning, push, recettes, suggestions)
â”œâ”€â”€ schemas/ (10 fichiers: auth, base, common, courses, inventaire, planning, push, recettes, suggestions)
â””â”€â”€ utils/ (5 fichiers: cache, crud, exceptions, metrics, security_headers)
            </pre>
        </div>
    </details>

    <div class="grid-2">
        <div class="card">
            <h4>âœ… Points forts</h4>
            <ul class="feature-list">
                <li class="exists">JWT avec vÃ©rification signature (API + Supabase fallback)</li>
                <li class="exists">Rate limiting multi-backend (mÃ©moire + Redis)</li>
                <li class="exists">Security headers OWASP complets (HSTS, CSP, X-Frame)</li>
                <li class="exists">ETag caching avec 304 Not Modified</li>
                <li class="exists">WebSocket pour courses collaboratif temps rÃ©el</li>
                <li class="exists">Versioning API (header-based)</li>
                <li class="exists">OpenAPI Swagger avec persistAuthorization</li>
                <li class="exists">MÃ©triques Prometheus (endpoints, latence)</li>
                <li class="exists">Pagination standardisÃ©e (offset/limit)</li>
                <li class="exists">Global exception handler (pas de fuite d'erreurs internes)</li>
                <li class="exists">11 groupes de routes couvrant tous les domaines</li>
            </ul>
        </div>
        <div class="card">
            <h4>âš ï¸ Points d'amÃ©lioration</h4>
            <ul class="feature-list">
                <li class="partial">Inline imports dans main.py (middleware importÃ©s dans le body)</li>
                <li class="partial">Pas de mÃ©canisme de refresh/rotation de tokens JWT</li>
                <li class="missing">Pas de rate limiting par utilisateur (seulement global/IP)</li>
                <li class="missing">Pas de tests d'intÃ©gration end-to-end pour WebSocket</li>
                <li class="missing">Pas de documentation OpenAPI pour les erreurs (4xx/5xx)</li>
                <li class="missing">Pas de webhook/callback pour notifications externes</li>
            </ul>
        </div>
    </div>
</section>

<!-- ============ ANALYSE CORE ============ -->
<section id="core">
    <h2>âš™ï¸ Analyse dÃ©taillÃ©e â€” src/core/ (16 161 LOC, 96 fichiers)</h2>

    <details>
        <summary>ğŸ“ Structure complÃ¨te (11 sous-packages)</summary>
        <div>
            <pre style="color: var(--text-muted); font-size: .85rem;">
src/core/
â”œâ”€â”€ ai/ (7 fichiers: client.py 543 LOC, cache, circuit_breaker, parser, rate_limit, router)
â”œâ”€â”€ caching/ (7 fichiers: memory L1, session L2, file L3, redis, orchestrator 278 LOC)
â”œâ”€â”€ config/ (4 fichiers: settings.py 443 LOC, loader, validator)
â”œâ”€â”€ date_utils/ (5 fichiers: semaines, periodes, formatage, helpers)
â”œâ”€â”€ db/ (8 fichiers: engine.py 201 LOC, session 126 LOC, async_session, connection, migrations)
â”œâ”€â”€ decorators/ (5 fichiers: db, cache, errors, validation)
â”œâ”€â”€ models/ (22 fichiers: base, mixins + 19 modÃ¨les domaine)
â”œâ”€â”€ monitoring/ (6 fichiers: collector, decorators, health, rerun_profiler, sentry 351 LOC)
â”œâ”€â”€ observability/ (2 fichiers: context.py avec correlation_id)
â”œâ”€â”€ resilience/ (2 fichiers: policies.py 270 LOC â€” Retry, Timeout, Bulkhead, Fallback, composable)
â”œâ”€â”€ state/ (5 fichiers: manager, persistent, shortcuts, slices)
â”œâ”€â”€ validation/ (8 fichiers: sanitizer, validators, schemas/ sous-package avec 7 domaines)
â”œâ”€â”€ bootstrap.py 170 LOC, constants.py 217 LOC, exceptions.py 408 LOC
â”œâ”€â”€ lazy_loader.py 168 LOC, logging.py, navigation.py 185 LOC
â”œâ”€â”€ session_keys.py 210 LOC, storage.py, async_utils.py, plugins.py
â””â”€â”€ py.typed (PEP 561 marker)
            </pre>
        </div>
    </details>

    <div class="grid-2">
        <div class="card">
            <h4>âœ… Points forts</h4>
            <ul class="feature-list">
                <li class="exists">22 modÃ¨les ORM SQLAlchemy 2.0 avec mapped_column + Mapped types</li>
                <li class="exists">Cache multi-niveaux L1â†’Redisâ†’L2â†’L3 avec statistiques</li>
                <li class="exists">RÃ©silience composable (Retry + Timeout + Bulkhead + Fallback via '+')</li>
                <li class="exists">Circuit breaker avec support async automatique</li>
                <li class="exists">Configuration Pydantic BaseSettings multi-source (env â†’ secrets â†’ defaults)</li>
                <li class="exists">Bootstrap idempotent avec rapport de dÃ©marrage structurÃ©</li>
                <li class="exists">HiÃ©rarchie d'exceptions pure (sans dÃ©pendance UI)</li>
                <li class="exists">PEP 562 lazy loading sur tous les __init__.py</li>
                <li class="exists">Monitoring Sentry avec filtrage PII automatique</li>
                <li class="exists">ObservabilitÃ© avec correlation_id pour tracing distribuÃ©</li>
                <li class="exists">DÃ©corateurs unifiÃ©s (@avec_session_db, @avec_cache, @avec_resilience)</li>
                <li class="exists">Validation Pydantic v2 + sanitizer anti-XSS/injection</li>
                <li class="exists">4 Timestamp mixins (FR + EN) pour modÃ¨les DRY</li>
                <li class="exists">Session DB avec context manager, commit auto, rollback on exception</li>
            </ul>
        </div>
        <div class="card">
            <h4>âš ï¸ Points d'amÃ©lioration</h4>
            <ul class="feature-list">
                <li class="partial">Thread-safety : singletons sans lock (client IA, config, cache)</li>
                <li class="partial">client.py 543 LOC â€” devrait Ãªtre divisÃ© (legacy code prÃ©sent)</li>
                <li class="partial">Mapping PEP 562 maintenu manuellement (~130 symboles models)</li>
                <li class="partial">lazy_loader.py : pas de thread-safe pour le cache modules</li>
                <li class="partial">navigation.py : pages hardcodÃ©es (~100 LOC), devrait Ãªtre dÃ©claratif</li>
                <li class="missing">Pas d'auto-discovery pour les modÃ¨les (mapping manuel dans __init__.py)</li>
                <li class="missing">Pas de migration Alembic (SQL files manuels uniquement)</li>
                <li class="missing">Timeout executor jamais shutdown (resource leak potentiel)</li>
            </ul>
        </div>
    </div>

    <h3>DÃ©tail par sous-package core/</h3>
    <table>
        <thead><tr><th>Sous-package</th><th>Fichiers</th><th>LOC est.</th><th>Note</th><th>Verdict</th></tr></thead>
        <tbody>
            <tr><td>ai/</td><td>7</td><td>~1 400</td><td><span class="score-badge score-good">7.5</span></td><td>Client puissant mais monolithique. Router, cache, rate_limit bien sÃ©parÃ©s.</td></tr>
            <tr><td>caching/</td><td>7</td><td>~1 200</td><td><span class="score-badge score-excellent">8.5</span></td><td>Architecture multi-niveaux exemplaire avec Redis auto-detect.</td></tr>
            <tr><td>config/</td><td>4</td><td>~700</td><td><span class="score-badge score-excellent">8.5</span></td><td>Pydantic BaseSettings solide, multi-source, validation au boot.</td></tr>
            <tr><td>date_utils/</td><td>5</td><td>~400</td><td><span class="score-badge score-excellent">9.0</span></td><td>Utilitaires propres et bien testÃ©s.</td></tr>
            <tr><td>db/</td><td>8</td><td>~800</td><td><span class="score-badge score-excellent">9.0</span></td><td>Engine + session exemplaires. Double-checked locking. Correlation ID.</td></tr>
            <tr><td>decorators/</td><td>5</td><td>~500</td><td><span class="score-badge score-excellent">9.5</span></td><td>Clean, bien documentÃ©s, exports via barrel.</td></tr>
            <tr><td>models/</td><td>22</td><td>~3 500</td><td><span class="score-badge score-excellent">8.5</span></td><td>22 fichiers modulaires, mixins, naming convention. Mapping manuel Ã  amÃ©liorer.</td></tr>
            <tr><td>monitoring/</td><td>6</td><td>~900</td><td><span class="score-badge score-good">8.0</span></td><td>Sentry complet + rerun profiler. Prometheus basique.</td></tr>
            <tr><td>observability/</td><td>2</td><td>~200</td><td><span class="score-badge score-excellent">9.0</span></td><td>Correlation ID propre et bien intÃ©grÃ©.</td></tr>
            <tr><td>resilience/</td><td>2</td><td>~300</td><td><span class="score-badge score-excellent">9.0</span></td><td>Composition Ã©lÃ©gante par opÃ©rateur +. Generics typÃ©s.</td></tr>
            <tr><td>state/</td><td>5</td><td>~600</td><td><span class="score-badge score-good">8.0</span></td><td>Manager + slices + persistent. Navigation centralisÃ©e.</td></tr>
            <tr><td>validation/</td><td>8</td><td>~1 200</td><td><span class="score-badge score-excellent">8.5</span></td><td>Schemas Pydantic par domaine + sanitizer anti-XSS.</td></tr>
        </tbody>
    </table>
</section>

<!-- ============ ANALYSE MODULES ============ -->
<section id="modules">
    <h2>ğŸ“¦ Analyse dÃ©taillÃ©e â€” src/modules/ (32 635 LOC, 227 fichiers)</h2>

    <details>
        <summary>ğŸ“ Structure complÃ¨te (8 domaines + framework)</summary>
        <div>
            <pre style="color: var(--text-muted); font-size: .85rem;">
src/modules/
â”œâ”€â”€ _framework/ (base_module, error_boundary, fragments, state_manager)
â”œâ”€â”€ accueil/ (6 fichiers: dashboard 257 LOC, alerts, stats, summaries, resume_hebdo, utils)
â”œâ”€â”€ cuisine/ (5 sous-modules: batch_cooking_detaille, courses 11 fichiers, inventaire 19 fichiers, planificateur_repas 9 fichiers, recettes 7 fichiers)
â”œâ”€â”€ famille/ (4 sous-modules: achats_famille, jules, suivi_perso, weekend + activites, routines, hub_famille 310 LOC)
â”œâ”€â”€ jeux/ (2 sous-modules: loto 12 fichiers, paris 12 fichiers + scraper)
â”œâ”€â”€ maison/ (8 sous-modules: charges, depenses, eco_tips, energie, entretien, hub, jardin, meubles, projets)
â”œâ”€â”€ parametres/ (8 onglets: about, affichage, budget, cache, database, foyer, ia)
â”œâ”€â”€ planning/ (calendrier 12 fichiers + cockpit_familial, templates_ui, timeline_ui)
â”œâ”€â”€ utilitaires/ (barcode 6 fichiers, chat_ia, notifications_push, rapports 5 fichiers, scan_factures, recherche_produits)
â””â”€â”€ design_system.py
            </pre>
        </div>
    </details>

    <h3>Notes par module</h3>
    <table>
        <thead><tr><th>Module</th><th>Fichiers</th><th>LOC est.</th><th>Note</th><th>ComplÃ©tude</th><th>Verdict</th></tr></thead>
        <tbody>
            <tr><td>ğŸ½ï¸ cuisine/</td><td>~55</td><td>~8 500</td><td><span class="score-badge score-excellent">8.5</span></td><td><span class="tag tag-done">95%</span></td><td>Module le plus complet : recettes, inventaire 19 fichiers, planificateur IA, batch cooking, courses collaboratif</td></tr>
            <tr><td>ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ famille/</td><td>~25</td><td>~4 500</td><td><span class="score-badge score-good">7.8</span></td><td><span class="tag tag-done">85%</span></td><td>Hub avec navigation par cartes, Jules IA, suivi perso Garmin, weekend IA, routines. Manque calendrier partagÃ© avancÃ©.</td></tr>
            <tr><td>ğŸ  maison/</td><td>~40</td><td>~5 500</td><td><span class="score-badge score-good">7.5</span></td><td><span class="tag tag-partial">75%</span></td><td>8 sous-modules (charges, dÃ©penses, entretien, jardin, eco_tips, Ã©nergie, meubles, projets). Modules rÃ©cents encore lÃ©gers.</td></tr>
            <tr><td>ğŸ® jeux/</td><td>~25</td><td>~4 000</td><td><span class="score-badge score-good">8.0</span></td><td><span class="tag tag-done">90%</span></td><td>Loto (statistiques, gÃ©nÃ©ration, simulation) + Paris sportifs (CRUD, analyse, prÃ©diction). Complet et bien structurÃ©.</td></tr>
            <tr><td>ğŸ“… planning/</td><td>~17</td><td>~3 000</td><td><span class="score-badge score-good">7.5</span></td><td><span class="tag tag-partial">70%</span></td><td>Calendrier solide avec analytics, export. Cockpit familial et timeline encore basiques.</td></tr>
            <tr><td>ğŸ¡ accueil/</td><td>~7</td><td>~1 200</td><td><span class="score-badge score-average">7.0</span></td><td><span class="tag tag-partial">65%</span></td><td>Dashboard avec mÃ©triques, alertes auto-refresh, rÃ©sumÃ© hebdo. Fonctions app() complexes.</td></tr>
            <tr><td>âš™ï¸ parametres/</td><td>~9</td><td>~1 500</td><td><span class="score-badge score-excellent">8.5</span></td><td><span class="tag tag-done">90%</span></td><td>8 onglets bien organisÃ©s (BaseModule). Foyer persistÃ© DB. Cache, IA, affichage configurables.</td></tr>
            <tr><td>ğŸ”§ utilitaires/</td><td>~13</td><td>~2 500</td><td><span class="score-badge score-good">7.5</span></td><td><span class="tag tag-partial">75%</span></td><td>Barcode scanner, rapports PDF, notifications push, scan factures, chat IA, recherche produits.</td></tr>
            <tr><td>ğŸ¨ design_system</td><td>1</td><td>~200</td><td><span class="score-badge score-good">8.0</span></td><td><span class="tag tag-done">85%</span></td><td>Showcase composants, BaseModule adoptÃ©.</td></tr>
            <tr><td>ğŸ§© _framework/</td><td>4</td><td>~400</td><td><span class="score-badge score-excellent">8.5</span></td><td><span class="tag tag-done">90%</span></td><td>BaseModule[T], error_boundary, fragments, state_manager. Bien conÃ§u.</td></tr>
        </tbody>
    </table>
</section>

<!-- ============ ANALYSE SERVICES ============ -->
<section id="services">
    <h2>ğŸ”§ Analyse dÃ©taillÃ©e â€” src/services/ (44 201 LOC, 215 fichiers)</h2>

    <details>
        <summary>ğŸ“ Structure complÃ¨te (8 domaines)</summary>
        <div>
            <pre style="color: var(--text-muted); font-size: .85rem;">
src/services/
â”œâ”€â”€ core/ (registry 563 LOC, base/ 11 fichiers BaseAIService + mixins + protocols,
â”‚         events/ bus pub/sub, notifications/ 9 fichiers, backup/ 7 fichiers,
â”‚         observability/, utilisateur/ authentification + permissions + historique,
â”‚         gamification, service_health, service_metrics)
â”œâ”€â”€ cuisine/ (batch_cooking/ 6 fichiers, courses/ 5 fichiers, planning/ 16 fichiers,
â”‚            recettes/ 14 fichiers, suggestions/ 11 fichiers)
â”œâ”€â”€ famille/ (12 fichiers: jules, jules_ai, weekend, weekend_ai, activites, routines,
â”‚            achats, sante, suivi_perso, resume_hebdo, budget/ 6f, calendrier/ 8f)
â”œâ”€â”€ integrations/ (garmin/ 7f, images/ 4f, weather/ 9f, web/ pwa + sync,
â”‚                  codes_barres, facture, produit)
â”œâ”€â”€ inventaire/ (7 fichiers: service, stock, stats, operations, io, types)
â”œâ”€â”€ jeux/ (_internal/ 17 fichiers: loto_crud, paris_crud + mixins, football_data,
â”‚          prediction, backtest, scheduler, series, sync, ai, notification)
â”œâ”€â”€ maison/ (15 fichiers: depenses, eco_tips, entretien + gamification,
â”‚            jardin + 3 mixins, meubles, projets, hub_data, schemas)
â””â”€â”€ rapports/ (7 fichiers: generation, export, planning_pdf, budget, gaspillage)
            </pre>
        </div>
    </details>

    <div class="grid-2">
        <div class="card">
            <h4>âœ… Architecture services</h4>
            <ul class="feature-list">
                <li class="exists">@service_factory â€” singleton thread-safe via registre central</li>
                <li class="exists">BaseService[T] â€” CRUD gÃ©nÃ©rique (create/get_all/update/delete)</li>
                <li class="exists">BaseAIService â€” rate limiting + cache sÃ©mantique + circuit breaker</li>
                <li class="exists">Event bus pub/sub avec wildcards et 14 Ã©vÃ©nements typÃ©s</li>
                <li class="exists">Notifications multi-canal (ntfy, web push, in-app)</li>
                <li class="exists">Backup/restore service avec export JSON + identity mapping</li>
                <li class="exists">Authentification complÃ¨te (JWT, rÃ´les, permissions, sessions)</li>
                <li class="exists">Historique utilisateur avec queries + types dÃ©diÃ©s</li>
                <li class="exists">Gamification (entretien, jardin)</li>
                <li class="exists">IntÃ©grations : Garmin OAuth, Google Calendar, mÃ©tÃ©o, images IA, PWA</li>
            </ul>
        </div>
        <div class="card">
            <h4>âš ï¸ Points d'amÃ©lioration</h4>
            <ul class="feature-list">
                <li class="partial">planning/ 16 fichiers â€” trÃ¨s fragmentÃ©, certains fichiers petits</li>
                <li class="partial">suggestions/ 11 fichiers â€” complexitÃ© Ã©levÃ©e pour le scoring ML</li>
                <li class="partial">Event bus adoptÃ© par ~50% des services seulement</li>
                <li class="partial">Certains services > 500 LOC (documentÃ©s, split prÃ©vu)</li>
                <li class="missing">Pas de service de synchronisation offline (queue-based)</li>
                <li class="missing">Pas de service de logs/audit trail transversal</li>
                <li class="missing">Pas de service d'analytics/mÃ©triques d'usage utilisateur</li>
            </ul>
        </div>
    </div>
</section>

<!-- ============ ANALYSE UI ============ -->
<section id="ui">
    <h2>ğŸ¨ Analyse dÃ©taillÃ©e â€” src/ui/ (19 646 LOC, 90 fichiers)</h2>

    <details>
        <summary>ğŸ“ Structure complÃ¨te (11 sous-packages)</summary>
        <div>
            <pre style="color: var(--text-muted); font-size: .85rem;">
src/ui/
â”œâ”€â”€ components/ (35+ composants: atoms, charts, chat_contextuel, chat_global, data_editors,
â”‚               dynamic, filters, forms, gamification, historique_undo, ia_fragment,
â”‚               jules_aujourdhui, lottie, metrics, notifications_live, plotly_drilldown,
â”‚               progressive_loading, quest_ce_quon_mange, realtime_collab, recherche_globale,
â”‚               streaming, system, vocal, voice_assistant, workflow_status, barcode_*, audio_input)
â”œâ”€â”€ docs/ (GUIDE_COMPOSANTS.md, PATTERNS.md, CONVENTIONS.md + component_explorer.py)
â”œâ”€â”€ engine/ (css.py â€” CSS Manager)
â”œâ”€â”€ feedback/ (progress_v2, results, spinners, toasts)
â”œâ”€â”€ grid/ (grid_layout, helpers, row, stack, types)
â”œâ”€â”€ integrations/ (google_calendar.py)
â”œâ”€â”€ layout/ (header, footer, styles 207 LOC, initialisation)
â”œâ”€â”€ state/ (url.py â€” deep linking)
â”œâ”€â”€ tablet/ (config, kitchen, styles, timer, widgets)
â”œâ”€â”€ testing/ (playwright_config, visual_regression + SnapshotTester)
â”œâ”€â”€ views/ (10 vues: authentification, historique, import_recettes, jeux, meteo, notifications, pwa, sauvegarde, synchronisation)
â”œâ”€â”€ a11y.py (accessibilitÃ© WCAG 2.1), animations.py, fragments.py, keys.py (KeyNamespace)
â”œâ”€â”€ registry.py (@composant_ui), theme.py, tokens.py, tokens_semantic.py
â””â”€â”€ README.md
            </pre>
        </div>
    </details>

    <div class="grid-2">
        <div class="card">
            <h4>âœ… Points forts UI</h4>
            <ul class="feature-list">
                <li class="exists">Design tokens (Couleur, Espacement, Rayon, Ombre, Transition) + tokens sÃ©mantiques</li>
                <li class="exists">Dark mode complet via semantic token bridge</li>
                <li class="exists">AccessibilitÃ© WCAG 2.1 : skip-link, ARIA, focus-visible, prefers-reduced-motion</li>
                <li class="exists">35+ composants avec @composant_ui registry</li>
                <li class="exists">Grid responsive (3 breakpoints + fluid typography)</li>
                <li class="exists">Tablet mode dÃ©diÃ© (kitchen timer, widgets cuisine)</li>
                <li class="exists">Tests snapshot visuels (27 tests SnapshotTester)</li>
                <li class="exists">Streaming IA (safe_write_stream, streaming_placeholder)</li>
                <li class="exists">Animations Lottie + CSS transitions</li>
                <li class="exists">Documentation composants (3 guides)</li>
                <li class="exists">Print stylesheet optimisÃ©</li>
            </ul>
        </div>
        <div class="card">
            <h4>âš ï¸ Points d'amÃ©lioration</h4>
            <ul class="feature-list">
                <li class="partial">120+ entries dans le PEP 562 mapping dict â€” maintenance lourde</li>
                <li class="partial">Quelques couleurs hex hardcodÃ©es restantes (~50 identifiÃ©es)</li>
                <li class="partial">Pas de Storybook-like interactif (component_explorer est statique)</li>
                <li class="missing">Pas de tests E2E Playwright configurÃ©s (config prÃ©sente mais pas de tests)</li>
                <li class="missing">Pas de lazy loading pour les CSS lourds (tout injectÃ© au boot)</li>
                <li class="missing">Pas de skeleton loading unifiÃ© pour les modules</li>
            </ul>
        </div>
    </div>
</section>

<!-- ============ ANALYSE APP.PY ============ -->
<section id="app">
    <h2>ğŸ  Analyse dÃ©taillÃ©e â€” app.py (195 LOC)</h2>

    <div class="card">
        <h4>RÃ´le</h4>
        <p>Point d'entrÃ©e principal Streamlit. Orchestre : variables d'environnement â†’ logging â†’ bootstrap â†’ config page â†’ navigation â†’ widgets globaux â†’ error boundary.</p>

        <h4 style="margin-top: 1rem;">Architecture</h4>
        <div style="margin: 1rem 0; text-align: center;">
            <span class="flow-box">ğŸ”§ os.environ</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">ğŸ“ Logging</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">ğŸš€ Bootstrap</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">âš™ï¸ Config</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">ğŸ§­ Navigation</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">ğŸ¨ Widgets</span>
            <span class="flow-arrow">â†’</span>
            <span class="flow-box">â–¶ï¸ Run Page</span>
        </div>

        <h4 style="margin-top: 1rem;">Points clÃ©s</h4>
        <ul class="feature-list">
            <li class="exists">Chargement diffÃ©rÃ© via st.navigation() â€” ~60% accÃ©lÃ©ration au dÃ©marrage</li>
            <li class="exists">Mode maintenance toggle via session_state</li>
            <li class="exists">Injection PWA (manifest + service worker)</li>
            <li class="exists">AccessibilitÃ© : balises &lt;main role="main"&gt;</li>
            <li class="exists">DÃ©tection pages lentes (&gt; seuil configurable)</li>
            <li class="exists">Error boundary global avec bouton restart</li>
            <li class="partial">Widgets globaux isolÃ©s par try/except (fragile mais fonctionnel)</li>
            <li class="partial">unsafe_allow_html pour landmarks â€” dÃ©pend de Streamlit</li>
        </ul>
    </div>
</section>

<!-- ============ FLUX DE DONNÃ‰ES ============ -->
<section id="flux">
    <h2>ğŸ”„ Organisation et Flux de DonnÃ©es</h2>

    <div class="card">
        <h3>Architecture en couches</h3>
        <div style="text-align: center; margin: 1.5rem 0;">
            <div style="padding: .8rem; background: rgba(188,140,255,.15); border: 1px solid var(--purple); border-radius: var(--radius); margin: .5rem auto; max-width: 600px;">
                <strong style="color: var(--purple);">ğŸ–¥ï¸ COUCHE PRÃ‰SENTATION</strong><br>
                <small>src/modules/ (UI Streamlit) + src/ui/ (composants rÃ©utilisables)</small>
            </div>
            <div style="font-size: 1.5rem; color: var(--accent);">â†•ï¸</div>
            <div style="padding: .8rem; background: rgba(88,166,255,.15); border: 1px solid var(--accent); border-radius: var(--radius); margin: .5rem auto; max-width: 600px;">
                <strong style="color: var(--accent);">âš™ï¸ COUCHE MÃ‰TIER / SERVICES</strong><br>
                <small>src/services/ (logique, IA, intÃ©grations) + src/core/decorators/ (transversal)</small>
            </div>
            <div style="font-size: 1.5rem; color: var(--accent);">â†•ï¸</div>
            <div style="padding: .8rem; background: rgba(63,185,80,.15); border: 1px solid var(--green); border-radius: var(--radius); margin: .5rem auto; max-width: 600px;">
                <strong style="color: var(--green);">ğŸ’¾ COUCHE DONNÃ‰ES</strong><br>
                <small>src/core/models/ (ORM) + src/core/db/ (engine, sessions) + src/core/caching/</small>
            </div>
            <div style="font-size: 1.5rem; color: var(--accent);">â†•ï¸</div>
            <div style="padding: .8rem; background: rgba(210,153,34,.15); border: 1px solid var(--yellow); border-radius: var(--radius); margin: .5rem auto; max-width: 600px;">
                <strong style="color: var(--yellow);">ğŸŒ COUCHE INFRASTRUCTURE</strong><br>
                <small>src/core/config/ + src/core/ai/ + src/core/resilience/ + src/core/monitoring/</small>
            </div>
            <div style="font-size: 1.5rem; color: var(--orange);">â†•ï¸</div>
            <div style="padding: .8rem; background: rgba(219,109,40,.15); border: 1px solid var(--orange); border-radius: var(--radius); margin: .5rem auto; max-width: 600px;">
                <strong style="color: var(--orange);">ğŸ”Œ COUCHE API EXTERNE</strong><br>
                <small>src/api/ (FastAPI REST + WebSocket) â€” interface mobile/externe</small>
            </div>
        </div>
    </div>

    <div class="card">
        <h3>Verdict sur l'organisation</h3>
        <div class="grid-2">
            <div>
                <h4 style="color: var(--green);">âœ… Ce qui est bien</h4>
                <ul class="feature-list">
                    <li class="exists"><strong>SÃ©paration claire</strong> : modules (UI) â‰  services (logique) â‰  core (infra)</li>
                    <li class="exists"><strong>Dependency Injection lÃ©gÃ¨re</strong> via @service_factory + registre central</li>
                    <li class="exists"><strong>Event-driven</strong> : bus d'Ã©vÃ©nements pour dÃ©couplage inter-modules</li>
                    <li class="exists"><strong>Cache-aside pattern</strong> systÃ©matique (donnÃ©es chaudes en mÃ©moire)</li>
                    <li class="exists"><strong>Decorators transversaux</strong> : session DB, cache, erreurs, rÃ©silience â€” orthogonaux aux services</li>
                    <li class="exists"><strong>Communication inter-modules</strong> via session_state + SessionKeys centralisÃ©es</li>
                    <li class="exists"><strong>Flux IA centralisÃ©</strong> : tout passe par BaseAIService â†’ rate limiting â†’ cache â†’ circuit breaker</li>
                </ul>
            </div>
            <div>
                <h4 style="color: var(--yellow);">âš ï¸ AmÃ©liorations possibles</h4>
                <ul class="feature-list">
                    <li class="partial"><strong>Couplage modules-services</strong> : certains modules importent directement les services sans passer par le registre</li>
                    <li class="partial"><strong>Session state surchargÃ©e</strong> : ~130 clÃ©s centralisÃ©es â€” risque de pollution namespace</li>
                    <li class="partial"><strong>Event bus sous-utilisÃ©</strong> : seulement ~50% des services Ã©mettent des Ã©vÃ©nements</li>
                    <li class="missing"><strong>Pas de couche DTO explicite</strong> entre modules et services (les modÃ¨les ORM circulent directement)</li>
                    <li class="missing"><strong>Pas de command/query pattern</strong> â€” lectures et Ã©critures mÃ©langÃ©es dans les mÃªmes services</li>
                </ul>
            </div>
        </div>

        <h4 style="margin-top: 1rem;">Note flux de donnÃ©es : <span class="score-badge score-good">7.8 / 10</span></h4>
        <p style="color: var(--text-muted); font-size: .9rem;">L'architecture est <strong>trÃ¨s adaptÃ©e pour un assistant familial Streamlit</strong>. La complexitÃ© est bien gÃ©rÃ©e par les couches. Le principal risque est la scalabilitÃ© du session_state si la famille utilise plusieurs onglets simultanÃ©ment. Pour un usage mono-utilisateur/mono-famille, c'est excellent.</p>
    </div>
</section>

<!-- ============ PROPOSITIONS FONCTIONNALITÃ‰S ============ -->
<section id="fonctionnalites">
    <h2>ğŸ’¡ Propositions de FonctionnalitÃ©s â€” Liste Exhaustive</h2>
    <p style="color: var(--text-muted); margin-bottom: 1.5rem;">FonctionnalitÃ©s existantes (âœ…), partielles (ğŸŸ¡), manquantes prioritaires (ğŸ”´), et idÃ©es innovantes (ğŸ’¡) pour chaque module.</p>

    <!-- ACCUEIL -->
    <div class="card">
        <h3>ğŸ¡ Module Accueil</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Dashboard avec mÃ©triques familiales</li>
                    <li class="exists">Alertes critiques auto-refresh (30s)</li>
                    <li class="exists">Statistiques mensuelles (60s)</li>
                    <li class="exists">RÃ©sumÃ© hebdomadaire</li>
                    <li class="exists">Raccourcis rapides (quick actions)</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Widget mÃ©tÃ©o du jour avec impact sur les activitÃ©s planifiÃ©es</li>
                    <li class="missing">RÃ©sumÃ© matinal IA personnalisÃ© ("Bonjour ! Voici votre journÃ©e...")</li>
                    <li class="missing">Feed d'activitÃ© familiale (timeline des actions rÃ©centes)</li>
                    <li class="idea">Widget "Ce soir on mange..." avec suggestion rapide</li>
                    <li class="idea">Compteur de jours depuis dernier loto/paris gagnÃ©</li>
                    <li class="idea">Score de bien-Ãªtre familial hebdomadaire (agrÃ©gÃ© depuis suivi perso)</li>
                    <li class="idea">Rappels contextuels ("Jules a rendez-vous demain", "Stock de lait bas")</li>
                    <li class="idea">Mini-calendrier de la semaine intÃ©grÃ©</li>
                    <li class="idea">Widget Ã©conomies rÃ©alisÃ©es ce mois (batch cooking, promotions)</li>
                    <li class="idea">Photo souvenir du jour (alÃ©atoire depuis galerie famille)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- CUISINE -->
    <div class="card">
        <h3>ğŸ½ï¸ Module Cuisine</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Recettes CRUD + gÃ©nÃ©ration IA + import URL/PDF</li>
                    <li class="exists">Inventaire complet (19 fichiers, alertes, prÃ©dictions)</li>
                    <li class="exists">Planificateur de repas avec IA</li>
                    <li class="exists">Batch cooking dÃ©taillÃ© avec Ã©tapes live</li>
                    <li class="exists">Courses collaboratif temps rÃ©el (WebSocket)</li>
                    <li class="exists">Scan codes-barres</li>
                    <li class="exists">GÃ©nÃ©ration d'images de recettes IA</li>
                    <li class="exists">Notes et retours sur les recettes</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Compteur de calories/macros par repas et par jour</li>
                    <li class="missing">Partage de recettes entre familles (export/import social)</li>
                    <li class="missing">Mode "Qu'est-ce qu'on mange ?" basÃ© sur le stock actuel</li>
                    <li class="idea">Timer de cuisson intÃ©grÃ© avec alertes sonores</li>
                    <li class="idea">Historique des prix par produit (Ã©volution tarifaire)</li>
                    <li class="idea">Recettes adaptÃ©es au rÃ©gime alimentaire (vÃ©gÃ©tarien, sans gluten, etc.)</li>
                    <li class="idea">Budget courses hebdomadaire avec objectif et suivi</li>
                    <li class="idea">Score anti-gaspillage (recettes utilisant les produits proches expiration)</li>
                    <li class="idea">Carnet de recettes partagÃ© (contributions de la famille Ã©largie)</li>
                    <li class="idea">Suggestions de substitutions d'ingrÃ©dients manquants par IA</li>
                    <li class="idea">IntÃ©gration drive/livraison pour les courses (API Courses U, etc.)</li>
                    <li class="idea">Mode pas-Ã -pas vocal pour cuisiner (text-to-speech)</li>
                    <li class="idea">Classification automatique des tickets de caisse (OCR)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- FAMILLE -->
    <div class="card">
        <h3>ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦ Module Famille</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Hub familial avec navigation par cartes</li>
                    <li class="exists">Suivi de Jules (19 mois) â€” activitÃ©s adaptÃ©es Ã¢ge, IA</li>
                    <li class="exists">Suivi perso Anne/Mathieu â€” Garmin, alimentation</li>
                    <li class="exists">Planning weekend avec suggestions IA</li>
                    <li class="exists">Achats famille (wishlist par catÃ©gorie)</li>
                    <li class="exists">Routines quotidiennes</li>
                    <li class="exists">ActivitÃ©s planifiÃ©es avec graphiques</li>
                    <li class="exists">Chat IA contextuel (famille, planning, weekend)</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Journal/album photo de Jules avec Ã©tapes de dÃ©veloppement</li>
                    <li class="missing">Carnet de santÃ© numÃ©rique (vaccins, RDV mÃ©decin, taille/poids)</li>
                    <li class="missing">Calendrier partagÃ© famille (vue combinÃ©e)</li>
                    <li class="missing">Budget familial mensuel avec catÃ©gories et objectifs</li>
                    <li class="idea">Arbre gÃ©nÃ©alogique interactif</li>
                    <li class="idea">Anniversaires et Ã©vÃ©nements familiaux avec rappels auto</li>
                    <li class="idea">Liste de contacts famille (mÃ©decin, nounou, Ã©cole, urgences)</li>
                    <li class="idea">Suivi des premiÃ¨res fois de Jules (premiers mots, premiers pas...)</li>
                    <li class="idea">Module babysitting (disponibilitÃ©s, contacts, consignes)</li>
                    <li class="idea">Tableau de rÃ©compenses/motivation enfant (stickers virtuels)</li>
                    <li class="idea">Suivi de sommeil bÃ©bÃ© (heures, durÃ©e, qualitÃ©)</li>
                    <li class="idea">Comparatif dÃ©veloppement enfant vs normes OMS</li>
                    <li class="idea">Mode "SoirÃ©e en amoureux" â€” suggestions d'activitÃ©s sans enfant</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- JEUX -->
    <div class="card">
        <h3>ğŸ® Module Jeux</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Loto : statistiques, frÃ©quences, gÃ©nÃ©ration, simulation, stratÃ©gies</li>
                    <li class="exists">Paris sportifs : CRUD, analyse, prÃ©diction, sÃ©ries, sync football-data</li>
                    <li class="exists">Scraper rÃ©sultats Loto</li>
                    <li class="exists">Backtest des stratÃ©gies de paris</li>
                    <li class="exists">Notifications sur rÃ©sultats</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Euromillions (en plus du Loto classique)</li>
                    <li class="missing">Bilan gains/pertes global avec graphiques temporels</li>
                    <li class="idea">Alertes pronostics (match intÃ©ressant dÃ©tectÃ© par IA)</li>
                    <li class="idea">Grille de mise responsable (limite mensuelle configurable)</li>
                    <li class="idea">Comparatif ROI entre stratÃ©gies de jeu</li>
                    <li class="idea">Social : partage de pronostics entre amis</li>
                    <li class="idea">Suivi des cotes en temps rÃ©el (API bookmaker)</li>
                    <li class="idea">Module poker / jeux de sociÃ©tÃ© (scores, classements famille)</li>
                    <li class="idea">Jeux Ã©ducatifs pour Jules (quiz, mÃ©mory, couleurs)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- MAISON -->
    <div class="card">
        <h3>ğŸ  Module Maison</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Charges/factures avec persistance DB + scan OCR</li>
                    <li class="exists">DÃ©penses CRUD avec cartes, graphiques, prÃ©visions, export</li>
                    <li class="exists">Entretien maison avec gamification + analytics</li>
                    <li class="exists">Jardin complet (plantes, rÃ©coltes, plan 2D, tÃ¢ches, autonomie, gamification)</li>
                    <li class="exists">Ã‰co-tips avec Ã©co-score et suggestions IA</li>
                    <li class="exists">Suivi Ã©nergie (saisie, dashboard, tendances, objectifs)</li>
                    <li class="exists">Inventaire meubles (inventaire, souhaits, valeur assurance)</li>
                    <li class="exists">Projets maison (liste, crÃ©ation, timeline, ROI)</li>
                    <li class="exists">Maison centralisÃ©</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Plan interactif de la maison (piÃ¨ces cliquables)</li>
                    <li class="missing">Historique des travaux par piÃ¨ce</li>
                    <li class="missing">Suivi des contrats (assurance, box internet, Ã©lectricitÃ©, dates renouvellement)</li>
                    <li class="idea">Estimation valeur immobiliÃ¨re (connectÃ© DVF/API immobilier)</li>
                    <li class="idea">Alertes entretien saisonnier automatiques (chaudiÃ¨re, ramonage...)</li>
                    <li class="idea">Carnet d'adresses artisans (plombier, Ã©lectricien, etc.)</li>
                    <li class="idea">Comparateur fournisseurs Ã©nergie</li>
                    <li class="idea">Suivi conso eau (compteur + objectif)</li>
                    <li class="idea">Inventaire cave Ã  vin / cellier</li>
                    <li class="idea">Guide tri sÃ©lectif personnalisÃ© par commune</li>
                    <li class="idea">Domotique : intÃ©gration Home Assistant / API objets connectÃ©s</li>
                    <li class="idea">Checklist dÃ©mÃ©nagement / emmÃ©nagement</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- PARAMETRES -->
    <div class="card">
        <h3>âš™ï¸ Module ParamÃ¨tres</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">About avec infos systÃ¨me</li>
                    <li class="exists">Affichage + dark mode toggle</li>
                    <li class="exists">Budget configuration</li>
                    <li class="exists">Cache management (stats, clear)</li>
                    <li class="exists">Database health check</li>
                    <li class="exists">Foyer persistÃ© en DB (nb adultes, Jules, exclusions)</li>
                    <li class="exists">Configuration IA (limites, cache)</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Export/import de toute la configuration (backup settings)</li>
                    <li class="missing">Gestion des profils utilisateurs (multi-utilisateur)</li>
                    <li class="idea">Notifications configurables par module (activer/dÃ©sactiver)</li>
                    <li class="idea">Langue de l'interface (i18n FR/EN)</li>
                    <li class="idea">Tableau de bord admin (logs, erreurs, performances)</li>
                    <li class="idea">Mode dÃ©mo (donnÃ©es fictives pour prÃ©sentation)</li>
                    <li class="idea">Changelog intÃ©grÃ© (nouveautÃ©s de chaque version)</li>
                    <li class="idea">Gestion des raccourcis clavier personnalisÃ©s</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- PLANNING -->
    <div class="card">
        <h3>ğŸ“… Module Planning</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Calendrier avec analytics, agrÃ©gation, composants jour/semaine</li>
                    <li class="exists">Export calendrier (Google Calendar, ICS)</li>
                    <li class="exists">Cockpit familial</li>
                    <li class="exists">Templates de planification</li>
                    <li class="exists">Timeline UI</li>
                    <li class="exists">RÃ©currence et rappels</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Vue mensuelle drag & drop</li>
                    <li class="missing">Synchronisation bidirectionnelle Google Calendar en temps rÃ©el</li>
                    <li class="missing">Partage de calendrier entre membres de la famille</li>
                    <li class="idea">Import ICS depuis d'autres calendriers (Outlook, Apple)</li>
                    <li class="idea">DÃ©tection automatique de conflits d'horaires</li>
                    <li class="idea">Suggestions IA de crÃ©neaux libres pour activitÃ©s</li>
                    <li class="idea">Mode agenda imprimable (export PDF hebdo)</li>
                    <li class="idea">Widget "Prochains Ã©vÃ©nements" pour l'accueil</li>
                    <li class="idea">IntÃ©gration Doctolib pour les rendez-vous mÃ©dicaux</li>
                    <li class="idea">Planning garde alternÃ©e (si applicable)</li>
                    <li class="idea">Rappels intelligents (adapter heure rappel selon type Ã©vÃ©nement)</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- UTILITAIRES -->
    <div class="card">
        <h3>ğŸ”§ Module Utilitaires</h3>
        <div class="grid-2">
            <div>
                <h4>Existant</h4>
                <ul class="feature-list">
                    <li class="exists">Barcode scanner (dÃ©tection, opÃ©rations, logique)</li>
                    <li class="exists">Rapports PDF (budget, gaspillage, historique, stocks)</li>
                    <li class="exists">Notifications push (ntfy.sh)</li>
                    <li class="exists">Scan factures OCR</li>
                    <li class="exists">Recherche produits (Open Food Facts)</li>
                    <li class="exists">Chat IA global</li>
                </ul>
            </div>
            <div>
                <h4>Ã€ ajouter</h4>
                <ul class="feature-list">
                    <li class="missing">Export global de donnÃ©es (JSON/CSV/Excel)</li>
                    <li class="missing">Import en masse (CSV template pour recettes, dÃ©penses...)</li>
                    <li class="idea">Reconnaissance vocale pour ajout rapide (liste courses, notes)</li>
                    <li class="idea">Widget notes/mÃ©mos rapides</li>
                    <li class="idea">Convertisseur d'unitÃ©s cuisine (tasses â†’ grammes, etc.)</li>
                    <li class="idea">QR code generator (pour partager recettes, listes)</li>
                    <li class="idea">Minuteur/chronomÃ¨tre multi-usage</li>
                    <li class="idea">Calculatrice de portions (adapter recette au nb de personnes)</li>
                    <li class="idea">Journal de bord / notes quotidiennes</li>
                    <li class="idea">Widget mÃ©tÃ©o local dÃ©taillÃ©</li>
                    <li class="idea">Gestion de mots de passe WiFi et codes d'accÃ¨s maison</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<!-- ============ COMPARATIF ROADMAP V10 ============ -->
<section id="roadmap-compare">
    <h2>ğŸ—ºï¸ Comparatif avec la ROADMAP v10</h2>

    <div class="card">
        <h3>Phases d'audit vs Ã‰tat actuel</h3>
        <table>
            <thead>
                <tr><th>Phase</th><th>Description</th><th>Status ROADMAP</th><th>Ã‰valuation Audit</th></tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Phase 1</strong></td>
                    <td>Corrections critiques (DB persist, BaseAI, JWT, /metrics, tests API)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” JWT sÃ©curisÃ©, 47 tests API, DB persistÃ©e pour maison/</td>
                </tr>
                <tr>
                    <td><strong>Phase 2</strong></td>
                    <td>HomogÃ©nÃ©isation patterns (KeyNamespace, tabs_with_url, error_boundary, BaseService, cached_fragment)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 100% KeyNamespace, tabs_with_url, error_boundary per tab</td>
                </tr>
                <tr>
                    <td><strong>Phase 3</strong></td>
                    <td>Robustesse (error_boundary 28 modules, navigation famille, features WIP, jardin data-driven)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 28 modules instrumentÃ©s, 5 WIP complÃ©tÃ©s, scan facturesâ†’charges</td>
                </tr>
                <tr>
                    <td><strong>Phase 4</strong></td>
                    <td>Nettoyage (BaseModule pilote, @composant_ui, split >500 LOC, docs UI, TimestampMixin)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 12+ @composant_ui, 2 fichiers splittÃ©s, 3 docs, 4 mixins</td>
                </tr>
                <tr>
                    <td><strong>Phase 5</strong></td>
                    <td>Modules manquants (projets, eco_tips, energie, meubles) + Coverage + Redis + Collab</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 4 modules crÃ©Ã©s, 45 tests, Redis REDIS_URL, mode collaboratif</td>
                </tr>
                <tr>
                    <td><strong>Phase 5 suite</strong></td>
                    <td>Dead code, design system integration, tests snapshot, PWA icons</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” ReactiveServiceMixin supprimÃ©, 27 snapshot tests, 8 icÃ´nes PWA</td>
                </tr>
                <tr>
                    <td><strong>Phase 6</strong></td>
                    <td>Innovations Streamlit (st.write_stream, @st.dialog, auto_refresh, deep linking, chat IA, Specification)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” Tout implÃ©mentÃ©. Specification supprimÃ© ensuite (dead code â†’ Phase nettoyage)</td>
                </tr>
                <tr>
                    <td><strong>Phase 7</strong></td>
                    <td>Production Hardening (Sentry, PWA offline, JSON logging, CI/CD, tests coverage)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 78 tests resilience/observability, CI/CD (.github/workflows), Sentry, SW.js</td>
                </tr>
                <tr>
                    <td><strong>Phase 10</strong></td>
                    <td>Tests & ScalabilitÃ© (Circuit breaker async, ETag, BaseService Ã©tendu, Redis cache, cache stats)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 4 services migrÃ©s, CacheRedis, ETag 304, circuit breaker async</td>
                </tr>
                <tr>
                    <td><strong>Sprint 5 Audit</strong></td>
                    <td>Francisation complÃ¨te (45 classes, 34 tables, 95 tables SQL, 14 Ã©vÃ©nements)</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” 100% nommage FR, 113 fichiers modifiÃ©s, 0 ancien nom anglais</td>
                </tr>
                <tr>
                    <td><strong>Nettoyage patterns</strong></td>
                    <td>Suppression 8 patterns dead code (~6 000 LOC), 18 N+1 corrigÃ©s</td>
                    <td><span class="tag tag-done">âœ… TerminÃ©</span></td>
                    <td>ConfirmÃ© â€” Result Monad, Repository, UoW, IoC, Middleware, CQRS, Specification, UI v2 supprimÃ©s</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="card">
        <h3>Items restants de la ROADMAP v10</h3>
        <table>
            <thead>
                <tr><th>PrioritÃ©</th><th>Item</th><th>Status</th><th>Recommandation audit</th></tr>
            </thead>
            <tbody>
                <tr>
                    <td><span class="tag tag-todo">HAUTE</span></td>
                    <td>Augmenter coverage fichiers restants Ã  0% (sentry, health, navigation)</td>
                    <td>ğŸ”´ Non fait</td>
                    <td>RecommandÃ© â€” fichiers critiques sans couverture</td>
                </tr>
                <tr>
                    <td><span class="tag tag-todo">HAUTE</span></td>
                    <td>DÃ©ployer migrations SQL sur Supabase</td>
                    <td>ğŸ”´ Non fait</td>
                    <td>Bloquant pour la mise en production</td>
                </tr>
                <tr>
                    <td><span class="tag tag-partial">MOYENNE</span></td>
                    <td>322 tests skippÃ©s (modules maison non implÃ©mentÃ©s)</td>
                    <td>ğŸŸ¡ RÃ©duit Ã  ~20</td>
                    <td>Les modules existent maintenant â€” rÃ©Ã©valuer les skips</td>
                </tr>
                <tr>
                    <td><span class="tag tag-partial">BASSE</span></td>
                    <td>Reconnaissance vocale</td>
                    <td>ğŸŸ¡ vocal.py + voice_assistant.py existent</td>
                    <td>Infrastructure prÃ©sente, intÃ©gration modules manquante</td>
                </tr>
                <tr>
                    <td><span class="tag tag-done">FAIT</span></td>
                    <td>Mode hors-ligne (Service Worker)</td>
                    <td>âœ… static/sw.js 249 LOC</td>
                    <td>Complet â€” cache recettes, IndexedDB, background sync</td>
                </tr>
                <tr>
                    <td><span class="tag tag-partial">BASSE</span></td>
                    <td>Multi-famille (comptes partagÃ©s)</td>
                    <td>ğŸ”´ Non fait</td>
                    <td>NÃ©cessite refonte auth â€” garder en backlog</td>
                </tr>
                <tr>
                    <td><span class="tag tag-partial">BASSE</span></td>
                    <td>GÃ©nÃ©rer VAPID keys pour push</td>
                    <td>ğŸ”´ Non fait</td>
                    <td>Simple â€” 1 commande, Ã  documenter dans setup</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="card">
        <h3>MÃ©triques : ROADMAP v10 vs Audit actuel</h3>
        <table>
            <thead><tr><th>MÃ©trique</th><th>Avant (ROADMAP v10)</th><th>Audit actuel</th><th>Delta</th></tr></thead>
            <tbody>
                <tr>
                    <td>Tests collectÃ©s</td>
                    <td><span class="compare-before">8 150</span></td>
                    <td><span class="compare-after">8 150</span></td>
                    <td>= (stable)</td>
                </tr>
                <tr>
                    <td>Tests passÃ©s</td>
                    <td><span class="compare-before">8 045</span></td>
                    <td><span class="compare-after">8 045</span></td>
                    <td>= (98.7%)</td>
                </tr>
                <tr>
                    <td>Tests en Ã©chec</td>
                    <td><span class="compare-before">48</span></td>
                    <td><span class="compare-after">48</span></td>
                    <td>= (pre-existing DB/mocks)</td>
                </tr>
                <tr>
                    <td>Lint issues</td>
                    <td><span class="compare-before">0</span></td>
                    <td><span class="compare-after">0</span></td>
                    <td>âœ… Clean</td>
                </tr>
                <tr>
                    <td>Tables SQL</td>
                    <td><span class="compare-before">95</span></td>
                    <td><span class="compare-after">95</span></td>
                    <td>= (100% FR)</td>
                </tr>
                <tr>
                    <td>Services</td>
                    <td><span class="compare-before">30+</span></td>
                    <td><span class="compare-after">30+</span></td>
                    <td>= (tous @service_factory)</td>
                </tr>
                <tr>
                    <td>N+1 queries</td>
                    <td><span class="compare-before">18 identifiÃ©s</span></td>
                    <td><span class="compare-after">18/18 corrigÃ©s</span></td>
                    <td>âœ… 0 restants</td>
                </tr>
                <tr>
                    <td>Coverage core/</td>
                    <td><span class="compare-before">~75%</span></td>
                    <td><span class="compare-after">~75%</span></td>
                    <td>ğŸŸ¡ Objectif 80% non atteint</td>
                </tr>
                <tr>
                    <td>Nommage FR</td>
                    <td><span class="compare-before">100%</span></td>
                    <td><span class="compare-after">100%</span></td>
                    <td>âœ… ConfirmÃ©</td>
                </tr>
                <tr>
                    <td>Fichiers Python</td>
                    <td>-</td>
                    <td><span class="compare-after">674</span></td>
                    <td>ğŸ“Š (premiÃ¨re mesure)</td>
                </tr>
                <tr>
                    <td>Lignes de code</td>
                    <td>-</td>
                    <td><span class="compare-after">118 870</span></td>
                    <td>ğŸ“Š (premiÃ¨re mesure)</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- ============ ROADMAP NEXT ============ -->
<section id="roadmap-next">
    <h2>ğŸš€ Roadmap RecommandÃ©e â€” Prochaines Ã‰tapes</h2>

    <div class="timeline">
        <div class="timeline-item current">
            <div class="timeline-label">SPRINT A â€” Semaine 1-2 (PrioritÃ© Haute)</div>
            <h4>ğŸ”´ Corrections et dÃ©ploiement</h4>
            <ul class="feature-list">
                <li class="missing">DÃ©ployer migrations SQL sur Supabase production</li>
                <li class="missing">Corriger les 48 tests en Ã©chec (DB/mocks â€” pre-existing)</li>
                <li class="missing">Ajouter tests pour fichiers Ã  0% coverage (sentry.py, health.py, navigation.py)</li>
                <li class="missing">Thread-safety : ajouter locks sur singletons critiques (client IA, config, cache)</li>
                <li class="missing">RÃ©Ã©valuer les ~20 tests skippÃ©s restants</li>
            </ul>
        </div>

        <div class="timeline-item future">
            <div class="timeline-label">SPRINT B â€” Semaine 3-4 (Enrichissement fonctionnel)</div>
            <h4>ğŸ’¡ Accueil & Dashboard enrichi</h4>
            <ul class="feature-list">
                <li class="idea">RÃ©sumÃ© matinal IA personnalisÃ©</li>
                <li class="idea">Widget mÃ©tÃ©o + impact activitÃ©s</li>
                <li class="idea">Mini-calendrier semaine intÃ©grÃ©</li>
                <li class="idea">Rappels contextuels multi-modules</li>
                <li class="idea">Widget "Ce soir on mange..."</li>
            </ul>
        </div>

        <div class="timeline-item future">
            <div class="timeline-label">SPRINT C â€” Semaine 5-6 (Famille & SantÃ©)</div>
            <h4>ğŸ’¡ Module Famille enrichi</h4>
            <ul class="feature-list">
                <li class="idea">Carnet de santÃ© numÃ©rique (vaccins, RDV, taille/poids Jules)</li>
                <li class="idea">Journal photo dÃ©veloppement Jules</li>
                <li class="idea">Calendrier partagÃ© famille (vue combinÃ©e)</li>
                <li class="idea">Anniversaires et Ã©vÃ©nements familiaux</li>
                <li class="idea">Contacts importants (mÃ©decin, nounou, urgences)</li>
            </ul>
        </div>

        <div class="timeline-item future">
            <div class="timeline-label">SPRINT D â€” Semaine 7-8 (Cuisine avancÃ©e)</div>
            <h4>ğŸ’¡ Nutrition & Intelligence</h4>
            <ul class="feature-list">
                <li class="idea">Compteur calories/macros par repas</li>
                <li class="idea">Mode "Qu'est-ce qu'on mange ?" basÃ© sur stock</li>
                <li class="idea">Score anti-gaspillage</li>
                <li class="idea">Substitutions d'ingrÃ©dients par IA</li>
                <li class="idea">Budget courses avec objectif hebdo</li>
            </ul>
        </div>

        <div class="timeline-item future">
            <div class="timeline-label">SPRINT E â€” Semaine 9-10 (Maison & Outils)</div>
            <h4>ğŸ’¡ Maison intelligente</h4>
            <ul class="feature-list">
                <li class="idea">Suivi contrats (assurance, box, Ã©nergie, dates renouvellement)</li>
                <li class="idea">Plan interactif de la maison</li>
                <li class="idea">Carnet adresses artisans</li>
                <li class="idea">Alertes entretien saisonnier automatiques</li>
                <li class="idea">Comparateur fournisseurs Ã©nergie</li>
            </ul>
        </div>

        <div class="timeline-item future">
            <div class="timeline-label">SPRINT F â€” Semaine 11-14 (Innovation)</div>
            <h4>ğŸ’¡ FonctionnalitÃ©s avancÃ©es</h4>
            <ul class="feature-list">
                <li class="idea">Reconnaissance vocale pour ajout rapide</li>
                <li class="idea">Timer cuisson avec alertes sonores</li>
                <li class="idea">Tableau de bord admin (logs, erreurs, perf)</li>
                <li class="idea">Mode dÃ©mo avec donnÃ©es fictives</li>
                <li class="idea">Internationalisation (i18n FR/EN)</li>
            </ul>
        </div>
    </div>
</section>

<!-- ============ ANALYSE COMPLÃ‰TUDE PROJET ============ -->
<section id="completude">
    <h2>ğŸ“‹ Analyse de ComplÃ©tude â€” Aspects d'un Projet Informatique</h2>

    <table>
        <thead>
            <tr><th>Aspect</th><th>Note</th><th>ImplÃ©mentation</th><th>Commentaire</th></tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>Architecture logicielle</strong></td>
                <td><span class="score-badge score-excellent">9/10</span></td>
                <td>Couches sÃ©parÃ©es, lazy loading, DI via registre, patterns composables</td>
                <td>Architecture mature et bien pensÃ©e</td>
            </tr>
            <tr>
                <td><strong>ModÃ¨le de donnÃ©es</strong></td>
                <td><span class="score-badge score-excellent">9/10</span></td>
                <td>95 tables, SQLAlchemy 2.0 ORM, 22 modÃ¨les modulaires, naming convention, mixins</td>
                <td>Complet et bien normalisÃ©</td>
            </tr>
            <tr>
                <td><strong>SÃ©curitÃ©</strong></td>
                <td><span class="score-badge score-excellent">8.5/10</span></td>
                <td>JWT, security headers OWASP, sanitizer XSS, rate limiting, PII filtering, HSTS</td>
                <td>Excellent pour un projet personnel</td>
            </tr>
            <tr>
                <td><strong>Tests</strong></td>
                <td><span class="score-badge score-good">7.5/10</span></td>
                <td>8 150 tests, 405 fichiers, 98.7% pass rate, snapshot visuels</td>
                <td>Bon volume mais coverage ~75% (objectif 80%)</td>
            </tr>
            <tr>
                <td><strong>Performance</strong></td>
                <td><span class="score-badge score-excellent">8.5/10</span></td>
                <td>Lazy loading, cache multi-niveaux, Redis, N+1 corrigÃ©s, profiler rerun</td>
                <td>Excellente optimisation startup + runtime</td>
            </tr>
            <tr>
                <td><strong>RÃ©silience</strong></td>
                <td><span class="score-badge score-excellent">9/10</span></td>
                <td>Circuit breaker, retry composable, timeout, bulkhead, fallback, error boundary</td>
                <td>Resilience de niveau production</td>
            </tr>
            <tr>
                <td><strong>ObservabilitÃ©</strong></td>
                <td><span class="score-badge score-good">8/10</span></td>
                <td>Sentry, correlation_id, JSON structured logging, Prometheus, health checks</td>
                <td>Complet mais Grafana dashboard manquant</td>
            </tr>
            <tr>
                <td><strong>CI/CD</strong></td>
                <td><span class="score-badge score-excellent">8.5/10</span></td>
                <td>GitHub Actions (lint, test matrix, security audit, deploy), Dependabot</td>
                <td>Pipeline mature. Manque staging environment</td>
            </tr>
            <tr>
                <td><strong>Documentation</strong></td>
                <td><span class="score-badge score-good">8/10</span></td>
                <td>ROADMAP, ARCHITECTURE, PATTERNS, API_REFERENCE, copilot-instructions, docstrings FR</td>
                <td>Bonne doc dev. Manque doc utilisateur</td>
            </tr>
            <tr>
                <td><strong>UX/AccessibilitÃ©</strong></td>
                <td><span class="score-badge score-good">8/10</span></td>
                <td>WCAG 2.1, skip-link, ARIA, dark mode, responsive, tablet mode, print</td>
                <td>TrÃ¨s bon. Manque tests E2E Playwright</td>
            </tr>
            <tr>
                <td><strong>Configuration</strong></td>
                <td><span class="score-badge score-excellent">9/10</span></td>
                <td>Pydantic BaseSettings, multi-source (env, secrets, defaults), validation au boot</td>
                <td>Exemplaire</td>
            </tr>
            <tr>
                <td><strong>QualitÃ© de code</strong></td>
                <td><span class="score-badge score-excellent">8.5/10</span></td>
                <td>0 lint issues (ruff), nommage FR 100%, type hints, PEP 561 py.typed</td>
                <td>Code propre et cohÃ©rent</td>
            </tr>
            <tr>
                <td><strong>IntÃ©grations externes</strong></td>
                <td><span class="score-badge score-good">8/10</span></td>
                <td>Mistral AI, Supabase, Google Calendar, Garmin, football-data, Open Food Facts, mÃ©tÃ©o, ntfy</td>
                <td>Riche. Manque: Doctolib, drive courses</td>
            </tr>
            <tr>
                <td><strong>PWA/Mobile</strong></td>
                <td><span class="score-badge score-good">7.5/10</span></td>
                <td>Service worker 249 LOC, manifest, icÃ´nes, IndexedDB, background sync</td>
                <td>Bon. Manque tests offline et push rÃ©el</td>
            </tr>
            <tr>
                <td><strong>Gestion d'Ã©tat</strong></td>
                <td><span class="score-badge score-good">7.5/10</span></td>
                <td>SessionKeys centralisÃ©, GestionnaireEtat, slices, state persistant DB</td>
                <td>Bon. ~130 clÃ©s â€” risque de pollution</td>
            </tr>
        </tbody>
    </table>

    <div class="card" style="margin-top: 1.5rem;">
        <h3>SynthÃ¨se de complÃ©tude</h3>
        <div class="grid-3">
            <div class="metric">
                <div class="number" style="color: var(--green);">85%</div>
                <div class="label">Infrastructure technique</div>
            </div>
            <div class="metric">
                <div class="number" style="color: var(--accent);">80%</div>
                <div class="label">FonctionnalitÃ©s mÃ©tier</div>
            </div>
            <div class="metric">
                <div class="number" style="color: var(--yellow);">70%</div>
                <div class="label">Production readiness</div>
            </div>
        </div>
        <p style="text-align: center; color: var(--text-muted); margin-top: 1rem;">
            Le projet est <strong>trÃ¨s avancÃ© pour un assistant familial personnel</strong>. L'infrastructure technique est de niveau professionnel.
            Les 30% restants de "production readiness" concernent : dÃ©ploiement SQL, tests en Ã©chec Ã  corriger, monitoring Grafana, et documentation utilisateur.
        </p>
    </div>
</section>

<!-- ============ FOOTER ============ -->
<div style="text-align: center; padding: 3rem 0; border-top: 1px solid var(--border); margin-top: 3rem; color: var(--text-muted);">
    <p>Rapport d'audit gÃ©nÃ©rÃ© le 26 fÃ©vrier 2026</p>
    <p>Assistant Matanne â€” 674 fichiers Python Â· 118 870 LOC Â· 95 tables SQL Â· 8 150 tests</p>
    <p style="margin-top: .5rem; font-size: .8rem;">Analyse complÃ¨te de src/api, src/core, src/modules, src/services, src/ui et app.py</p>
</div>

</div><!-- /container -->

</body>
</html>
